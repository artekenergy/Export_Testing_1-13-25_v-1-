{"version":3,"file":"index.b84f00b4e2b49cda4d35.js","mappings":"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","sources":["webpack://wdu-web/./src/index.scss","webpack://wdu-web/./node_modules/css-loader/dist/runtime/api.js","webpack://wdu-web/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://wdu-web/./node_modules/css-loader/dist/runtime/noSourceMaps.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://wdu-web/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://wdu-web/webpack/bootstrap","webpack://wdu-web/webpack/runtime/compat get default export","webpack://wdu-web/webpack/runtime/define property getters","webpack://wdu-web/webpack/runtime/hasOwnProperty shorthand","webpack://wdu-web/webpack/runtime/publicPath","webpack://wdu-web/webpack/runtime/jsonp chunk loading","webpack://wdu-web/webpack/runtime/nonce","webpack://wdu-web/./src/index.scss?739e","webpack://wdu-web/./node_modules/tslib/tslib.es6.js","webpack://wdu-web/./src/modules/graphics/application-settings.ts","webpack://wdu-web/./src/infrastructure/log.ts","webpack://wdu-web/./src/infrastructure/communication/protocol.ts","webpack://wdu-web/./src/infrastructure/signals/expression-type.ts","webpack://wdu-web/./src/infrastructure/communication/communication-handler.ts","webpack://wdu-web/./src/infrastructure/settings-reader.ts","webpack://wdu-web/./src/infrastructure/value-converter/value-types.ts","webpack://wdu-web/./src/infrastructure/file-load-helper.ts","webpack://wdu-web/./src/infrastructure/timer.ts","webpack://wdu-web/./src/modules/graphics/language-handler.ts","webpack://wdu-web/./src/infrastructure/value-converter/value-type-definition.ts","webpack://wdu-web/./src/infrastructure/value-converter/value-converter.ts","webpack://wdu-web/./src/infrastructure/communication/web-socket-manager.ts","webpack://wdu-web/./src/modules/graphics/components/visibility.ts","webpack://wdu-web/./src/modules/graphics/layer-action-enum.ts","webpack://wdu-web/./src/modules/graphics/components/signal-value.ts","webpack://wdu-web/./src/modules/graphics/components/gauge-sliced-overlay.ts","webpack://wdu-web/./src/infrastructure/signals/signal-info-type.ts","webpack://wdu-web/./src/modules/graphics/helpers.ts","webpack://wdu-web/./src/modules/graphics/components/component.ts","webpack://wdu-web/./src/modules/graphics/components/gauge.ts","webpack://wdu-web/./src/modules/graphics/components/button.ts","webpack://wdu-web/./src/modules/graphics/components/level-gauge.ts","webpack://wdu-web/./src/modules/graphics/components/image.ts","webpack://wdu-web/./src/modules/graphics/components/navigation-button.ts","webpack://wdu-web/./src/modules/graphics/components/textbox.ts","webpack://wdu-web/./node_modules/throttle-debounce/esm/index.js","webpack://wdu-web/./src/modules/graphics/components/slider.ts","webpack://wdu-web/./src/modules/graphics/components/indicator.ts","webpack://wdu-web/./src/modules/graphics/page.ts","webpack://wdu-web/./src/modules/graphics/components/color-rectangle.ts","webpack://wdu-web/./src/modules/graphics/layer.ts","webpack://wdu-web/./src/modules/graphics/viewPort.ts","webpack://wdu-web/./src/modules/graphics/components/screen-saver-button.ts","webpack://wdu-web/./src/modules/graphics/component-factory.ts","webpack://wdu-web/./src/modules/graphics/external-page-navigator.ts","webpack://wdu-web/./src/infrastructure/url-helper.ts","webpack://wdu-web/./src/modules/graphics/page-navigator.ts","webpack://wdu-web/./src/modules/graphics/page-overlays.ts","webpack://wdu-web/./src/modules/graphics/data-subscription.ts","webpack://wdu-web/./src/modules/graphics/view-port-manager.ts","webpack://wdu-web/./src/modules/graphics/screen-saver.ts","webpack://wdu-web/./src/infrastructure/communication/web-socket-content-decoder.ts","webpack://wdu-web/./src/infrastructure/netlist-checksum-handler.ts","webpack://wdu-web/./src/infrastructure/magnitude-converter.ts","webpack://wdu-web/./src/modules/app-selector/app-selector-link-timer.ts","webpack://wdu-web/./src/modules/graphics/app-selector-link-timer-dialog.ts","webpack://wdu-web/./src/index.ts","webpack://wdu-web/./src/modules/graphics/graphics-bootstrapper.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../fonts/GARMINDEJAVUSANS_0.TTF\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face{font-family:\\\"DejaVu Sans\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"truetype\\\")}html{visibility:visible !important}body{margin:0;background-color:#000000;overflow:hidden;font-family:\\\"DejaVu Sans\\\", sans-serif}html,body{user-select:none;-webkit-user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}img:not([src]),img[src=\\\"\\\"]{display:none}.page-collection{position:fixed;transform:translate(-50%, -50%);top:50%;left:50%}.page{clip-path:inset(0 0 0 0);-webkit-clip-path:inset(0 0 0 0);width:100%;height:100%}.component{position:absolute;user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-webkit-touch-callout:none}.component img{width:100%;height:100%;position:absolute;transform:translateZ(0px);outline:1px solid transparent}.component.button img{position:absolute}.component.gauge>canvas{position:absolute}.gauge-animation{-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.component.gauge>img.gauge-overlay{position:absolute}.component.indicator{pointer-events:none}.component.indicator>img{pointer-events:auto}.component.indicator.allow-click-through>img{pointer-events:none}.levelgauge-animation{-webkit-transition:clip 0.25s ease-in;-moz-transition:clip 0.25s ease-in;-o-transition:clip 0.25s ease-in;transition:clip 0.25s ease-in}.notransition *{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.levelgauge-leveltracker-animation{-webkit-transition:bottom 0.25s ease-in;-moz-transition:bottom 0.25s ease-in;-o-transition:bottom 0.25s ease-in;transition:bottom 0.25s ease-in}.component.levelgauge>div.levelgauge-level{width:100%;height:100%;bottom:0px;position:absolute}.component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage .component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage-low-threshold,.component.levelgauge>div.levelgauge-level>img.levelgauge-levelimage-high-threshold{width:100%;height:100%;position:relative}.component.button>img.img.navigationbutton-image{z-index:0}.component.button>img.img.navigationbutton-imagepressed{z-index:10}.component.signalvalue{overflow:hidden;display:table;table-layout:fixed;white-space:nowrap}.signalvalue-inner{display:table-cell}div.signalvalue-inner>div{display:inline;font-kerning:none}.component.textbox{overflow:hidden;display:table;table-layout:fixed;white-space:nowrap}.component.textbox>div{white-space:pre;font-kerning:none;display:table-cell}.text-halign-left{text-align:left}.text-halign-center{text-align:center}.text-halign-right{text-align:right}.text-valign-top{vertical-align:top}.text-valign-middle{vertical-align:middle}.text-valign-bottom{vertical-align:bottom}.hidden{display:none !important}.test-warning-message{background-color:#0000;z-index:500;position:fixed;font-size:1vw;text-align:center;top:2rem;margin-top:2rem;padding:1rem;color:#f00;border:0.2vw solid #f00;border-radius:0.5rem;left:50%;transform:translateX(-50%)}.checksum-warning-message{background-color:#0000;z-index:500;position:fixed;font-size:1vw;text-align:center;bottom:2rem;margin-bottom:2rem;padding:1rem;color:#f00;border:0.2vw solid #f00;border-radius:0.5rem;left:50%;transform:translateX(-50%)}@media (min-aspect-ratio: 800 / 200){.test-warning-message{position:absolute;top:0;right:0;border:0;margin:auto;height:10px;font-size:0.6rem}.checksum-warning-message{position:absolute;bottom:0;right:0;border:0;margin:auto;height:10px;font-size:0.6rem}}.test-warning-message:empty{display:none}.overlay{background:black;width:100%;height:100%;z-index:500;position:fixed;top:0;left:0}.overlay .overlay-text{font-size:4vh;text-align:center;color:#888}@media (min-aspect-ratio: 800 / 200){.overlay .overlay-text{font-size:1rem}}.overlay-reload{opacity:1;animation-name:fadeInOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:1s}@keyframes fadeInOpacity{0%{opacity:0}100%{opacity:1}}.overlay .checksum-warning{font-size:2.0vw;margin-top:5vh;text-align:center;color:#f00;z-index:501}@media (min-aspect-ratio: 800 / 200){.overlay .checksum-warning{background:#000;text-align:center;position:absolute;top:0;height:100%;width:100%;padding-top:15vh;font-size:1.1vw}}.allow-click-through{pointer-events:none}.external-page{height:100%;width:100%;position:absolute;z-index:100}.external-page-navigation-back{font-size:1.0vw;background-image:linear-gradient(to bottom, #a7afb6, #55636e 5%, #55636e 50%, #282e33 100%);display:block;color:#fff;text-decoration:none;text-shadow:1px 1px #333;padding:0.5rem 2rem;border:1px solid #333435;border-radius:0.3rem;box-shadow:0px 0px 5px -2px #888888}.external-page-iframe{height:100%;width:100%}.external-page-status{height:100%;width:100%;background-color:#000;position:fixed}.external-page-status .external-page-status-text{font-size:2.5vw;text-align:center;margin-top:45vh;color:#fff}.component.indicator.allow-click-through{pointer-events:none}.animated-loader-outer{text-align:center;margin-top:45vh;margin-bottom:4vh}@media (min-aspect-ratio: 800 / 200){.animated-loader-outer{margin-top:25vh}}.animated-loader{display:inline-block;width:10vh;height:10vh}@media (min-aspect-ratio: 800 / 200){.animated-loader{width:1rem;height:1rem}}.animated-loader:after{content:\\\" \\\";display:block;width:7vh;height:7vh;margin:0;border-radius:50%;border:0.2rem solid #888;border-color:#888 transparent #888 transparent;animation:animated-loader 1.0s linear infinite}@media (min-aspect-ratio: 800 / 200){.animated-loader:after{width:0.8rem;height:0.8rem;border:0.15rem solid #888;border-color:#888 transparent #888 transparent}}@keyframes animated-loader{0%{transform:rotate(0deg)}25%{transform:rotate(90deg)}50%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}::-webkit-scrollbar{-webkit-appearance:none;width:8px}::-webkit-scrollbar-track{background-color:rgba(57,57,57,0.6);border-radius:8px}::-webkit-scrollbar-thumb{border-radius:8px;background-color:rgba(156,156,156,0.6)}.app-selector-link-timer-dialog{z-index:1010;position:fixed;background-color:rgba(255,255,255,0);top:0;right:0;bottom:0;left:0;pointer-events:none;transition:all 2.0s}.app-selector-link-timer-dialog>div{width:38vh;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:2vh;background:white;pointer-events:auto;background-color:#161616;border:0.01vh solid #444}.app-selector-link-timer-dialog-button{display:inline-block;background:#737373;color:#e2e2e2;padding:0vh;margin:0 0 1.0vh 0;box-sizing:border-box !important;text-decoration:none;cursor:pointer;width:100%;font-size:4vh;height:10vh;vertical-align:middle;border-top:0.15vh solid #ababab;border-bottom:0.1vh solid #000000;pointer-events:auto !important}.app-selector-link-timer{display:inline-block;width:28vh;height:28vh;z-index:1000;position:fixed;transform:translate(-50%, -50%)}.app-selector-link-timer-progress-bar{stroke-dasharray:296 296;stroke-dashoffset:296;animation:grow 10s linear infinite, fade-in 10s}@keyframes grow{100%{stroke-dashoffset:0}}@keyframes fade-in{0%{opacity:0}20%{opacity:0}50%{opacity:0.5}100%{opacity:0.5}}.log-view{position:fixed;z-index:9989;color:white;background-color:black;top:0;left:0;width:100%;height:100%;display:block;overflow:hidden;font-size:x-large;opacity:0.8}.log-view-minimized{height:45px !important}.log-view-content{padding:15px;overflow-y:scroll;height:90vh;width:100vw;word-wrap:break-word}.maximize-log-button{position:absolute;right:0;top:0;padding:8px;z-index:9989;display:none}.log-button{float:right;padding:8px;margin-right:15px;margin-top:0px}\\n\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (i) {\n  return i[1];\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export class ApplicationSettings {\r\n    public index: number;\r\n    public type: ApplicationType;\r\n    public hasAppSelector: boolean;\r\n\r\n    public static readApplicationSettings(): ApplicationSettings {\r\n        const jsonString = document.getElementById('application-settings').innerHTML;\r\n        const applicationSettings = JSON.parse(jsonString) as ApplicationSettings;\r\n        return applicationSettings;\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum ApplicationType {\r\n    normal = 0,\r\n    overlaybar = 1\r\n}\r\n","\r\n/* eslint-disable no-console */\r\n// eslint-disable-next-line no-shadow\r\nexport enum LogLevel {\r\n    off = 0,\r\n    error = 1,\r\n    warning = 2,\r\n    info = 3,\r\n    verbose = 4,\r\n    debug = 5\r\n}\r\n\r\nexport class Log {\r\n\r\n    private static _clickStart: Date = new Date();\r\n    private static _lastClick: Date = new Date();\r\n    private static _isInitialized: boolean = false;\r\n    private static _debugModeActive: boolean = false;\r\n    private static _activateDuration: number = 2000;\r\n    private static _requiredShortPressCount: number = 3;\r\n    private static _shortPressCount: number = 0;\r\n    private static _state: number = 0;\r\n    public static logLevel: LogLevel = LogLevel.error;\r\n    public static autoRefresh: boolean = false;\r\n    public static logError(message?: any, ...optionalParams: any[]): void {\r\n        if (this.logLevel >= LogLevel.error) {\r\n            console.error(message, ...optionalParams);\r\n            Log._checkAutoRefresh()\r\n        }\r\n    }\r\n\r\n    private static _checkAutoRefresh(): void {\r\n        if (Log.autoRefresh) {\r\n            Log._populateLog();\r\n        }\r\n    }\r\n    public static logWarning(message?: any, ...optionalParams: any[]): void {\r\n        if (Log.logLevel >= LogLevel.warning) {\r\n            console.log(message, ...optionalParams);\r\n            Log._checkAutoRefresh()\r\n        }\r\n    }\r\n    public static logInfo(message?: any, ...optionalParams: any[]): void {\r\n        if (Log.logLevel >= LogLevel.info) {\r\n            console.log(message, ...optionalParams);\r\n            Log._checkAutoRefresh()\r\n        }\r\n    }\r\n    public static logVerbose(message?: any, ...optionalParams: any[]): void {\r\n        if (Log.logLevel >= LogLevel.verbose) {\r\n            console.log(message, ...optionalParams);\r\n            Log._checkAutoRefresh()\r\n        }\r\n    }\r\n    public static logDebug(message?: any, ...optionalParams: any[]): void {\r\n        if (Log.logLevel >= LogLevel.debug) {\r\n            console.log(message, ...optionalParams);\r\n            Log._checkAutoRefresh()\r\n        }\r\n    }\r\n\r\n    public static initialize(): void {\r\n        if (Log._isInitialized === true) {\r\n            return;\r\n        }\r\n        Log._isInitialized = true;\r\n\r\n        document.addEventListener('mousedown', (_event: MouseEvent) => Log._handleStartLogView(), true);\r\n        document.addEventListener('keydown', (event: KeyboardEvent) => {\r\n            if (Log._debugModeActive) {\r\n                return;\r\n            }\r\n\r\n            if (event.ctrlKey && event.altKey && event.key === 'l') {\r\n                Log.showLogView();\r\n            }\r\n        });\r\n    }\r\n\r\n    public static showLogView(): void {\r\n        Log._debugModeActive = true;\r\n        let loggerDiv = document.querySelector<HTMLElement>('.log-view-wrapper');\r\n\r\n        // Create log view div\r\n        if (loggerDiv == null) {\r\n            loggerDiv = Log._setupLogView();\r\n        }\r\n        Log._populateLog();\r\n        loggerDiv.style.display = 'block';\r\n    }\r\n\r\n    private static _closeLog(): void {\r\n        Log._state = 0;\r\n        Log._shortPressCount = 0;\r\n        Log._debugModeActive = false;\r\n        Log.logLevel = LogLevel.error;\r\n        const loggerDiv = document.querySelector<HTMLElement>('.log-view-wrapper');\r\n        loggerDiv.style.display = 'none';\r\n        const loggerContent = document.querySelector<HTMLElement>('.log-view-content');\r\n        loggerContent.innerHTML = '';\r\n    }\r\n\r\n    private static _clearLog(): void {\r\n        globalLogMessages.splice(0);\r\n        this._populateLog();\r\n    }\r\n\r\n    private static _maximizeLog(): void {\r\n\r\n        const loggerView = document.querySelector<HTMLElement>('.log-view');\r\n        loggerView.style.display = 'block';\r\n        const maximizeButton = document.querySelector<HTMLElement>('.maximize-log-button');\r\n        maximizeButton.style.display = 'none';\r\n    }\r\n\r\n    private static _mimimizeLog(): void {\r\n\r\n        const loggerView = document.querySelector<HTMLElement>('.log-view');\r\n        loggerView.style.display = 'none';\r\n        const maximizeButton = document.querySelector<HTMLElement>('.maximize-log-button');\r\n        maximizeButton.style.display = 'block';\r\n    }\r\n\r\n\r\n    private static _setAutoRefreshLog(): void {\r\n\r\n        const button = document.querySelector<HTMLInputElement>('.auto-refresh-log-button');\r\n        if (Log.autoRefresh === true) {\r\n            Log.autoRefresh = false;\r\n            button.innerText = 'Turn Auto Refresh On';\r\n        } else {\r\n            Log.autoRefresh = true;\r\n            button.innerText = 'Turn Auto Refresh Off';\r\n        }\r\n    }\r\n\r\n\r\n    private static _handleStartLogView(): void {\r\n\r\n        if (Log._debugModeActive) {\r\n            Log._lastClick = new Date();\r\n            return;\r\n        }\r\n\r\n        if (Log._durationGreaterThan(3 * Log._activateDuration, Log._lastClick)) {\r\n            Log._state = 0;\r\n            Log._shortPressCount = 0;\r\n        }\r\n\r\n        if (Log._state % 2 !== 0) { // Wait mode\r\n            if (Log._durationGreaterThan(Log._activateDuration, Log._lastClick)) {\r\n                Log._state++;\r\n            } else {\r\n                Log._state = 0;\r\n            }\r\n            Log._shortPressCount = 0;\r\n        }\r\n\r\n        if (Log._state % 2 === 0) {  // Click mode\r\n            if (Log._shortPressCount === 0) {\r\n                Log._clickStart = new Date();\r\n            }\r\n            if (Log._shortPressCount < Log._requiredShortPressCount && Log._durationGreaterThan(Log._activateDuration, Log._clickStart)) {\r\n                Log._state = 0; // Sequence failed\r\n                Log._shortPressCount = 0;\r\n                return;\r\n            } else {\r\n                Log._shortPressCount++;\r\n            }\r\n            if (Log._shortPressCount >= Log._requiredShortPressCount) {\r\n                Log._state++;\r\n                Log._clickStart = new Date();\r\n            }\r\n        }\r\n        Log._lastClick = new Date();\r\n\r\n        if (Log._state > 6) {\r\n            Log._state = 0;\r\n            Log._shortPressCount = 0;\r\n            Log.showLogView();\r\n        }\r\n    }\r\n\r\n    private static _durationGreaterThan(limit: number, timeToCompare: Date): boolean {\r\n        return new Date().getTime() - timeToCompare.getTime() > limit;\r\n    }\r\n\r\n    private static _setupLogView(): HTMLElement {\r\n        const body = document.querySelector('body') as HTMLElement;\r\n        const loggerDiv = document.createElement('div');\r\n        loggerDiv.classList.add('log-view-wrapper');\r\n\r\n        loggerDiv.innerHTML = `\r\n        <button class=\"maximize-log-button\">Maximize</button>\r\n        <div class=\"log-view\">\r\n            <div class=\"log-view-toobar\">\r\n            <button class=\"close-log-button log-button\">Exit</button>\r\n            <button class=\"clear-log-button log-button\">Clear</button>\r\n            <button class=\"minimize-log-button log-button\">Minimize</button>\r\n            <button class=\"refresh-log-button log-button\">Refresh</button>\r\n            <button class=\"auto-refresh-log-button log-button\">${Log.autoRefresh === false ? 'Turn Auto Refresh On' : 'Turn Auto Refresh Off'}</button>\r\n            <select class=\"log-level-selector log-button\">\r\n                <option value=\"5\" ${Log.logLevel === LogLevel.debug ? 'selected' : ''}>Debug</option>\r\n                <option value=\"4\" ${Log.logLevel === LogLevel.verbose ? 'selected' : ''}>Verbose</option>\r\n                <option value=\"3\" ${Log.logLevel === LogLevel.info ? 'selected' : ''}>Info</option>\r\n                <option value=\"2\" ${Log.logLevel === LogLevel.warning ? 'selected' : ''}>Warning</option>\r\n                <option value=\"1\" ${Log.logLevel === LogLevel.error ? 'selected' : ''} >Error</option>\r\n                <option value=\"0\" ${Log.logLevel === LogLevel.off ? 'selected' : ''}>Off</option>\r\n            </select>\r\n            </div>\r\n            <div class=\"log-view-content\">\r\n            </div>\r\n        </div>`;\r\n        body.appendChild(loggerDiv);\r\n\r\n        const logLevelSelect = document.querySelector<HTMLSelectElement>('.log-level-selector');\r\n        logLevelSelect.onchange = (event: Event) => {\r\n            const selector = event.target as HTMLSelectElement\r\n            Log.logLevel = parseInt(selector.value, 10) as LogLevel;\r\n        }\r\n        const closeLogButton = document.querySelector<HTMLButtonElement>('.close-log-button');\r\n        closeLogButton.onclick = () => Log._closeLog();\r\n\r\n        const clearLogButton = document.querySelector<HTMLButtonElement>('.clear-log-button');\r\n        clearLogButton.onclick = () => Log._clearLog();\r\n\r\n        const minimizeLogButton = document.querySelector<HTMLButtonElement>('.minimize-log-button');\r\n        minimizeLogButton.onclick = () => Log._mimimizeLog();\r\n\r\n        const maximizeLogButton = document.querySelector<HTMLButtonElement>('.maximize-log-button');\r\n        maximizeLogButton.onclick = () => Log._maximizeLog();\r\n\r\n        const refreshLogButton = document.querySelector<HTMLButtonElement>('.refresh-log-button');\r\n        refreshLogButton.onclick = () => Log._populateLog();\r\n\r\n        const autoRefreshLogInput = document.querySelector<HTMLButtonElement>('.auto-refresh-log-button');\r\n        autoRefreshLogInput.onclick = () => Log._setAutoRefreshLog();\r\n        return loggerDiv;\r\n    }\r\n    private static _populateLog(): void {\r\n        const loggerContent = document.querySelector<HTMLElement>('.log-view-content');\r\n        loggerContent.innerHTML = '';\r\n        const length = globalLogMessages.length;\r\n        for (let i = length - 1; i >= 0; i--) {\r\n            const message = globalLogMessages[i];\r\n            const node = document.createElement('div');\r\n            const textNode = document.createTextNode(message);\r\n            node.appendChild(textNode);\r\n            loggerContent.appendChild(node);\r\n        }\r\n    }\r\n}\r\n","import { ValueType } from '../value-converter/value-types';\r\n\r\nexport class Protocol {\r\n    // public static fuseResetCommand(unitId: number, channelId: number): MdfCommand {\r\n    //     // alert('Repeated Attempts to reset circuit may cause permanent damage!');\r\n    //     return {\r\n    //         id: (unitId << 8) | channelId & 0xFF,\r\n    //         type: 33,\r\n    //         size: 1,\r\n    //         data: [0x01]\r\n    //     };\r\n    // }\r\n\r\n    public static receivedWduHeartbetAckCommand(): WebsocketMessage {\r\n        return {\r\n            messagetype: MessageTypeCode.acknowledgement,\r\n            messagecmd: AcknowlegementCommands.acknowledgementAck,\r\n            size: 1,\r\n            data: [0x00]\r\n        };\r\n    }\r\n    public static requestWduInfoCommand(): WebsocketMessage {\r\n        return {\r\n            messagetype: 0x31,\r\n            messagecmd: 1, // Request WDU Info.\r\n            size: 3,\r\n            data: [0x00, 0x00, 0x00]\r\n        };\r\n    }\r\n    public static requestApplicationSelectorInfoAvailableApplications(clientId: string): WebsocketMessage {\r\n        return {\r\n            messagetype: 0x31,\r\n            messagecmd: 5,\r\n            size: 0,\r\n            data: [],\r\n            extradata: {type: 0x01, clientId}\r\n        };\r\n    }\r\n    public static applicationSelectorSetDefaultApplication(applicationIds: string[], clientId: string): WebsocketMessage {\r\n        return {\r\n            messagetype: MessageTypeCode.systemWrite,\r\n            messagecmd: 0x07,\r\n            size: 0,\r\n            data: [],\r\n            extradata: {\r\n                type: 0x02, // Set\r\n                identifiers: applicationIds,\r\n                clientId\r\n            }\r\n        };\r\n    }\r\n    public static applicationSelectorClearDefaultApplication(): WebsocketMessage {\r\n        return {\r\n            messagetype: MessageTypeCode.systemWrite,\r\n            messagecmd: 0x07,\r\n            size: 0,\r\n            data: [],\r\n            extradata: {type: 0x01} // Clear\r\n        };\r\n    }\r\n    public static momentaryCommand(ebpComponentId: number, pressed: boolean): WebsocketMessage {\r\n        return {\r\n            messagetype: 17,\r\n            messagecmd: 1,\r\n            size: 3,\r\n            data: [ebpComponentId, ebpComponentId >> 8, pressed ? 1 : 0]\r\n        };\r\n    }\r\n\r\n    public static toggleCommand(ebpComponentId: number, toggleOn: boolean, set: boolean, reset: boolean): WebsocketMessage {\r\n        let cmdToSend = 0x00;\r\n        if (toggleOn) {\r\n            cmdToSend |= 0x01;\r\n        }\r\n        if (set) {\r\n            cmdToSend |= 0x02;\r\n        }\r\n        if (reset) {\r\n            cmdToSend |= 0x04;\r\n        }\r\n\r\n        return {\r\n            messagetype: 17,\r\n            messagecmd: 0,\r\n            size: 3,\r\n            data: [ebpComponentId, ebpComponentId >> 8, cmdToSend]\r\n        };\r\n    }\r\n\r\n    public static dimmerCommand(ebpComponentId: number, value: number, setResetCmd: number): WebsocketMessage {\r\n        return {\r\n            messagetype: 17,\r\n            messagecmd: 3,\r\n            size: 5,\r\n            data: [ebpComponentId, ebpComponentId >> 8, setResetCmd, ((value) & 0xFF), ((value >> 8) & 0xFF)]\r\n        };\r\n    }\r\n}\r\n\r\nexport class WebsocketMessage {\r\n    public messagetype: MessageTypeCode;\r\n    public messagecmd: number;\r\n    public size: number;\r\n    public data: number[];\r\n    public extradata?: object = {};\r\n}\r\n\r\nexport class StatusUpdateDataContent {\r\n    public signalId: number;\r\n    public unavailable: boolean;\r\n    public valueTypeIdentifier: ValueType;\r\n    public value: number;\r\n    public equals(other: StatusUpdateDataContent): boolean {\r\n        return this.signalId === other.signalId &&\r\n            this.unavailable === other.unavailable &&\r\n            this.valueTypeIdentifier === other.valueTypeIdentifier &&\r\n            this.value === other.value;\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum MfdStatusType {\r\n    pulse = 0x00,\r\n    momentary = 0x01,\r\n    dimmer = 0x03,\r\n    statusUpdate = 0x05\r\n\r\n}\r\nexport class MfdStatusUpdateDataContent extends StatusUpdateDataContent {\r\n    public type: MfdStatusType;\r\n    public unavailable: boolean;\r\n    public onOffStatus: boolean;\r\n    public err1FT: boolean;\r\n    public err2UC: boolean;\r\n    public dimmerValue: number;\r\n\r\n    public equals(other: MfdStatusUpdateDataContent): boolean {\r\n        return this.signalId === other.signalId &&\r\n            this.unavailable === other.unavailable &&\r\n            this.valueTypeIdentifier === other.valueTypeIdentifier &&\r\n            this.value === other.value &&\r\n            this.type === other.type &&\r\n            this.onOffStatus === other.onOffStatus &&\r\n            this.err1FT === other.err1FT &&\r\n            this.err2UC === other.err2UC &&\r\n            this.dimmerValue === other.dimmerValue;\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum MessageTypeCode {\r\n    mfdStatus = 0x10, // MDF Channel Item\r\n    mfdControl = 0x11, // From Webpage, Userinteraction, Button Pressed, Exectute something.\r\n    channelInfo = 0x20, // Channel is on, Channel is off etc etc.\r\n    channelCmd = 0x21, // Fuse Reset Etc.\r\n    systemCmd = 0x30, // Keep Alive Service Provider.\r\n    systemReq = 0x31, // Request WDU Information etc.\r\n    systemWrite = 0x32, // Change Language Settings etc.\r\n    syncCmd = 0x40, // A new Client is connected.\r\n    alertManagement = 0x51, // Alert messages, Suite of PGN's, including Text and State.\r\n    nmeaMsg = 0x52, // NMEA2000 Data, Ex. Fluid-Level, Battery Status,\r\n    subscriptionRequest = 0x60,\r\n    clientControlCommand = 0x70,  // Cant find this in wdu firmware!\r\n    acknowledgement = 0x80 // If recevied messages requires ack\r\n\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum SystemCommandTypes {\r\n    serviceProviderHeartbeat = 0x00,\r\n    wduInfo = 0x01,\r\n    wduSettingsUpdated = 0x04,\r\n    wduHeartbeat = 0x05,\r\n    applicationSelection = 0x0A,\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum MfdStatusCommandTypes {\r\n    toggle = 0x00,\r\n    momentary = 0x01,\r\n    dimmerUpdate = 0x03,\r\n    statusUpdate = 0x05\r\n}\r\n// eslint-disable-next-line no-shadow\r\nexport enum NmeaMessageCommandTypes {\r\n    statusUpdate = 0x01\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum ClientControlCommands {\r\n    forceReload = 0x01,\r\n\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum AcknowlegementCommands {\r\n    acknowledgementAck = 0x00\r\n}\r\n\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum ValueDataType {\r\n    uint32 = 0,\r\n    int32 = 1,\r\n    uint16 = 2,\r\n    int16 = 3,\r\n    uint8 = 4,\r\n    int8 = 5,\r\n    uint64 = 6,\r\n    int64 = 7,\r\n    bit = 8\r\n\r\n}\r\n","// eslint-disable-next-line no-shadow\r\nexport enum ExpressionType {\r\n    equal = 0,\r\n    notEqual = 1,\r\n    greaterThan = 2,\r\n    lessThan = 3,\r\n    greaterThanOrEqual = 4,\r\n    lessThanOrEqual = 5,\r\n    between = 6,\r\n    notBetween = 7,\r\n    disabled = 8,\r\n}\r\n","import { WebSocketManager } from './web-socket-manager';\r\nimport { ClientControlCommands, MessageTypeCode, MfdStatusType, MfdStatusUpdateDataContent, Protocol, StatusUpdateDataContent, SystemCommandTypes, WebsocketMessage } from './protocol';\r\nimport { Log, } from '../log';\r\nimport { Timer } from '../timer';\r\nimport { WebSocketContentDecoder } from './web-socket-content-decoder';\r\nimport { VirtualSignalExpr } from '../signals/virtual-signal-expr';\r\nimport { ExpressionType } from '../signals/expression-type';\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum Command {\r\n    forcePageReload = 0,\r\n    settingsUpdated = 1,\r\n    wduInfoReceived = 3,\r\n    checksumReceived = 4,\r\n    applicationSelectionListReceived = 5,\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum WatchdogStates {\r\n    notSet = 0,\r\n    ok = 1,\r\n    noConnectionToDigitalSwitching = 2,\r\n    noConnectionToWdu = 3\r\n}\r\n\r\nexport type OnWatchdogStateChangedDelegate = (state: WatchdogStates) => void;\r\nexport type OnNmeaValueReceivedDelegate = (value: StatusUpdateDataContent) => void;\r\nexport type OnMfdValueReceivedDelegate = (value: MfdStatusUpdateDataContent) => void;\r\nexport type OnCommandReceivedDelegate = (command: Command, extradata?: object) => void;\r\n\r\nexport interface ICommunicationHandler {\r\n    configurationChecksumFromWDU: number;\r\n    addOnNmeaValueReceivedDelegate(_signalId: number, _delegate: OnNmeaValueReceivedDelegate): void;\r\n    addOnMfdValueReceivedDelegate(_signalId: number, _delegate: OnMfdValueReceivedDelegate): void;\r\n    addOnCommandReceivedDelegate(delegate: OnCommandReceivedDelegate): void;\r\n    removeOnWathdogStateChangedDelegate(delegate: OnWatchdogStateChangedDelegate): void;\r\n    send(_command: any): void;\r\n    getProtocolVersion(): number[]; // TODO Semver\r\n}\r\n\r\nexport class CommunicationHandler implements ICommunicationHandler {\r\n\r\n    public configurationChecksumFromWDU: number = null;\r\n    public watchdogState: WatchdogStates = WatchdogStates.notSet;\r\n    private _webSocketManager: WebSocketManager = null;\r\n    private _nmeaValueReceivedDelegatesMap: Map<number, OnNmeaValueReceivedDelegate[]> = new Map<number, OnNmeaValueReceivedDelegate[]>();\r\n    private _mdfValueReceivedDelegatesMap: Map<number, OnMfdValueReceivedDelegate[]> = new Map<number, OnMfdValueReceivedDelegate[]>();\r\n    private _onWatchdogStateChangesDelegates: OnWatchdogStateChangedDelegate[] = [];\r\n    private _commandReceivedDelegates: OnCommandReceivedDelegate[] = [];\r\n    private _digitalSwitchingHeartbeatTimestamp: number = 0;\r\n    private _lastReceivedMessageTimestamp: number = 0;\r\n    private _wduSendsHeartbeat: boolean;\r\n    private _oldHeartbeatDurationDivider: number = 0;\r\n    private _watchdogDuration: number = 2000;\r\n    private _protocolVersion: number[] = [1, 0, 0];\r\n    private _wduInfoReceived: boolean = false;\r\n    private _contentDecoder: WebSocketContentDecoder\r\n    private _receivedNmeaDataMap: Map<number, StatusUpdateDataContent> = new Map<number, StatusUpdateDataContent>();\r\n    private _receivedMfdDataMap: Map<number, MfdStatusUpdateDataContent> = new Map<number, MfdStatusUpdateDataContent>();\r\n\r\n    constructor(webSocketManager: WebSocketManager, contentDecoder: WebSocketContentDecoder) {\r\n        this._webSocketManager = webSocketManager;\r\n        this._contentDecoder = contentDecoder;\r\n        this._webSocketManager.addOnDataReceivedDelegate((data: any) => this._onMessageReceived(data));\r\n        this._lastReceivedMessageTimestamp = Timer.timestamp();\r\n        setTimeout(() => this._watchdogLoop(), this._watchdogDuration * 2);\r\n    }\r\n    public getProtocolVersion(): number[] {\r\n        return this._protocolVersion;\r\n    }\r\n    public addOnNmeaValueReceivedDelegate(signalId: number, delegate: OnNmeaValueReceivedDelegate): void {\r\n        let delegates: OnNmeaValueReceivedDelegate[] = [];\r\n        if (this._nmeaValueReceivedDelegatesMap.has(signalId)) {\r\n            delegates = this._nmeaValueReceivedDelegatesMap.get(signalId);\r\n        } else {\r\n            this._nmeaValueReceivedDelegatesMap.set(signalId, delegates);\r\n        }\r\n        delegates.push(delegate);\r\n    }\r\n    public addOnMfdValueReceivedDelegate(signalId: number, delegate: OnMfdValueReceivedDelegate): void {\r\n        let delegates: OnMfdValueReceivedDelegate[] = [];\r\n        if (this._mdfValueReceivedDelegatesMap.has(signalId)) {\r\n            delegates = this._mdfValueReceivedDelegatesMap.get(signalId);\r\n        } else {\r\n            this._mdfValueReceivedDelegatesMap.set(signalId, delegates);\r\n        }\r\n        delegates.push(delegate);\r\n    }\r\n    public addOnCommandReceivedDelegate(delegate: OnCommandReceivedDelegate): void {\r\n        this._commandReceivedDelegates.push(delegate);\r\n    }\r\n\r\n    public addWatchdogStateChangedDelegate(delegate: OnWatchdogStateChangedDelegate): void {\r\n        this._onWatchdogStateChangesDelegates.push(delegate);\r\n        delegate(this.watchdogState)\r\n    }\r\n\r\n    public removeOnWathdogStateChangedDelegate(delegate: OnWatchdogStateChangedDelegate): void {\r\n        for (let i = 0; i < this._onWatchdogStateChangesDelegates.length; i++) {\r\n            if (this._onWatchdogStateChangesDelegates[i] === delegate) {\r\n                this._onWatchdogStateChangesDelegates.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public send(command: any): void {\r\n        this._webSocketManager.sendJson(command);\r\n    }\r\n\r\n    private _notifyMdfValueSubscribers(data: MfdStatusUpdateDataContent): void {\r\n        // to avoid multiple calls to the same data, only notify if the data has changed\r\n        if (!this._isNewMfdData(data)) {\r\n            return;\r\n        }\r\n        const delegates = this._mdfValueReceivedDelegatesMap.get(data.signalId);\r\n        if (delegates == null) {\r\n            return;\r\n        }\r\n        for (const delegate of delegates) {\r\n            delegate(data);\r\n        }\r\n    }\r\n\r\n    private _notifyNmeaValueSubscribers(data: StatusUpdateDataContent): void {\r\n        // to avoid multiple calls to the same data, only notify if the data has changed\r\n        if (!this._isNewNmeaData(data)) {\r\n            return;\r\n        }\r\n        const delegates = this._nmeaValueReceivedDelegatesMap.get(data.signalId);\r\n        if (delegates == null) {\r\n            return;\r\n        }\r\n        for (const delegate of delegates) {\r\n            delegate(data);\r\n        }\r\n    }\r\n\r\n    private _isNewMfdData(data: MfdStatusUpdateDataContent): boolean {\r\n        if (this._receivedMfdDataMap.has(data.signalId)) {\r\n            const oldData = this._receivedMfdDataMap.get(data.signalId);\r\n            if (oldData.equals(data)) {\r\n                return false;\r\n            }\r\n        }\r\n        this._receivedMfdDataMap.set(data.signalId, data);\r\n        return true;\r\n    }\r\n\r\n    private _isNewNmeaData(data: StatusUpdateDataContent): boolean {\r\n        if (this._receivedNmeaDataMap.has(data.signalId)) {\r\n            const oldData = this._receivedNmeaDataMap.get(data.signalId);\r\n            if (oldData.equals(data)) {\r\n                return false;\r\n            }\r\n        }\r\n        this._receivedNmeaDataMap.set(data.signalId, data);\r\n        return true;\r\n    }\r\n\r\n    private _onMessageReceived(message: WebsocketMessage): void {\r\n        this._lastReceivedMessageTimestamp = Timer.timestamp();\r\n        switch (message.messagetype) {\r\n            case MessageTypeCode.mfdStatus:\r\n                // message.id = message.data[0] | (message.data[1] << 8); // Why is this done\r\n                this._propagateMfdMessage(this._contentDecoder.decodeMFDChannelItem(message))\r\n\r\n                break;\r\n            case MessageTypeCode.nmeaMsg:\r\n                // message.id = message.data[0] | (message.data[1] << 8); // Why is this done\r\n                this._propagateNmeaMessage(this._contentDecoder.decodeN2KDataItem(message))\r\n                break;\r\n            case MessageTypeCode.systemCmd:\r\n\r\n                if (message.messagecmd === SystemCommandTypes.wduInfo) {\r\n                    // WDU Info.\r\n                    /*\t\t\t\tWDU Protocol Version MSB\t0x00-0xFF\r\n                                    WDU Protocol Version LSB\t0x00-0xFF\r\n                                    WDU Application Firmware Version MSB\t0x00-0xFF\r\n                                    WDU  Application Firmware Version MSB\t0x00-0xFF\r\n                                    WDU BaseImage Version MSB\t0x00-0xFF\r\n                                    WDU BaseImage Version LSB\t0x00-0xFF\r\n                                    WDU Model Nr\t0x00000000-0xFFFFFFFF\r\n                                    WDU Serial Nr\t0x00000000-0xFFFFFFFF\r\n                                    NMEA 2000 Source Address\t0-253*/\r\n\r\n                    this._wduSendsHeartbeat = (message.data[0] > 1 || (message.data[0] === 1 && message.data[1] >= 2));\r\n                    this._protocolVersion[0] = message.data[0];\r\n                    this._protocolVersion[1] = message.data[1];\r\n                    this._wduInfoReceived = true;\r\n                    Log.logVerbose(`WDU Info Received. Enable WDU heartbeat set to ${this._wduSendsHeartbeat}`);\r\n                    for (const delegate of this._commandReceivedDelegates) {\r\n                        delegate(Command.wduInfoReceived);\r\n                    }\r\n\r\n                } else if (message.messagecmd === SystemCommandTypes.serviceProviderHeartbeat) { // 0x00 - Service Provider HeartBeat\r\n                    this.configurationChecksumFromWDU = (message.data[1] | (message.data[2] << 8) | (message.data[3] << 16) | (message.data[4] << 24)) >>> 0;\r\n                    this._digitalSwitchingHeartbeatTimestamp = Timer.timestamp();\r\n                    if (this.configurationChecksumFromWDU !== 0) { // When 0, no heartbet from WDU has not beed received from master. => Do not check watchdog yet since it will cause a checksum missmatch\r\n                        this._checkWatchdog();\r\n                    }\r\n                    for (const delegate of this._commandReceivedDelegates) {\r\n                        delegate(Command.checksumReceived);\r\n                    }\r\n                    Log.logVerbose('Service provider heartbeat received');\r\n                } else if (message.messagecmd === SystemCommandTypes.wduHeartbeat) { // 0x05 - WDU Host Heartbeat\r\n                    Log.logDebug('Received wdu heart beat.')\r\n                    this.send(Protocol.receivedWduHeartbetAckCommand());\r\n                } else if (message.messagecmd === SystemCommandTypes.wduSettingsUpdated) {\r\n                    for (const delegate of this._commandReceivedDelegates) {\r\n                        delegate(Command.settingsUpdated);\r\n                    }\r\n                } else if (message.messagecmd === SystemCommandTypes.applicationSelection) {\r\n                    for (const delegate of this._commandReceivedDelegates) {\r\n                        delegate(Command.applicationSelectionListReceived, message.extradata);\r\n                    }\r\n                }\r\n                break;\r\n            case MessageTypeCode.clientControlCommand:\r\n                if (message.messagecmd === ClientControlCommands.forceReload) {\r\n                    for (const delegate of this._commandReceivedDelegates) {\r\n                        delegate(Command.forcePageReload);\r\n                    }\r\n                    // TODO: Move to delegate?\r\n                    setTimeout(() => {\r\n                        window.location.reload();\r\n                    }, 5000);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _propagateMfdMessage(data: MfdStatusUpdateDataContent): void {\r\n        if (data == null) {\r\n            return;\r\n        }\r\n        this._notifyMdfValueSubscribers(data);\r\n        const virtualSignals = this._contentDecoder.getVirtualSignals(data.signalId);\r\n        for (const virtualSignal of virtualSignals) {\r\n            const vData = new MfdStatusUpdateDataContent();\r\n            // ternary if statement to force service unavailability if the source signal is unavailable.\r\n            vData.unavailable = data.unavailable ? true : this._evaluate(data.value, virtualSignal.unAvailableExpression);\r\n            vData.onOffStatus = this._evaluate(data.value, virtualSignal.statusExpression);\r\n            vData.signalId = virtualSignal.signalId;\r\n            vData.type = MfdStatusType.momentary;\r\n            this._notifyMdfValueSubscribers(vData);\r\n        }\r\n    }\r\n\r\n    private _propagateNmeaMessage(data: StatusUpdateDataContent): void {\r\n        if (data == null) {\r\n            return;\r\n        }\r\n        this._notifyNmeaValueSubscribers(data);\r\n        const virtualSignals = this._contentDecoder.getVirtualSignals(data.signalId);\r\n        for (const virtualSignal of virtualSignals) {\r\n            const vData = new MfdStatusUpdateDataContent();\r\n            // ternary if statement to force service unavailability if the source signal is unavailable.\r\n            vData.unavailable = data.unavailable ? true : this._evaluate(data.value, virtualSignal.unAvailableExpression);\r\n            vData.onOffStatus = this._evaluate(data.value, virtualSignal.statusExpression);\r\n            vData.type = MfdStatusType.momentary;\r\n            vData.signalId = virtualSignal.signalId;\r\n            this._notifyMdfValueSubscribers(vData);\r\n        }\r\n    }\r\n\r\n    private _evaluate(signalValue: number, expression: VirtualSignalExpr): boolean {\r\n        switch (expression.expressionType) {\r\n            case ExpressionType.disabled:\r\n                return false;\r\n            case ExpressionType.equal:\r\n                return signalValue === expression.valueA;\r\n            case ExpressionType.notEqual:\r\n                return signalValue !== expression.valueA;\r\n            case ExpressionType.greaterThan:\r\n                return signalValue > expression.valueA;\r\n            case ExpressionType.lessThan:\r\n                return signalValue < expression.valueA;\r\n            case ExpressionType.greaterThanOrEqual:\r\n                return signalValue >= expression.valueA;\r\n            case ExpressionType.lessThanOrEqual:\r\n                return signalValue <= expression.valueA\r\n            case ExpressionType.between:\r\n                return signalValue > expression.valueA && signalValue < expression.valueB;\r\n            case ExpressionType.notBetween:\r\n                return !(signalValue > expression.valueA && signalValue < expression.valueB);\r\n        }\r\n    }\r\n\r\n    private _onWatchdogStateChanged(state: WatchdogStates): void {\r\n        if (this.watchdogState !== state) {\r\n            Log.logInfo(`Watchdog state changed to: ${state}`);\r\n            this.watchdogState = state;\r\n            for (const delegate of this._onWatchdogStateChangesDelegates) {\r\n                delegate(state);\r\n            }\r\n            this._requestWduInfo();\r\n        }\r\n    }\r\n\r\n    private _requestWduInfo(): void {\r\n        Log.logVerbose('Request WDU Info');\r\n        this.send(Protocol.requestWduInfoCommand());\r\n    }\r\n\r\n    private _checkWatchdog(): number {\r\n\r\n        let nextDelay = this._watchdogDuration;\r\n        this._oldHeartbeatDurationDivider++;\r\n        if (Timer.elapsedSeconds(this._lastReceivedMessageTimestamp) > 10) {\r\n            nextDelay = 9000;\r\n            this._onWatchdogStateChanged(WatchdogStates.noConnectionToWdu);\r\n            this._webSocketManager.connect();\r\n            Log.logInfo('No heartbeat from WDU received! Recreate websocket');\r\n        } else if (this.watchdogState === WatchdogStates.noConnectionToWdu) {\r\n            this._onWatchdogStateChanged(WatchdogStates.noConnectionToDigitalSwitching);\r\n        }\r\n\r\n        if (!this._wduSendsHeartbeat && this._oldHeartbeatDurationDivider > 1 && Timer.elapsedSeconds(this._lastReceivedMessageTimestamp) > 4 || !this._wduInfoReceived) { // Old WDU firmware without wdu heartbeat need this handling\r\n            Log.logVerbose('Send heartbeat for older wdu firmwares');\r\n            this._requestWduInfo();\r\n            this._oldHeartbeatDurationDivider = 0;\r\n        }\r\n\r\n        if (this.watchdogState !== WatchdogStates.noConnectionToWdu) {\r\n            if (Timer.elapsedSeconds(this._digitalSwitchingHeartbeatTimestamp) > 12) {\r\n                this._onWatchdogStateChanged(WatchdogStates.noConnectionToDigitalSwitching);\r\n            } else {\r\n                this._onWatchdogStateChanged(WatchdogStates.ok);\r\n            }\r\n        }\r\n        return nextDelay;\r\n\r\n    }\r\n\r\n    private _watchdogLoop(): void {\r\n        const nextDelay = this._checkWatchdog()\r\n        setTimeout(() => this._watchdogLoop(), nextDelay);\r\n\r\n    }\r\n}\r\n\r\n\r\n","import { FileLoadHelper } from './file-load-helper';\r\nimport { ICommunicationHandler, Command } from './communication/communication-handler';\r\n\r\nexport interface ISettingsReader {\r\n    readonly isLoaded: boolean;\r\n    readonly settings: SettingRow[];\r\n    load(): Promise<void>;\r\n    getSetting(key: SettingKey): string;\r\n    addOnSettingsReloadedDelegate(delegate: OnSettingsReloadedDelegate): void;\r\n\r\n}\r\n\r\nexport type OnSettingsReloadedDelegate = () => void;\r\nexport class SettingsReader implements ISettingsReader {\r\n    private _settings: SettingRow[] = [];\r\n    private _communicationHandler: ICommunicationHandler = null;\r\n    private _onSettingsChangedDelegate: OnSettingsReloadedDelegate[] = [];\r\n\r\n    constructor(communicationHandler: ICommunicationHandler) {\r\n        this._communicationHandler = communicationHandler;\r\n        this._communicationHandler.addOnCommandReceivedDelegate((command: Command) => this._onCommandReceived(command));\r\n    }\r\n\r\n    public async load(): Promise<void> {\r\n        const data = await FileLoadHelper.getJsonFile('wduSettings.json');\r\n        this._settings.splice(0, this._settings.length);\r\n        for (const setting of data.Settings) {\r\n            if (setting.isExternalSetting == null) {\r\n                setting.isExternalSetting = false;\r\n            }\r\n            if (setting.isOverridden == null) {\r\n                setting.isOverridden = false;\r\n            }\r\n            this.settings.push(setting as SettingRow);\r\n        }\r\n        for (const delegate of this._onSettingsChangedDelegate) {\r\n            delegate();\r\n        }\r\n    }\r\n\r\n    public get isLoaded(): boolean {\r\n        return this._settings.length > 0;\r\n    }\r\n\r\n    public get settings(): SettingRow[] {\r\n        return this._settings;\r\n    }\r\n    public getSetting(key: SettingKey): string {\r\n        return this._settings.find((s: any) => s.title === key).currentSetting.symbol;\r\n    }\r\n\r\n    public addOnSettingsReloadedDelegate(delegate: OnSettingsReloadedDelegate): void {\r\n        this._onSettingsChangedDelegate.push(delegate);\r\n    }\r\n\r\n    private _onCommandReceived(command: Command): void {\r\n        switch (command) {\r\n            case Command.settingsUpdated:\r\n                void this.load();\r\n                break;\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport class SettingRow {\r\n    public title: string = '';\r\n    public description: string = '';\r\n    public currentSetting: SettingData = null;\r\n    public possibleChoices: SettingChoiceData[] = [];\r\n}\r\n\r\nexport class SettingData {\r\n    public symbol: string = '';\r\n    public description: string = '';\r\n    public isOverridden: boolean = false;\r\n    public isExternalSetting: boolean = true;\r\n\r\n}\r\n\r\nexport class SettingChoiceData {\r\n    public symbol: string = '';\r\n    public description: string = '';\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum SettingKey {\r\n    language = 'Language',\r\n    depth = 'Depth',\r\n    distanceUnit = 'DistanceUnit',\r\n    fuelEconomyUnit = 'FuelEconomyUnit',\r\n    height = 'Height',\r\n    pressure = 'Pressure',\r\n    atmosphericPressure = 'AtmosphericPressure',\r\n    speed = 'Speed',\r\n    temperature = 'Temperature',\r\n    volume = 'Volume',\r\n    volumeRate = 'VolumeRate',\r\n    screensaver = 'ScreenSaver'\r\n\r\n}\r\n","/* eslint-disable no-shadow */\r\n/* eslint-disable @typescript-eslint/naming-convention */\r\n/* Data Type\tValue\r\nSI Base/Derived\tUnits\r\nGeneric\t0\r\nAbsolute Angle (M or T)\t1\tDerived from SI\tradians (rad)\r\nAtmospheric Pressure\t2\tSI Unit\tPaschal (Pa)\r\nBearing (P or S)\t3\tDerived from SI\tradians (rad)\r\nBeaufort\t4\tNot SI\tBeaufort number\r\nCardinal Wind\t5\tDerived from SI\tradians (rad)\r\nCurrent\t6\tBase\tampere (A)\r\nDate\t7\tNumber\tNumber, Days since 1/1/1970\r\nDepth\t8\tSI Unit\tMetre (m)\r\nDimensionless\t9\r\nDistance\t10\tSI Unit\tMetre (m)\r\nFrequency\t11\tDerived from SI\tHertz (Hz)\r\nFuel Economy\t12\t\tQ – Is Flow rate measured in (cu m/s) or (cu m/hr)?\r\nHeight\t13\tSI Unit\tMetre (m)\r\nPercentage\t14\t\t%\r\nPosition\t15\tDerived from SI\tDegrees (deg)\r\nPressure\t16\tSI Unit\tPaschal (Pa)\r\nRange Bearing\t17\t?\tMetre (m) & radians (rad)\r\nRate of Turn\t18\tDerived from SI\tangular acceleration (rad/s)\r\nRPM\t19\tNot SI\tRotation rate, RPM\r\nSigned Angle (+ or -)\t20\tDerived from SI\tradians (rad)\r\nSpeed\t21\tSI Unit\tMetre per sec (m/s)\r\nTemperature\t22\tSI Unit\tkelvin (K)\r\nTime\t23\tSI Unit\tsecond (s)\r\nTime Duration\t24\tSI Unit\tsecond (s)\r\nTransmission Gear\t25\tNot SI\tEnumerated, 0,1,2,3 = neutral, forward, reverse, unknown\r\nUnsigned Angle\t26\tDerived from SI\tradians (rad)\r\nVoltage\t27\tDerived from SI\tvolt (V)\r\nVolume\t28\tSI Unit\tCubic metre cu m)\r\nVolumeRate\t29\tSI Unit\t(cu m/s\r\nWind Speed\t30\tderived\tMetre per sec (m/s)\r\n*/\r\nexport enum ValueType {\r\n    // 0  In WDU.\r\n    DATAITEM_GENERIC_DEC3 = 0,\r\n    // 1  In WDU Not selectable in config As of 20180419.\r\n    DATAITEM_ABS_ANGLE_M_OR_T_DEC3 = 1,\r\n    // 2  In WDU\r\n    DATAITEM_ATMOSPHERIC_PRESSURE_DEC3 = 2,\r\n    // 3  In WDU Not selectable in config As of 20180419.\r\n    DATAITEM_BEARING_P_OR_S = 3,\r\n    // 4  In WDU Not selectable in config As of 20180419.\r\n    DATAITEM_BEAUFORT = 4,\r\n    // 5  In WDU Not selectable in config As of 20180419.\r\n    DATAITEM_CARDINAL_WIND = 5,\r\n    // 6  In WDU.\r\n    DATAITEM_AMPERE_DEC3 = 6,\r\n    // 7  In WDU.\r\n    DATAITEM_DATE = 7,\r\n    // 8  In WDU Not selectable in config As of 20180419.\r\n    DATAITEM_DEPTH = 8,\r\n    // 9  In WDU.\r\n    DATAITEM_DIMENSIONLESS_DEC3 = 9,\r\n    // 10 In WDU.\r\n    DATAITEM_DISTANCE_DEC3 = 10,\r\n    // 11 In WDU.\r\n    DATAITEM_FREQUENCY_DEC3 = 11,\r\n    // 12 In WDU.\r\n    DATAITEM_FUELECONOMY_DEC3 = 12,\r\n    // 13 In WDU. Not selectable in config As of 20180419\r\n    DATAITEM_HEIGHT_DEC3 = 13,\r\n    // 14 In WDU.\r\n    DATAITEM_PERCENT_DEC3 = 14,\r\n    // 15 In WDU. Not selectable in config As of 20180419\r\n    DATAITEM_POSITION_DEC3 = 15,\r\n    // 16 In WDU.\r\n    DATAITEM_PRESSURE_DEC3 = 16,\r\n    // 17 In WDU. Not selectable in config As of 20180419. STRANGE SPEC? Test with RYM Screen.\r\n    DATAITEM_RANGEBEARING_DEC3 = 17,\r\n    // 18 In WDU.\r\n    DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3 = 18,\r\n    // 19 In WDU.\r\n    DATAITEM_RPM_DEC3 = 19,\r\n    // 20 In WDU.\r\n    DATAITEM_SIGNEDANGLE_RAD_DEC3 = 20,\r\n    // 21 In WDU.\r\n    DATAITEM_SPEED_MET_PER_SEC_DEC3 = 21,\r\n    // 22 In WDU.\r\n    DATAITEM_TEMPERATURE_KELVIN_DEC3 = 22,\r\n    // 23 In WDU.\r\n    DATAITEM_TIME_SEC_DEC3 = 23,\r\n    // 24 In WDU.\r\n    DATAITEM_TIME_DURATION = 24,\r\n    // 25 In WDU. Not selectable in config As of 20180419. This is enumeration. Neutral, Fwd, Rev, unknown\r\n    DATAITEM_TRANSMISSION_GEAR_DEC3 = 25,\r\n    // 26 In WDU.\r\n    DATAITEM_UNSIGNEDANGLE_RAD_DEC3 = 26,\r\n    // 27 In WDU.\r\n    DATAITEM_VOLT_DEC3 = 27,\r\n    // 28 In WDU.\r\n    DATAITEM_CUMETRES_DEC3 = 28,\r\n    // 29 In WDU.\r\n    DATAITEM_VOLUMERATE_CUMS_DEC3 = 29,\r\n    // 30 In WDU. Not selectable in config As of 20180419.\r\n    DATAITEM_WINDSPEED_M_PER_S_DEC3 = 30,\r\n\r\n\r\n    // /////Appendix B.3 Data Format is used. Data Format is defined DFXX(X) where uint16 value is XX(X) +100 ///////////\r\n\r\n\r\n    // / @range: 0 to 2Pi rad\r\n    // / @Resolution: 1x10E-4 rad\r\n    // / @Type: uint16\r\n    // / @Description: Resolution ~0.0057deg, 1 deg = .01745 rad\r\n    DF02_ANGLE = 102,\r\n\r\n    // DF03AnglePrecise = 103,\r\n    // / @range: +/-Pi rad\r\n    // / @Resolution: 1x10E-4 rad\r\n    // / @Type: int16\r\n    // / @Description: Resolution ~0.0057deg\r\n    DF04_ANGLE_SIGNED = 104,\r\n\r\n    // / @range: +/- 3,276.4 A\r\n    // / @Resolution: 1x10E-1 A\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF07_CURRENT_ELECTRIC_HIGH = 107,\r\n\r\n    // / @range: 0 to ~4.295x10E+7 m\r\n    // / @Resolution: 1x10E-2 m\r\n    // / @Type: uint32\r\n    // / @Description:\r\n    DF09_DISTANCE = 109,\r\n\r\n    // / @range: 0 to ~4.295x10E+7 m\r\n    // / @Resolution: +/-3.2764 cu-m/hr\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF18_FLOW_RATE_LOW = 118,\r\n\r\n    // / @range:0 to 65,532,000 Pa\r\n    // / @Resolution: 1x10E+3 Pa\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF29_PRESSURE = 129,\r\n\r\n    // / @range:0 to 655.32 m/s\r\n    // / @Resolution: 1 Knot = 0.5144 m/s\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF35_SPEED_OVER_GROUND = 135,\r\n\r\n    // / @range: +/- 327.64 V\r\n    // / @Resolution: 1x10E-2 V\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF42_VOLTAGE_HIGH = 142,\r\n\r\n    // / @range: 0 - 235,915,200 Coulombs\r\n    // / @Resolution: 3600 C\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF100_BATTERY_CAPACITY = 200,\r\n\r\n    // / @range: 0 - 65.532\r\n    // / @Resolution: 1x10E-3 V\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF102_AC_VRMS = 202,\r\n\r\n    // / @range: 0 to 16,777.212 deg K\r\n    // / @Resolution: 0.001 deg K\r\n    // / @Type: uint24\r\n    // / @Description:\r\n    DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION = 205,\r\n\r\n    // / @range: 0 - 6553.2 V\r\n    // / @Resolution: 0.1V\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF106_VOLTAGE = 206,\r\n\r\n    // / @range: 0 - 2,520 meters\r\n    // / @Resolution: 10 meters\r\n    // / @Type: uint8\r\n    // / @Description:\r\n    DF109_DISTANCE_ROUGH = 209,\r\n\r\n    // / @range: 0 - 100%\r\n    // / @Resolution: 5x10E-1\r\n    // / @Type: uint8\r\n    // / @Description: 0 = 0%, 100 = 50%, 200 = 100%\r\n    DF120_PERCENT_RESTRICTED_RANGE = 220,\r\n\r\n    // / @range: 0-6553.2 kWh\r\n    // / @Resolution: 0.1\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF123_BATTERY_CAPACITY_EXTENDED_RANGE = 223,\r\n\r\n    // / @range: 0 -6553.2\r\n    // / @Resolution: 1x10E-1 Nm\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF129_TORQUE = 229,\r\n\r\n    // / @range: 0-655kW\r\n    // / @Resolution: 10W\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF131_POWER_HIGH_RANGE = 231,\r\n\r\n    // / @range: +/-838.8604 m/s*s\r\n    // / @Resolution: 1x10-4 m/s*s\r\n    // / @Type: int24\r\n    // / @Description:\r\n    DF30_PERCENT_RELATICE_MEASURE = 130,\r\n\r\n    // / @range: +/- 327.64 dB\r\n    // / @Resolution: 1x10E-2 dB\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF38_TEMPERATURE_HIGH = 138,\r\n    // / @range: 0 to 655.32 deg K\r\n    // / @Resolution: 1x10E-2 deg K\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF39_TEMPERATURE_LOW = 139,\r\n\r\n    // / @range: +/- ~2.148x10E+6 s\r\n    // / @Resolution: 1x10E-3 s\r\n    // / @Type: int32\r\n    // / @Description:\r\n    DF44_VOLUME = 144,\r\n\r\n    // / @range: +/- 32.764 m\r\n    // / @Resolution: 1x10E-3 m\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF46_DISTANCE_SIGNED_MEDIUM = 146,\r\n\r\n    // / @range: 0 to 6,553,200 Pa\r\n    // / @Resolution: 1x10E+2 Pa\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF47_PRESSURE_MEDIUM = 147,\r\n\r\n    // / @range:  Variable\r\n    // / @Resolution: 1\r\n    // / @Type: bit(n)\r\n    // / @Description: Used to construct bit fields\r\n    DF52_BIT_FIELD = 152,\r\n    // / @range: 0 to 252\r\n    // / @Resolution: 1 bit\r\n    // / @Type: uint8\r\n    // / @Description: Unit-less number\r\n    DF53_INTEGER_8_BIT = 153,\r\n\r\n    // / @range: 0 to 65,532\r\n    // / @Resolution: 1 bit\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF54_INTEGER_16_BIT_UNSIGNED = 154,\r\n    // / @range: 0 to 4,294,967,292\r\n    // / @Resolution: 1 bit\r\n    // / @Type: uint32\r\n    // / @Description: Unit-less number\r\n    DF55_INTEGER_32_BIT = 155,\r\n    // / @range: 0 to (2E+64)-4\r\n    // / @Resolution: 1 bit\r\n    // / @Type: uint64\r\n    // / @Description: Unit-less number\r\n    DF56_INTEGER_64_BIT = 156,\r\n    // / @range: -128 to +124\r\n    // / @Resolution: 1 bit\r\n    // / @Type: int8\r\n    // / @Description: Unit-less number\r\n    DF57_INTEGER_8_BIT_2S_COMPLEMENT = 157,\r\n    // / @range: -32,768 to +32,764\r\n    // / @Resolution: 1 bit\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF58_INTEGER_16_BITS_2S_COMPLEMENT = 158,\r\n    // / @range: -2,147,483,648 to +2,147,483,644\r\n    // / @Resolution: 1 bit\r\n    // / @Type: int32\r\n    // / @Description: Unit-less number\r\n    DF59_INTEGER_32_BIT_2S_COMPLEMENT = 159,\r\n    // / @range: -(2E+63) to +(2E+63)-4\r\n    // / @Resolution: 1 bit\r\n    // / @Type: int64\r\n    // / @Description:\r\n    DF60_INTEGER_64_BIT_2S_COMPLEMENT = 160,\r\n\r\n    // / @range: 0 to ~4.295x10E+6 s\r\n    // / @Resolution: 1x10E-3 s\r\n    // / @Type: uint32\r\n    // / @Description:\r\n    DF65_TIME_INTERVAL_STANDARD = 165,\r\n\r\n    // / @range: 0 to ~4.295x10E+9 s\r\n    // / @Resolution: 1 sec\r\n    // / @Type: uint32\r\n    // / @Description:\r\n    DF67_TIME_INTERVAL_LARGE = 167,\r\n\r\n    // / @range: +/-32,764 minutes\r\n    // / @Resolution: 1.0 minute\r\n    // / @Type: int16\r\n    // / @Description:\r\n    DF71_TIME_INTERVAL_MEDIUM = 171,\r\n    // / @range: 0-16,383 RPM\r\n    // / @Resolution: 1/4 RPM\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF72_ROTATIONAL_RATE_UNSIGNED = 172,\r\n\r\n    // / @range: 0 - 252%\r\n    // / @Resolution: 1%\r\n    // / @Type: uint8\r\n    // / @Description:\r\n    DF93_PERCENT_ABSOLUTE = 193,\r\n\r\n    // / @range: 0 - 6553.2 A\r\n    // / @Resolution: 1x10E-1 A\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF95_CURRENT_ELECTRIC_HIGH = 195,\r\n\r\n    // / @range: 0 - 65,532 minutes\r\n    // / @Resolution: 1 minute\r\n    // / @Type: uint16\r\n    // / @Description:\r\n    DF98_TIME_INTERVAL_MEDIUM = 198\r\n\r\n\r\n}\r\n\r\nexport enum ValueSubType {\r\n    DEFAULT,\r\n    ABS_ANGLE_M_OR_T_DEC0,\r\n    AMPERE_DEC0,\r\n    CUMETRES_DEC0,\r\n    CURRENT_DEC0,\r\n    GALLONS,\r\n    IMPERIAL_GALLON,\r\n    DEPTH_METER,\r\n    DEPTH_FEET,\r\n    DIMENSIONLESS_DEC0,\r\n    DISTANCE_METERS,\r\n    DISTANCE_MILES,\r\n    DISTANCE_KILOMETERS,\r\n    DISTANCE_NAUTICAL_FEET,\r\n    DISTANCE_NAUTICAL_METERS,\r\n    FREQUENCY_DEC0,\r\n    FUELECONOMY_KILOMETERS_PER_LITRE,\r\n    FUELECONOMY_MILES_PER_GALLON_US,\r\n    FUELECONOMY_MILES_PER_GALLON_UK,\r\n    FUELECONOMY_NAUTICAL_PER_LITRE,\r\n    FUELECONOMY_NAUTICAL_PER_GALLON_US,\r\n    FUELECONOMY_NAUTICAL_PER_GALLON_UK,\r\n    FUELECONOMY_METERS_PER_CUBICMETER,\r\n    FUELECONOMY_LITRES_PER_KILOMETER,\r\n    FUELECONOMY_LITRES_PER_NAUTICAL,\r\n    FUELECONOMY_LITRES_PER_MILE,\r\n    GENERIC_DEC0,\r\n    HEIGHT_METER,\r\n    HEIGHT_FEET,\r\n    PRESSURE_KPA,\r\n    PRESSURE_PSI,\r\n    PRESSURE_BAR,\r\n    PERCENT_DEC0,\r\n    POSITION_DEC0,\r\n    RANGEBEARING_DEC0,\r\n    RATEOFTURN_RAD_P_SEC_DEC0,\r\n    RPM_DEC0,\r\n    SIGNEDANGLE_RAD_DEC0,\r\n    SPEED_MET_PER_SEC_DEC0,\r\n    SPEED_KNOTS,\r\n    SPEED_MILES_PER_HOUR,\r\n    SPEED_KM_PER_HOUR,\r\n    TEMPERATURE_CELCIUS,\r\n    TEMPERATURE_FAHRENHEIT,\r\n    TEMPERATURE_KELVIN,\r\n    TIME_SEC_SECOND,\r\n    TIME_DURATION_STRING,\r\n    TRANSMISSION_GEAR_DEC0,\r\n    UNSIGNEDANGLE_RAD_DEC0,\r\n    VOLUMERATE_CUMS_DEC0,\r\n    VOLUMERATE_GALS,\r\n    VOLUMERATE_IMPGALS,\r\n    VOLT_DEC0,\r\n    VOLT_DEC2,\r\n    VOLT_DEC3,\r\n    WINDSPEED_M_PER_S_DEC0,\r\n    PERCENT_DEC1,\r\n    WATT_DEC0,\r\n    DEGREE_DEC4,\r\n    NewtonMetersDec1,\r\n    WATT_DEC1,\r\n    DAYS_1970\r\n}\r\n","import { Log } from './log';\r\n\r\n/* eslint-disable no-console */\r\nexport class FileLoadHelper {\r\n\r\n    public static xhrRequest(xhr: XMLHttpRequest, method: string, url: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            xhr.open(method, url, true);\r\n            xhr.onload = () => {\r\n                if (xhr.status >= 200 && xhr.status < 400) {\r\n                    resolve(xhr.response);\r\n                } else {\r\n                    Log.logError(`Error response from xhrRequest, url: ${url}`, xhr.statusText);\r\n                    reject({\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.onerror = (ev: ProgressEvent<EventTarget>) => {\r\n                Log.logError(xhr, ev);\r\n                reject({\r\n                    status: xhr.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            };\r\n            xhr.send();\r\n        });\r\n    }\r\n\r\n    public static getJsonFile(fileName: string): Promise<any> {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.overrideMimeType('application/json');\r\n        xhr.responseType = 'json';\r\n        const promise = (resolve: (value: any) => void, reject: (reason?: any) => void) => {\r\n            xhr.open('GET', fileName, true);\r\n            xhr.onload = () => {\r\n                if (xhr.status >= 200 && xhr.status < 400) {\r\n                    resolve(xhr.response);\r\n                } else {\r\n                    Log.logError(`Error loading file ${fileName}`, xhr.statusText);\r\n                    reject({\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.onerror = (ev: ProgressEvent<EventTarget>) => {\r\n                Log.logError(xhr, ev);\r\n                reject({\r\n                    status: xhr.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            };\r\n            xhr.send();\r\n        };\r\n        return FileLoadHelper.retryPromise(promise, 10);\r\n    }\r\n\r\n    public static async retryPromise<T>(fn: (resolve: (value: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void, retries: number, interval = 100): Promise<T> {\r\n        try {\r\n            // try to resolve the promise\r\n            const data = await new Promise(fn);\r\n            // if resolved simply return the result back to the caller\r\n            return data;\r\n        } catch (e) {\r\n            // if the promise fails and we are down to 1 try we reject\r\n            if (retries > 0) {\r\n                await new Promise(r => setTimeout(r, interval));\r\n                return FileLoadHelper.retryPromise(fn, retries - 1, interval);\r\n            }\r\n            Log.logError(`Failed to execute promise, retries left ${retries}`);\r\n            return Promise.reject(e);\r\n        }\r\n    }\r\n}\r\n","export class Timer {\r\n\r\n    private static _ticks: number = 0;\r\n    private static _isStarted: boolean = false;\r\n\r\n    public static start(): void {\r\n        if (this._isStarted) {\r\n            return;\r\n        }\r\n        this._isStarted = true;\r\n        window.setInterval(() => Timer._incrementTicks(), 1000);\r\n\r\n    }\r\n    public static timestamp(): number {\r\n        return Timer._ticks;\r\n    }\r\n\r\n    public static elapsedSeconds(ticks: number): number {\r\n        return Timer._ticks - ticks;\r\n    }\r\n\r\n    private static _incrementTicks(): void {\r\n        Timer._ticks++;\r\n    }\r\n}\r\n","import { ApplicationSettings, ApplicationType } from './application-settings';\r\nimport { SettingsReader, SettingKey } from '../../infrastructure/settings-reader';\r\nimport { FileLoadHelper } from '../../infrastructure/file-load-helper';\r\n\r\nexport class LanguageHandler {\r\n    private _languageResources: LanguageResource[];\r\n    private _activeLanguage: string = 'default';\r\n    private _applicationSettings: ApplicationSettings = null;\r\n    private _settingsReader: SettingsReader;\r\n    constructor(wduSettingHandler: SettingsReader, applicationSettings: ApplicationSettings) {\r\n        this._settingsReader = wduSettingHandler;\r\n        this._applicationSettings = applicationSettings;\r\n    }\r\n    public async initialize(): Promise<void> {\r\n        await this._parseLanguageData();\r\n        this._settingsReader.addOnSettingsReloadedDelegate(() => this._propagateSettings());\r\n        if (this._settingsReader.isLoaded) {\r\n            this._propagateSettings();\r\n        }\r\n\r\n    }\r\n    private _setActiveLanguage(language: string): void {\r\n        this._activeLanguage = language;\r\n        if (!this._languageResources) {\r\n            return;\r\n        }\r\n        for (const resource of this._languageResources) {\r\n            const element = document.getElementById(resource.elementId);\r\n            if (element.tagName.toLocaleLowerCase() === 'img') {\r\n                const imgEl = element as HTMLImageElement;\r\n                imgEl.src = this._getValue(this._activeLanguage, resource.resources);\r\n            } else {\r\n                element.innerText = this._getValue(this._activeLanguage, resource.resources);\r\n            }\r\n        }\r\n    }\r\n\r\n    private async _parseLanguageData(): Promise<void> {\r\n        try {\r\n            const fileName = this._getResourceFileName();\r\n            this._languageResources = await FileLoadHelper.getJsonFile(fileName);\r\n        } catch {\r\n            //\r\n        }\r\n    }\r\n    private _getResourceFileName(): string {\r\n        if (this._applicationSettings.type === ApplicationType.normal) {\r\n            return this._applicationSettings.index === 0 ? 'index-localization.json' : `index-localization${this._applicationSettings.index}.json`;\r\n        } else {\r\n            return this._applicationSettings.index === 0 ? 'overlaybar-localization.json' : `overlaybar-localization${this._applicationSettings.index}.json`;\r\n        }\r\n    }\r\n    private _getValue(languageKey: string, resources: LanguageData[]): string {\r\n        let data = resources.find((l) => l.languageKey === languageKey);\r\n        if (data == null) {\r\n            data = resources.find((l) => l.languageKey === 'default');\r\n        }\r\n        return data.value;\r\n    }\r\n\r\n    // private _load(): void {\r\n    //     const request = new XMLHttpRequest();\r\n    //     request.overrideMimeType('application/json');\r\n    //     request.responseType = 'json';\r\n    //     const fileName = this._getResourceFileName();\r\n    //     request.open('GET', fileName, true);\r\n\r\n    //     request.onload = () => {\r\n    //         if (request.status >= 200 && request.status < 400) {\r\n    //             // Success!\r\n    //             const data = request.response;\r\n    //             this._languageResources = data;\r\n    //         } else {\r\n    //             // TODO: error\r\n    //         }\r\n    //     };\r\n\r\n    //     request.onerror = () => {\r\n    //         // TODO: error\r\n    //     };\r\n\r\n    //     request.send();\r\n    // }\r\n\r\n    private _propagateSettings(): void {\r\n        this._setActiveLanguage(this._settingsReader.getSetting(SettingKey.language));\r\n    }\r\n}\r\n\r\nclass LanguageResource {\r\n    public elementId: string = null;\r\n    public resources: LanguageData[] = [];\r\n}\r\n\r\nclass LanguageData {\r\n    public languageKey: string;\r\n    public value: string;\r\n}\r\n","import { ValueType, ValueSubType } from './value-types';\r\n\r\nexport class ValueTypeDefinition {\r\n\r\n    public valueType: ValueType;\r\n    public unitLabel: string;\r\n    public defaultValueSubType?: ValueSubType = null;\r\n    public valueSubTypes: ValueSubTypeDefinition[] = [];\r\n}\r\n\r\nexport class ValueSubTypeDefinition {\r\n    public valueSubType: ValueSubType;\r\n    public unitLabel: string;\r\n    public wduSettingsId: string;\r\n    public conversion: (value: any) => number | string;\r\n}\r\n\r\nexport const valueTypeDefinitions: ValueTypeDefinition[] = [\r\n    {\r\n        valueType: ValueType.DATAITEM_GENERIC_DEC3,\r\n        unitLabel: '0.001',\r\n        defaultValueSubType: ValueSubType.GENERIC_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.GENERIC_DEC0,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_ABS_ANGLE_M_OR_T_DEC3,\r\n        unitLabel: '0.001 °',\r\n        defaultValueSubType: ValueSubType.ABS_ANGLE_M_OR_T_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.ABS_ANGLE_M_OR_T_DEC0,\r\n                unitLabel: '°',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_BEARING_P_OR_S,\r\n        unitLabel: '',\r\n        valueSubTypes: []\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_BEAUFORT,\r\n        unitLabel: '',\r\n        valueSubTypes: []\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_CARDINAL_WIND,\r\n        unitLabel: '',\r\n        valueSubTypes: []\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_AMPERE_DEC3,\r\n        unitLabel: '0.001 A',\r\n        defaultValueSubType: ValueSubType.AMPERE_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.AMPERE_DEC0,\r\n                unitLabel: 'A',\r\n                wduSettingsId: 'A',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_DATE,\r\n        unitLabel: 'days',\r\n        defaultValueSubType: ValueSubType.DAYS_1970,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DAYS_1970,\r\n                unitLabel: 'days',\r\n                wduSettingsId: 'days',\r\n                conversion: (value) => value\r\n            }]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_DEPTH,\r\n        unitLabel: '0.001 m',\r\n        defaultValueSubType: ValueSubType.DEPTH_METER,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_METER,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_FEET,\r\n                unitLabel: 'ft',\r\n                wduSettingsId: 'ft',\r\n                conversion: (value) => (value / 1000) * 3.2808\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_DIMENSIONLESS_DEC3,\r\n        unitLabel: '0.001',\r\n        defaultValueSubType: ValueSubType.DIMENSIONLESS_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DIMENSIONLESS_DEC0,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_DISTANCE_DEC3,\r\n        unitLabel: '0.001 m',\r\n        defaultValueSubType: ValueSubType.DISTANCE_KILOMETERS,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_METERS,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_MILES,\r\n                unitLabel: 'mi',\r\n                wduSettingsId: 'mi',\r\n                conversion: (value) => value / 1000 * 0.00062137\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_KILOMETERS,\r\n                unitLabel: 'km',\r\n                wduSettingsId: 'km',\r\n                conversion: (value) => value / 1000000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_NAUTICAL_FEET,\r\n                unitLabel: 'nm, ft',\r\n                wduSettingsId: 'nm, ft',\r\n                conversion: (value) => {\r\n                    const res = (value / 1000) * 0.000539956803;\r\n                    if (res < 1) { // If < 1 show in feet\r\n                        return value / 1000 * 3.2808399;\r\n                    }\r\n                    return res;\r\n                }\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_NAUTICAL_METERS,\r\n                unitLabel: 'nm, m',\r\n                wduSettingsId: 'nm, m',\r\n                conversion: (value) => { // If < 1 show in meters\r\n                    const res = (value / 1000) * 0.000539956803;\r\n                    if (res < 1) {\r\n                        return value / 1000;\r\n                    }\r\n                    return res;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_FREQUENCY_DEC3,\r\n        unitLabel: '0.001 Hz',\r\n        defaultValueSubType: ValueSubType.FREQUENCY_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.FREQUENCY_DEC0,\r\n                unitLabel: 'Hz',\r\n                wduSettingsId: 'Hz',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_FUELECONOMY_DEC3,\r\n        unitLabel: '0.001 km/L',\r\n        defaultValueSubType: ValueSubType.FUELECONOMY_KILOMETERS_PER_LITRE,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_MILES_PER_GALLON_US,\r\n                unitLabel: 'mpg-US',\r\n                wduSettingsId: 'mpg-US',\r\n                conversion: (value) => value / 1000 * 2.35214583\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_MILES_PER_GALLON_UK,\r\n                unitLabel: 'mpg-UK',\r\n                wduSettingsId: 'mpg-UK',\r\n                conversion: (value) => value / 1000 * 2.824810878\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_NAUTICAL_PER_GALLON_US,\r\n                unitLabel: 'nm/gal-US',\r\n                wduSettingsId: 'nm/gal-US',\r\n                conversion: (value) => value / 1000 * (0.539956803 / 0.264172052)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_NAUTICAL_PER_GALLON_UK,\r\n                unitLabel: 'nm/gal-UK',\r\n                wduSettingsId: 'nm/gal-UK',\r\n                conversion: (value) => value / 1000 * (0.539956803 / 0.21996923465436)\r\n            },\r\n\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_NAUTICAL_PER_GALLON_US,\r\n                unitLabel: 'km/gal-US',\r\n                wduSettingsId: 'km/gal-US',\r\n                conversion: (value) => value / (1000 * 0.264172052)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_NAUTICAL_PER_GALLON_UK,\r\n                unitLabel: 'km/gal-UK',\r\n                wduSettingsId: 'km/gal-UK',\r\n                conversion: (value) => value / (1000 * 0.21996923465436)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_METERS_PER_CUBICMETER,\r\n                unitLabel: 'm/m3',\r\n                wduSettingsId: 'm/m3',\r\n                conversion: (value) => value\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_METERS_PER_CUBICMETER,\r\n                unitLabel: 'm/m3',\r\n                wduSettingsId: 'm/m3',\r\n                conversion: (value) => value\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_KILOMETERS_PER_LITRE,\r\n                unitLabel: 'km/L',\r\n                wduSettingsId: 'km/L',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_KILOMETERS_PER_LITRE,\r\n                unitLabel: 'mi/L',\r\n                wduSettingsId: 'mi/L',\r\n                conversion: (value) => value / 1000 * 0.621371192\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_NAUTICAL_PER_LITRE,\r\n                unitLabel: 'nm/L',\r\n                wduSettingsId: 'nm/L',\r\n                conversion: (value) => value / 1000 * 0.539956803\r\n            },\r\n\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_LITRES_PER_KILOMETER,\r\n                unitLabel: 'L/km',\r\n                wduSettingsId: 'L/lm',\r\n                conversion: (value) => 1000 / value\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_LITRES_PER_NAUTICAL,\r\n                unitLabel: 'L/nm',\r\n                wduSettingsId: 'L/nm',\r\n                conversion: (value) => 1000 / (value * 0.539956803)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.FUELECONOMY_LITRES_PER_MILE,\r\n                unitLabel: 'L/mi',\r\n                wduSettingsId: 'L/mi',\r\n                conversion: (value) => 1000 / (value * 0.621371192)\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_HEIGHT_DEC3,\r\n        unitLabel: '0.001 m',\r\n        defaultValueSubType: ValueSubType.HEIGHT_METER,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.HEIGHT_METER,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.HEIGHT_FEET,\r\n                unitLabel: 'ft',\r\n                wduSettingsId: 'ft',\r\n                conversion: (value) => (value / 1000) * 3.2808\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_PERCENT_DEC3,\r\n        unitLabel: '0.001 %',\r\n        defaultValueSubType: ValueSubType.PERCENT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PERCENT_DEC0,\r\n                unitLabel: '%',\r\n                wduSettingsId: '%',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_POSITION_DEC3,\r\n        unitLabel: '0.001',\r\n        defaultValueSubType: ValueSubType.POSITION_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.POSITION_DEC0,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_PRESSURE_DEC3,\r\n        unitLabel: '0.001 Pa',\r\n        defaultValueSubType: ValueSubType.PRESSURE_KPA,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_KPA,\r\n                unitLabel: 'kPa',\r\n                wduSettingsId: 'kPa',\r\n                conversion: (value) => value / 1000000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_PSI,\r\n                unitLabel: 'psi',\r\n                wduSettingsId: 'psi',\r\n                conversion: (value) => (value / 1000) / 6894.75729\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_BAR,\r\n                unitLabel: 'bar',\r\n                wduSettingsId: 'bar',\r\n                conversion: (value) => value / 100000000\r\n            }\r\n\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_ATMOSPHERIC_PRESSURE_DEC3,\r\n        unitLabel: '0.001 Pa',\r\n        defaultValueSubType: ValueSubType.PRESSURE_KPA,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_KPA,\r\n                unitLabel: 'kPa',\r\n                wduSettingsId: 'kPa',\r\n                conversion: (value) => value / 1000000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_PSI,\r\n                unitLabel: 'psi',\r\n                wduSettingsId: 'psi',\r\n                conversion: (value) => value * 0.000145037738\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_BAR,\r\n                unitLabel: 'bar',\r\n                wduSettingsId: 'bar',\r\n                conversion: (value) => value / 100000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_RANGEBEARING_DEC3,\r\n        unitLabel: '0.001',\r\n        defaultValueSubType: ValueSubType.RANGEBEARING_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.RANGEBEARING_DEC0,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3,\r\n        unitLabel: '0.001 °/s',\r\n        defaultValueSubType: ValueSubType.RATEOFTURN_RAD_P_SEC_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.RATEOFTURN_RAD_P_SEC_DEC0,\r\n                unitLabel: '°/s',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_RPM_DEC3,\r\n        unitLabel: '0.001 rpm',\r\n        defaultValueSubType: ValueSubType.RPM_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.RPM_DEC0,\r\n                unitLabel: 'rpm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_SIGNEDANGLE_RAD_DEC3,\r\n        unitLabel: '0.001 °',\r\n        defaultValueSubType: ValueSubType.SIGNEDANGLE_RAD_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.SIGNEDANGLE_RAD_DEC0,\r\n                unitLabel: '°',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_SPEED_MET_PER_SEC_DEC3,\r\n        unitLabel: '0.001 m/s',\r\n        defaultValueSubType: ValueSubType.SPEED_MET_PER_SEC_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.SPEED_MET_PER_SEC_DEC0,\r\n                unitLabel: 'm/s',\r\n                wduSettingsId: 'm/s',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_KM_PER_HOUR,\r\n                unitLabel: 'km/h',\r\n                wduSettingsId: 'km/h',\r\n                conversion: (value) => value / 1000 * 3.6\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_KNOTS,\r\n                unitLabel: 'kts',\r\n                wduSettingsId: 'kts',\r\n                conversion: (value) => value / 1000 * 1.94384449\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_MILES_PER_HOUR,\r\n                unitLabel: 'mph',\r\n                wduSettingsId: 'mph',\r\n                conversion: (value) => value / 1000 * 2.23693629\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_TEMPERATURE_KELVIN_DEC3,\r\n        unitLabel: '0.001 K',\r\n        defaultValueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n                unitLabel: 'K',\r\n                wduSettingsId: 'K',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_CELCIUS,\r\n                unitLabel: 'C',\r\n                wduSettingsId: 'C',\r\n                conversion: (value) => value / 1000 - 273.15\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_FAHRENHEIT,\r\n                unitLabel: 'F',\r\n                wduSettingsId: 'F',\r\n                conversion: (value) => value / 1000 * 1.8 - 459.67\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_TIME_SEC_DEC3,\r\n        unitLabel: '0.001 s',\r\n        defaultValueSubType: ValueSubType.TIME_SEC_SECOND,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_SEC_SECOND,\r\n                unitLabel: 's',\r\n                wduSettingsId: 's',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_TIME_DURATION,\r\n        unitLabel: 's',\r\n        defaultValueSubType: ValueSubType.TIME_DURATION_STRING,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_DURATION_STRING,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n                    // 24 h setting\r\n                    const dayInSeconds = 86400;\r\n                    const hourInSeconds = 3600;\r\n                    const minuteInSeconds = 60;\r\n\r\n                    const days = Math.floor(value / dayInSeconds);\r\n                    const hours = Math.floor((value % dayInSeconds) / hourInSeconds);\r\n                    const minutes = Math.floor((value % hourInSeconds) / minuteInSeconds);\r\n                    const seconds = Math.floor(value % minuteInSeconds);\r\n\r\n                    let str = '';\r\n                    str += (days > 0) ? days + 'd' : '';\r\n                    str += (days > 0 || hours > 0) ? hours + 'h' : '';\r\n                    str += (days > 0 || hours > 0 || minutes > 0) ? minutes + 'm' : '';\r\n                    str += seconds + 's';\r\n                    return str;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_TRANSMISSION_GEAR_DEC3,\r\n        unitLabel: '0.001',\r\n        defaultValueSubType: ValueSubType.TRANSMISSION_GEAR_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TRANSMISSION_GEAR_DEC0,\r\n                unitLabel: '',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_UNSIGNEDANGLE_RAD_DEC3,\r\n        unitLabel: '0.001 °',\r\n        defaultValueSubType: ValueSubType.UNSIGNEDANGLE_RAD_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.UNSIGNEDANGLE_RAD_DEC0,\r\n                unitLabel: '°',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_VOLT_DEC3,\r\n        unitLabel: '0.001 V',\r\n        defaultValueSubType: ValueSubType.VOLT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.VOLT_DEC0,\r\n                unitLabel: 'V',\r\n                wduSettingsId: 'V',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_CUMETRES_DEC3,\r\n        unitLabel: '0.001 cu m',\r\n        defaultValueSubType: ValueSubType.CUMETRES_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.CUMETRES_DEC0,\r\n                unitLabel: 'cu m',\r\n                wduSettingsId: 'cu m',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.GALLONS,\r\n                unitLabel: 'gal',\r\n                wduSettingsId: 'gal',\r\n                conversion: (value) => value * 0.264172052\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.IMPERIAL_GALLON,\r\n                unitLabel: 'imp gal',\r\n                wduSettingsId: 'imp gal',\r\n                conversion: (value) => value * 0.21996924829909\r\n            }\r\n        ]\r\n\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_VOLUMERATE_CUMS_DEC3,\r\n        unitLabel: '0.001 cu-m/s',\r\n        defaultValueSubType: ValueSubType.VOLUMERATE_CUMS_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.VOLUMERATE_CUMS_DEC0,\r\n                unitLabel: 'cu-m/s',\r\n                wduSettingsId: 'cu-m/s',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.VOLUMERATE_GALS,\r\n                unitLabel: 'gal/s',\r\n                wduSettingsId: 'gal/s',\r\n                conversion: (value) => value * 0.264172052\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.VOLUMERATE_IMPGALS,\r\n                unitLabel: 'imp-gal/s',\r\n                wduSettingsId: 'imp-gal/s',\r\n                conversion: (value) => value * 0.21996924829909\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DATAITEM_WINDSPEED_M_PER_S_DEC3,\r\n        unitLabel: '0.001 m/s',\r\n        defaultValueSubType: ValueSubType.WINDSPEED_M_PER_S_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.WINDSPEED_M_PER_S_DEC0,\r\n                unitLabel: 'm/s',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF02_ANGLE, // 10E-4\r\n        unitLabel: '0.0001 rad',\r\n        defaultValueSubType: ValueSubType.DEGREE_DEC4,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DEGREE_DEC4,\r\n                unitLabel: '°',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n                    const piRadDec4 = value / 10000;\r\n                    const degree = piRadDec4 * (180 / Math.PI);\r\n\r\n                    return degree;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF04_ANGLE_SIGNED,\r\n        unitLabel: '0.0001 rad',\r\n        defaultValueSubType: ValueSubType.DEGREE_DEC4,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DEGREE_DEC4,\r\n                unitLabel: '°',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n                    const piRadDec4 = value / 10000;\r\n                    const degree = piRadDec4 * (180 / Math.PI);\r\n\r\n                    return degree;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF07_CURRENT_ELECTRIC_HIGH,\r\n        unitLabel: '0.1 A',\r\n        defaultValueSubType: ValueSubType.CURRENT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.CURRENT_DEC0,\r\n                unitLabel: 'A',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF09_DISTANCE,\r\n        unitLabel: '0.01 m',\r\n        defaultValueSubType: ValueSubType.DISTANCE_METERS,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_METERS,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value / 100\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_MILES,\r\n                unitLabel: 'mi',\r\n                wduSettingsId: 'mi',\r\n                conversion: (value) => value / 100 * 0.00062137\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_KILOMETERS,\r\n                unitLabel: 'km',\r\n                wduSettingsId: 'km',\r\n                conversion: (value) => value / 100000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_NAUTICAL_FEET,\r\n                unitLabel: 'nm, ft',\r\n                wduSettingsId: 'nm, ft',\r\n                conversion: (value) => {\r\n                    const res = (value / 100) * 0.000539956803;\r\n                    if (res < 1) { // If < 1 show in feet\r\n                        return value / 100 * 3.2808399;\r\n                    }\r\n                    return res;\r\n                }\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DISTANCE_NAUTICAL_METERS,\r\n                unitLabel: 'nm, m',\r\n                wduSettingsId: 'nm, m',\r\n                conversion: (value) => { // If < 1 show in meters\r\n                    const res = (value / 100) * 0.000539956803;\r\n                    if (res < 1) {\r\n                        return value / 100;\r\n                    }\r\n                    return res;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION,\r\n        unitLabel: '0.001 K',\r\n        defaultValueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n                unitLabel: 'K',\r\n                wduSettingsId: 'K',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_CELCIUS,\r\n                unitLabel: 'C',\r\n                wduSettingsId: 'C',\r\n                conversion: (value) => value / 1000 - 273.15\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_FAHRENHEIT,\r\n                unitLabel: 'F',\r\n                wduSettingsId: 'F',\r\n                conversion: (value) => value / 1000 * 1.8 - 459.67\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF106_VOLTAGE,\r\n        unitLabel: '0.1 V',\r\n        defaultValueSubType: ValueSubType.VOLT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.VOLT_DEC0,\r\n                unitLabel: 'V',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF109_DISTANCE_ROUGH, // Resolution 10m\r\n        unitLabel: '10 m',\r\n        defaultValueSubType: ValueSubType.DEPTH_METER,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_METER,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value * 10\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_FEET,\r\n                unitLabel: 'ft',\r\n                wduSettingsId: 'ft',\r\n                conversion: (value) => (value * 10) * 3.2808\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF120_PERCENT_RESTRICTED_RANGE,\r\n        unitLabel: '0.5 %', // / @Description: 0 = 0%, 100 = 50%, 200 = 100%\r\n        defaultValueSubType: ValueSubType.PERCENT_DEC1,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PERCENT_DEC1,\r\n                unitLabel: '%',\r\n                wduSettingsId: '',\r\n                conversion: (value) => (value / 2)\r\n            },\r\n\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF123_BATTERY_CAPACITY_EXTENDED_RANGE,\r\n        unitLabel: '0.1 kWh',\r\n        defaultValueSubType: ValueSubType.WATT_DEC1,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.WATT_DEC1,\r\n                unitLabel: 'kWh',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF129_TORQUE,\r\n        unitLabel: '0.1 Nm',\r\n        defaultValueSubType: ValueSubType.NewtonMetersDec1,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.NewtonMetersDec1,\r\n                unitLabel: 'Nm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF131_POWER_HIGH_RANGE,\r\n        unitLabel: 'W', //\r\n        defaultValueSubType: ValueSubType.WATT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.WATT_DEC0,\r\n                unitLabel: 'W',\r\n                wduSettingsId: 'W',\r\n                conversion: (value) => value * 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF30_PERCENT_RELATICE_MEASURE,\r\n        unitLabel: '%',\r\n        defaultValueSubType: ValueSubType.PERCENT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PERCENT_DEC0,\r\n                unitLabel: '%',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF38_TEMPERATURE_HIGH,\r\n        unitLabel: '0.1 deg K', // 0.1\r\n        defaultValueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n                unitLabel: 'K',\r\n                wduSettingsId: 'K',\r\n                conversion: (value) => value / 10\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_CELCIUS,\r\n                unitLabel: 'C',\r\n                wduSettingsId: 'C',\r\n                conversion: (value) => value / 10 - 273.15\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_FAHRENHEIT,\r\n                unitLabel: 'F',\r\n                wduSettingsId: 'F',\r\n                conversion: (value) => (value / 10) * 1.8 - 459.67\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF39_TEMPERATURE_LOW,\r\n        unitLabel: '0.01 deg K',\r\n        defaultValueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_KELVIN,\r\n                unitLabel: 'K',\r\n                wduSettingsId: 'K',\r\n                conversion: (value) => value / 100\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_CELCIUS,\r\n                unitLabel: 'C',\r\n                wduSettingsId: 'C',\r\n                conversion: (value) => value / 100 - 273.15\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.TEMPERATURE_FAHRENHEIT,\r\n                unitLabel: 'F',\r\n                wduSettingsId: 'F',\r\n                conversion: (value) => (value / 100) * 1.8 - 459.67\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF42_VOLTAGE_HIGH,\r\n        unitLabel: '0.01 V',\r\n        defaultValueSubType: ValueSubType.VOLT_DEC2,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.VOLT_DEC2,\r\n                unitLabel: 'V',\r\n                wduSettingsId: 'V',\r\n                conversion: (value) => value / 100\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF44_VOLUME,\r\n        unitLabel: '0.001 cu m',\r\n        defaultValueSubType: ValueSubType.CUMETRES_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.CUMETRES_DEC0,\r\n                unitLabel: 'cu m',\r\n                wduSettingsId: 'cu m',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.GALLONS,\r\n                unitLabel: 'gal',\r\n                wduSettingsId: 'gal',\r\n                conversion: (value) => value * 0.264172052\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.IMPERIAL_GALLON,\r\n                unitLabel: 'imp gal',\r\n                wduSettingsId: 'imp gal',\r\n                conversion: (value) => value * 0.21996924829909\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF47_PRESSURE_MEDIUM,\r\n        unitLabel: '100 Pa',\r\n        defaultValueSubType: ValueSubType.PRESSURE_KPA,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_KPA,\r\n                unitLabel: 'kPa',\r\n                wduSettingsId: 'kPa',\r\n                conversion: (value) => ((value * 100) / 1000),\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_PSI,\r\n                unitLabel: 'psi',\r\n                wduSettingsId: 'psi',\r\n                conversion: (value) => ((value * 100) * 0.000145037738)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_BAR,\r\n                unitLabel: 'bar',\r\n                wduSettingsId: 'bar',\r\n                conversion: (value) => (value * 100) / 100000\r\n            }\r\n\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF65_TIME_INTERVAL_STANDARD,\r\n        unitLabel: '0.001 s',\r\n        defaultValueSubType: ValueSubType.TIME_DURATION_STRING,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_DURATION_STRING,\r\n                unitLabel: 'hh:mm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n\r\n                    const hourInSeconds = 3600;\r\n                    const minuteInSeconds = 60;\r\n                    const valueSeconds = value / 1000;\r\n                    const hours = Math.floor(valueSeconds / hourInSeconds);\r\n                    const minutes = Math.floor((valueSeconds % hourInSeconds) / minuteInSeconds);\r\n\r\n                    let str = '';\r\n                    str += hours.toString().padStart(2, '0');\r\n                    str += ':';\r\n                    str += minutes.toString().padStart(2, '0');\r\n\r\n                    return str;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF67_TIME_INTERVAL_LARGE,\r\n        unitLabel: '1 sec',\r\n        defaultValueSubType: ValueSubType.TIME_DURATION_STRING,\r\n        // baseSubValueType\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_DURATION_STRING,\r\n                unitLabel: 'hh:mm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n\r\n                    const hourInSeconds = 3600;\r\n                    const minuteInSeconds = 60;\r\n                    const valueSeconds = value;\r\n\r\n                    const hours = Math.floor(valueSeconds / hourInSeconds);\r\n                    const minutes = Math.floor((valueSeconds % hourInSeconds) / minuteInSeconds);\r\n\r\n                    let str = '';\r\n                    str += hours.toString().padStart(2, '0');\r\n                    str += ':';\r\n                    str += minutes.toString().padStart(2, '0');\r\n\r\n                    return str;\r\n                }\r\n            }\r\n        ]\r\n\r\n    },\r\n    {\r\n        valueType: ValueType.DF71_TIME_INTERVAL_MEDIUM,\r\n        defaultValueSubType: ValueSubType.TIME_DURATION_STRING,\r\n        unitLabel: '1.0 minute',\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_DURATION_STRING,\r\n                unitLabel: 'hh:mm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n                    const negative = value < 0 ? true : false;\r\n\r\n                    const hourInSeconds = 3600;\r\n                    const minuteInSeconds = 60;\r\n                    const valueSeconds = Math.abs(value * 60);\r\n\r\n                    const hours = Math.floor(valueSeconds / hourInSeconds);\r\n                    const minutes = Math.floor((valueSeconds % hourInSeconds) / minuteInSeconds);\r\n\r\n                    let str = ''\r\n                    str += negative ? '-' : '';\r\n                    str += Math.abs(hours).toString().padStart(2, '0');\r\n                    str += ':';\r\n                    str += Math.abs(minutes).toString().padStart(2, '0');\r\n\r\n                    return str;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF72_ROTATIONAL_RATE_UNSIGNED, // 1/4 RPM\r\n        unitLabel: '0.25 rpm',\r\n        defaultValueSubType: ValueSubType.RPM_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.RPM_DEC0,\r\n                unitLabel: 'rpm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => Math.floor(value / 4)\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF93_PERCENT_ABSOLUTE,\r\n        unitLabel: '%',\r\n        defaultValueSubType: ValueSubType.PERCENT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PERCENT_DEC0,\r\n                unitLabel: '%',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF95_CURRENT_ELECTRIC_HIGH,\r\n        unitLabel: '0.1 A',\r\n        defaultValueSubType: ValueSubType.AMPERE_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.AMPERE_DEC0,\r\n                unitLabel: 'A',\r\n                wduSettingsId: '',\r\n                conversion: (value) => value / 10\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF98_TIME_INTERVAL_MEDIUM,\r\n        unitLabel: '1 minute',\r\n        defaultValueSubType: ValueSubType.TIME_DURATION_STRING,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.TIME_DURATION_STRING,\r\n                unitLabel: 'hh:mm',\r\n                wduSettingsId: '',\r\n                conversion: (value) => {\r\n\r\n                    const hourInSeconds = 3600;\r\n                    const minuteInSeconds = 60;\r\n                    const valueSeconds = value * 60;\r\n\r\n                    const hours = Math.floor(valueSeconds / hourInSeconds);\r\n                    const minutes = Math.floor((valueSeconds % hourInSeconds) / minuteInSeconds);\r\n\r\n                    let str = ''\r\n                    str += Math.abs(hours).toString().padStart(2, '0');\r\n                    str += ':';\r\n                    str += Math.abs(minutes).toString().padStart(2, '0');\r\n\r\n                    return str;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF18_FLOW_RATE_LOW,\r\n        unitLabel: '0.0001 cu-m/hr',\r\n        defaultValueSubType: ValueSubType.CUMETRES_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.CUMETRES_DEC0,\r\n                unitLabel: 'cu m/s',\r\n                wduSettingsId: 'cu m/s',\r\n                conversion: (value) => (value / 10000) / 3600 // Convert to to \\frac{1}3600 (seconds)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.GALLONS,\r\n                unitLabel: 'gal/s',\r\n                wduSettingsId: 'gal/s',\r\n                conversion: (value) => ((value / 10000) * 264.172052) / 3600   // Convert cu m/h to gal/h to gal/s\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.IMPERIAL_GALLON,\r\n                unitLabel: 'imp gal/s',\r\n                wduSettingsId: 'imp-gal/s',\r\n                conversion: (value) => ((value / 10000) * 219.969) / 3600 // convert cu m/h to imp-gal/h to impl-gal/s\r\n            }\r\n        ]\r\n\r\n    },\r\n    {\r\n        valueType: ValueType.DF35_SPEED_OVER_GROUND,\r\n        unitLabel: '0.01 m/s',\r\n        defaultValueSubType: ValueSubType.SPEED_MET_PER_SEC_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.SPEED_MET_PER_SEC_DEC0,\r\n                unitLabel: 'm/s',\r\n                wduSettingsId: 'm/s',\r\n                conversion: (value) => value / 100\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_KM_PER_HOUR,\r\n                unitLabel: 'km/h',\r\n                wduSettingsId: 'km/h',\r\n                conversion: (value) => (value / 100) * 3.6\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_KNOTS,\r\n                unitLabel: 'kts',\r\n                wduSettingsId: 'kts',\r\n                conversion: (value) => (value / 100) * 1.94384\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.SPEED_MILES_PER_HOUR,\r\n                unitLabel: 'mph',\r\n                wduSettingsId: 'mph',\r\n                conversion: (value) => (value / 100) * 2.23693629\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF46_DISTANCE_SIGNED_MEDIUM,\r\n        unitLabel: '0.001 m',\r\n        defaultValueSubType: ValueSubType.DEPTH_FEET,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_METER,\r\n                unitLabel: 'm',\r\n                wduSettingsId: 'm',\r\n                conversion: (value) => value / 1000\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.DEPTH_FEET,\r\n                unitLabel: 'ft',\r\n                wduSettingsId: 'ft',\r\n                conversion: (value) => (value / 1000) * 3.2808\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF102_AC_VRMS,\r\n        unitLabel: '0.001 V',\r\n        defaultValueSubType: ValueSubType.VOLT_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.VOLT_DEC0,\r\n                unitLabel: 'V',\r\n                wduSettingsId: 'V',\r\n                conversion: (value) => value / 1000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF100_BATTERY_CAPACITY,\r\n        unitLabel: 'Ah',\r\n        defaultValueSubType: ValueSubType.AMPERE_DEC0,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.AMPERE_DEC0,\r\n                unitLabel: 'Ah',\r\n                wduSettingsId: 'Ah',\r\n                conversion: (value) => value\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        valueType: ValueType.DF29_PRESSURE,\r\n        unitLabel: '1000 Pa',\r\n        defaultValueSubType: ValueSubType.PRESSURE_KPA,\r\n        valueSubTypes: [\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_KPA,\r\n                unitLabel: 'kPa',\r\n                wduSettingsId: 'kPa',\r\n                conversion: (value) => value,\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_PSI,\r\n                unitLabel: 'psi',\r\n                wduSettingsId: 'psi',\r\n                conversion: (value) => ((value * 1000) * 0.000145037738)\r\n            },\r\n            {\r\n                valueSubType: ValueSubType.PRESSURE_BAR,\r\n                unitLabel: 'bar',\r\n                wduSettingsId: 'bar',\r\n                conversion: (value) => (value * 1000) / 100000\r\n            }\r\n        ]\r\n    }\r\n\r\n];\r\n","import { valueTypeDefinitions, ValueSubTypeDefinition } from './value-type-definition';\r\nimport { SettingKey, ISettingsReader } from '../settings-reader';\r\nimport { ValueType, ValueSubType } from './value-types';\r\n\r\nexport interface IValueConverter {\r\n    getUnit(valueType: ValueType): string;\r\n    getConvertedValue(rawValue: any, valueType: ValueType): number | string;\r\n}\r\nexport class ValueConverter implements IValueConverter {\r\n\r\n    private _selectedConversions: Map<ValueType, ValueSubTypeDefinition> = new Map([]);\r\n    private _settingsReader: ISettingsReader;\r\n    constructor(settingsReader: ISettingsReader) {\r\n        this._settingsReader = settingsReader;\r\n        this._settingsReader.addOnSettingsReloadedDelegate(() => this._propagateSettings());\r\n        if (this._settingsReader.isLoaded) {\r\n            this._propagateSettings();\r\n        }\r\n    }\r\n\r\n    public getUnit(valueType: ValueType): string {\r\n        if (valueType == null) {\r\n            return '';\r\n        }\r\n\r\n        let subDefinition = this._selectedConversions.get(valueType);\r\n        if (subDefinition == null) {\r\n            this._setDefaultConversion(valueType);\r\n            subDefinition = this._selectedConversions.get(valueType);\r\n        }\r\n        return subDefinition.unitLabel;\r\n    }\r\n\r\n    public getConvertedValue(rawValue: any, valueType: ValueType): number | string {\r\n        if (valueType == null) {\r\n            return rawValue;\r\n        }\r\n        let subDefinition = this._selectedConversions.get(valueType);\r\n        if (subDefinition == null) {\r\n            this._setDefaultConversion(valueType);\r\n            subDefinition = this._selectedConversions.get(valueType);\r\n        }\r\n\r\n        return subDefinition.conversion(rawValue);\r\n    }\r\n\r\n    private _setDefaultConversion(valueTypeId: ValueType): void {\r\n        const valueType = valueTypeDefinitions.find((x) => x.valueType === valueTypeId);\r\n        let valueSubType = ValueSubType.DEFAULT;\r\n        let subTypeDefinition: ValueSubTypeDefinition = null;\r\n        if (valueType != null && valueType.defaultValueSubType != null) {\r\n            valueSubType = valueType.defaultValueSubType;\r\n            subTypeDefinition = valueType.valueSubTypes.find((x) => x.valueSubType === valueSubType);\r\n        }\r\n        if (subTypeDefinition == null) {\r\n            subTypeDefinition = this._createNoConversionSubTypeDefinition(valueSubType);\r\n        }\r\n        this._selectedConversions.set(valueTypeId, subTypeDefinition);\r\n    }\r\n\r\n    private _createNoConversionSubTypeDefinition(subValueType: ValueSubType): ValueSubTypeDefinition {\r\n        const subTypeDefinition = new ValueSubTypeDefinition();\r\n        subTypeDefinition.unitLabel = '';\r\n        subTypeDefinition.conversion = (value) => value;\r\n        subTypeDefinition.valueSubType = subValueType;\r\n        return subTypeDefinition;\r\n    }\r\n\r\n    private _propagateSettings(): void {\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_DEPTH, this._settingsReader.getSetting(SettingKey.depth));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_DISTANCE_DEC3, this._settingsReader.getSetting(SettingKey.distanceUnit));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_FUELECONOMY_DEC3, this._settingsReader.getSetting(SettingKey.fuelEconomyUnit));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_HEIGHT_DEC3, this._settingsReader.getSetting(SettingKey.height));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_PRESSURE_DEC3, this._settingsReader.getSetting(SettingKey.pressure));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_ATMOSPHERIC_PRESSURE_DEC3, this._settingsReader.getSetting(SettingKey.atmosphericPressure));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_SPEED_MET_PER_SEC_DEC3, this._settingsReader.getSetting(SettingKey.speed));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_TEMPERATURE_KELVIN_DEC3, this._settingsReader.getSetting(SettingKey.temperature));\r\n        this._setConversionFromSettingsData(ValueType.DF38_TEMPERATURE_HIGH, this._settingsReader.getSetting(SettingKey.temperature));\r\n        this._setConversionFromSettingsData(ValueType.DF39_TEMPERATURE_LOW, this._settingsReader.getSetting(SettingKey.temperature));\r\n        this._setConversionFromSettingsData(ValueType.DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION, this._settingsReader.getSetting(SettingKey.temperature));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_CUMETRES_DEC3, this._settingsReader.getSetting(SettingKey.volume));\r\n        this._setConversionFromSettingsData(ValueType.DF18_FLOW_RATE_LOW, this._settingsReader.getSetting(SettingKey.volumeRate));\r\n        this._setConversionFromSettingsData(ValueType.DATAITEM_VOLUMERATE_CUMS_DEC3, this._settingsReader.getSetting(SettingKey.volumeRate));\r\n        this._setConversionFromSettingsData(ValueType.DF44_VOLUME, this._settingsReader.getSetting(SettingKey.volume));\r\n        this._setConversionFromSettingsData(ValueType.DF47_PRESSURE_MEDIUM, this._settingsReader.getSetting(SettingKey.pressure));\r\n        this._setConversionFromSettingsData(ValueType.DF09_DISTANCE, this._settingsReader.getSetting(SettingKey.distanceUnit));\r\n        this._setConversionFromSettingsData(ValueType.DF109_DISTANCE_ROUGH, this._settingsReader.getSetting(SettingKey.depth));\r\n        this._setConversionFromSettingsData(ValueType.DF35_SPEED_OVER_GROUND, this._settingsReader.getSetting(SettingKey.speed));\r\n        this._setConversionFromSettingsData(ValueType.DF46_DISTANCE_SIGNED_MEDIUM, this._settingsReader.getSetting(SettingKey.depth));\r\n        this._setConversionFromSettingsData(ValueType.DF29_PRESSURE,this._settingsReader.getSetting(SettingKey.pressure));\r\n    }\r\n\r\n    private _setConversionFromSettingsData(valueTypeId: ValueType, settingId: string): void {\r\n        const valueType = valueTypeDefinitions.find((x) => x.valueType === valueTypeId);\r\n        if (valueType != null) {\r\n            const subType = valueType.valueSubTypes.find((x) => x.wduSettingsId === settingId);\r\n            if (subType != null) {\r\n                this._selectedConversions.set(valueTypeId, subType);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","import { Log } from '../log';\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum SocketState {\r\n    notSet = 0,\r\n    closed = 1,\r\n    connecting = 2,\r\n    open = 3,\r\n    socketError = 4\r\n}\r\n\r\nexport type OnSocketStateChangedDelegate = (state: SocketState) => void;\r\nexport class WebSocketManager {\r\n\r\n    // TODO: queue messages\r\n    public currentState: SocketState = SocketState.notSet;\r\n    public autoReconnectOnError: boolean = false\r\n    private _webSocket: WebSocket = null;\r\n    private _onMessageDelegates: ((data: any) => void)[] = [];\r\n    private _onSocketStateChangesDelegates: OnSocketStateChangedDelegate[] = [];\r\n\r\n    public connect(): void {\r\n        this._createNewWebSocket();\r\n    }\r\n\r\n    public addOnDataReceivedDelegate(delegate: (data: any) => void): void {\r\n        this._onMessageDelegates.push(delegate);\r\n    }\r\n\r\n    public removeOnDataReceivedDelegate(delegate: (data: any) => void): void {\r\n        for (let i = 0; i < this._onMessageDelegates.length; i++) {\r\n            if (this._onMessageDelegates[i] === delegate) {\r\n                this._onMessageDelegates.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public addOnSocketStateChangedDelegate(delegate: OnSocketStateChangedDelegate): void {\r\n        this._onSocketStateChangesDelegates.push(delegate);\r\n        delegate(this.currentState)\r\n    }\r\n\r\n    public removeOnSocketStateChangedDelegate(delegate: OnSocketStateChangedDelegate): void {\r\n        for (let i = 0; i < this._onSocketStateChangesDelegates.length; i++) {\r\n            if (this._onSocketStateChangesDelegates[i] === delegate) {\r\n                this._onSocketStateChangesDelegates.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    public sendJson(data: any): void {\r\n        this.send(JSON.stringify(data));\r\n    }\r\n    public send(data: string): void {\r\n        if (this._webSocket == null || this._webSocket.readyState !== this._webSocket.OPEN) {\r\n            Log.logWarning('Websocket is not open, failed to send command!');\r\n        } else {\r\n            Log.logDebug('Sending ws data: ', data);\r\n            this._webSocket.send(data);\r\n        }\r\n    }\r\n    private _createNewWebSocket(): void {\r\n        if (this._webSocket != null) {\r\n            try {\r\n                if (this._webSocket.readyState === this._webSocket.OPEN || this._webSocket.readyState === this._webSocket.CONNECTING) {\r\n                    this._webSocket.close();\r\n                }\r\n                this._onSocketClosed();\r\n            } catch {\r\n                // nop\r\n            }\r\n        }\r\n        // this._webSocket = new WebSocket('ws://localhost/ws');\r\n        // this._webSocket = new WebSocket('ws://172.16.71.235/ws');\r\n        this._webSocket = new WebSocket('ws://' + window.location.host + '/ws');\r\n        // this._webSocket = new WebSocket('ws://192.168.1.100/ws');\r\n        this._webSocket.onopen = (event: Event) => this._onOpen(event);\r\n        this._webSocket.onmessage = (event: MessageEvent) => this._onMessageReceived(event);\r\n        this._webSocket.onerror = (event: Event) => this._onSocketError(event);\r\n        this._webSocket.onclose = (_event: CloseEvent) => this._onSocketClosed();\r\n\r\n        this._onSocketStateChanged(SocketState.connecting);\r\n    }\r\n\r\n    private _onMessageReceived(event: MessageEvent): void {\r\n        const data = JSON.parse(event.data);\r\n        if (data == null) {\r\n            Log.logDebug('Received ws data with value null');\r\n            return;\r\n        }\r\n        Log.logDebug(`Received ws data. cmd: ${data.messagecmd}, type: ${data.messagetype}, size: ${data.size}`);\r\n        for (const delegate of this._onMessageDelegates) {\r\n            delegate(data);\r\n        }\r\n    }\r\n\r\n    private _onSocketError(_event: Event): void {\r\n        Log.logError('Websocket return onError, socket state: ' + this._webSocket.readyState);\r\n        this._onSocketStateChanged(SocketState.socketError);\r\n        if (this.autoReconnectOnError) {\r\n            Log.logWarning('Websocket error: Recreate websocket');\r\n            this._createNewWebSocket();\r\n        }\r\n\r\n    }\r\n    private _onSocketClosed(): void {\r\n        this._onSocketStateChanged(SocketState.closed);\r\n    }\r\n    private _onOpen(_event: Event): void {\r\n        this._onSocketStateChanged(SocketState.open);\r\n    }\r\n\r\n    private _onSocketStateChanged(state: SocketState): void {\r\n        this.currentState = state;\r\n        this._notifySocketStateSubscribers(state);\r\n    }\r\n\r\n    private _notifySocketStateSubscribers(state: SocketState): void {\r\n        for (const delegate of this._onSocketStateChangesDelegates) {\r\n            delegate(state);\r\n        }\r\n    }\r\n}\r\n","// eslint-disable-next-line no-shadow\r\nexport enum Visibility {\r\n    hidden = 0,\r\n    visible = 1\r\n\r\n}\r\n","/* eslint-disable no-shadow */\r\nexport enum LayerActionEnum {\r\n    doNothing = 0,\r\n    show = 1,\r\n    hide = 2,\r\n    toggle = 3\r\n}\r\n","import { IValueConverter } from '../../../infrastructure/value-converter/value-converter';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { NumberHelpers } from '../helpers';\r\nimport { ValueType } from '../../../infrastructure/value-converter/value-types';\r\nimport { Component } from './component';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\nimport { IMagnitudeConverter } from '../../../infrastructure/magnitude-converter';\r\n\r\nexport class SignalValue extends Component {\r\n    private _value: number = 0;\r\n    private _on: boolean = false;\r\n    private _valueType: ValueType;\r\n    private _formatMode: SignalValueFormatMode;\r\n    private _formatSetting: number;\r\n    private _decimalPlaces: number;\r\n    private _showUnit: boolean;\r\n    private _thresholdLowValue: number;\r\n    private _thresholdHighValue: number;\r\n    private _notAvailableValue: string;\r\n    private _offValue: string;\r\n    private _signalType: MfdStatusType = MfdStatusType.statusUpdate;\r\n    private _valueConverter: IValueConverter = null;\r\n    private _valueElement: HTMLElement = null;\r\n    private _unitElement: HTMLElement = null;\r\n    private formatter: Intl.NumberFormat;\r\n    private _magnitudeConversion: number;\r\n    private _magnitudeConverter: IMagnitudeConverter = null;\r\n\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler, valueConverter: IValueConverter, magnitudeConverter: IMagnitudeConverter) {\r\n        super(element, communicationHandler);\r\n        this._valueConverter = valueConverter;\r\n        this._magnitudeConverter = magnitudeConverter;\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.statusUpdate, MfdStatusType.dimmer];\r\n    }\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n\r\n        if (data.type === MfdStatusType.statusUpdate) {\r\n            this._valueType = data.valueTypeIdentifier;\r\n            this._value = data.value;\r\n        } else {\r\n            this._valueType = ValueType.DATAITEM_GENERIC_DEC3;\r\n            this._on = data.onOffStatus;\r\n            this._value = data.dimmerValue * 100;\r\n        }\r\n        this.refresh();\r\n    }\r\n\r\n    public onNmeaDataReceived(data: StatusUpdateDataContent): void {\r\n        this._value = data.value;\r\n        this._valueType = data.valueTypeIdentifier;\r\n        this.isUnavailable = data.unavailable;\r\n        this.refresh();\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        if (this.isUnavailable) {\r\n            this.drawIsUnavailable();\r\n            return;\r\n        }\r\n\r\n        const convertedValue = this._valueConverter.getConvertedValue(this._value, this._valueType);\r\n        let numberConvertedValue = convertedValue as number\r\n        if (this._signalType === MfdStatusType.dimmer && !this._on && this._offValue !== 'value') {\r\n            this._drawOffValue();\r\n        } else if (this._decimalPlaces != null && !isNaN(numberConvertedValue)) {\r\n            numberConvertedValue = this._magnitudeConverter.getConvertedValue(numberConvertedValue, this._magnitudeConversion);\r\n            const roundedValue = this.formatter.format(numberConvertedValue);\r\n            this._valueElement.textContent = roundedValue;\r\n        } else {\r\n            this._valueElement.textContent = convertedValue.toString();\r\n        }\r\n\r\n        if (this._showUnit) {\r\n            const unitText = this._valueConverter.getUnit(this._valueType);\r\n            this._unitElement.textContent = ' ' + unitText;\r\n        }\r\n\r\n        if (this._signalType === MfdStatusType.dimmer && !this._on) {\r\n            this.element.classList.add('status-off');\r\n            this.element.classList.remove('threshold-low');\r\n            this.element.classList.remove('threshold-high');\r\n\r\n        } else if (this._thresholdLowValue != null && this._thresholdLowValue >= this._value) {\r\n            this.element.classList.add('threshold-low');\r\n            this.element.classList.remove('threshold-high');\r\n        } else if (this._thresholdHighValue != null && this._thresholdHighValue <= this._value) {\r\n            this.element.classList.remove('threshold-low');\r\n            this.element.classList.add('threshold-high');\r\n        } else {\r\n            this.element.classList.remove('threshold-low');\r\n            this.element.classList.remove('threshold-high');\r\n            this.element.classList.remove('status-off');\r\n        }\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._formatMode = this.element.dataset.formatMode as SignalValueFormatMode;\r\n        this._formatSetting = parseInt(this.element.dataset.formatSetting, 10);\r\n        this._decimalPlaces = parseInt(this.element.dataset.decimalPlaces, 10);\r\n        this._showUnit = NumberHelpers.parseBooleanArgument(this.element.dataset.showUnit);\r\n        this._thresholdLowValue = parseInt(this.element.dataset.thresholdLowValue, 10);\r\n        this._thresholdHighValue = parseInt(this.element.dataset.thresholdHighValue, 10);\r\n        this._notAvailableValue = this.element.dataset.notAvailableValue;\r\n        this._offValue = this.element.dataset.offValue;\r\n        this._signalType = parseInt(this.element.dataset.signalType, 10);\r\n        this._magnitudeConversion = parseFloat(this.element.dataset.magnitudeConversion.replace(',', '.'));\r\n        this._valueElement = this.element.querySelector('.value');\r\n        this._unitElement = this.element.querySelector('.unit');\r\n        this.formatter = this._createTextFormatter();\r\n    }\r\n\r\n    private drawIsUnavailable(): void {\r\n        // Set to default color\r\n        this.element.classList.remove('threshold-low');\r\n        this.element.classList.remove('threshold-high');\r\n\r\n        if (this._notAvailableValue === 'zero') {\r\n            this._valueElement.textContent = this.formatter.format(0);\r\n            if (this._showUnit) {\r\n                const unitText = this._valueConverter.getUnit(this._valueType);\r\n                this._unitElement.textContent = ' ' + unitText;\r\n            }\r\n            else {\r\n                this._unitElement.textContent = '';\r\n            }\r\n        }\r\n        else if (this._notAvailableValue === 'dash') {\r\n            this._valueElement.textContent = '-';\r\n            this._unitElement.textContent = '';\r\n        }\r\n        else if (this._notAvailableValue === 'empty') {\r\n            this._valueElement.textContent = '';\r\n            this._unitElement.textContent = '';\r\n        }\r\n        else if (this._notAvailableValue === 'natext') {\r\n            this._valueElement.textContent = 'N/A';\r\n            this._unitElement.textContent = '';\r\n        }\r\n        else {\r\n            this._valueElement.textContent = '';\r\n            this._unitElement.textContent = '';\r\n        }\r\n    }\r\n\r\n    private _drawOffValue(): void {\r\n        this._unitElement.textContent = '';\r\n        if (this._offValue === 'zero') {\r\n            this._valueElement.textContent = this.formatter.format(0);\r\n        }\r\n        else if (this._offValue === 'dash') {\r\n            this._valueElement.textContent = '-';\r\n            this._unitElement.textContent = '';\r\n        }\r\n        else if (this._offValue === 'empty') {\r\n            this._valueElement.textContent = '';\r\n        }\r\n        else if (this._offValue === 'natext') {\r\n            this._valueElement.textContent = 'N/A';\r\n        }\r\n        else {\r\n            this._valueElement.textContent = '';\r\n        }\r\n    }\r\n\r\n    private _createTextFormatter(): Intl.NumberFormat {\r\n        let formatter: Intl.NumberFormat;\r\n        if (this._formatMode === SignalValueFormatMode.decimals) {\r\n            formatter = Intl.NumberFormat(undefined, { minimumFractionDigits: this._decimalPlaces, maximumFractionDigits: this._decimalPlaces, useGrouping: false });\r\n        } else if (this._formatMode === SignalValueFormatMode.fixed) {\r\n            const total = Math.max(this._formatSetting - this._decimalPlaces, 1);\r\n            formatter = Intl.NumberFormat(undefined, { minimumIntegerDigits: total, minimumFractionDigits: this._decimalPlaces, maximumFractionDigits: this._decimalPlaces, useGrouping: false });\r\n        } else {\r\n            formatter = Intl.NumberFormat(undefined, { useGrouping: false });\r\n        }\r\n        return formatter;\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum SignalValueFormatMode {\r\n    decimals = 'decimals',\r\n    fixed = 'fixed'\r\n}\r\n","import { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { ValueType } from '../../../infrastructure/value-converter/value-types';\r\nimport { Component } from './component';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\n\r\n// eslint-disable-next-line no-shadow\r\nenum GaugeSlicedOverlayAnimationState {\r\n    animating = 0,\r\n    animationDisabledDueToInvisibility = 1,\r\n    animationDisabledEnableNextFrame = 2\r\n}\r\n\r\nexport class GaugeSlicedOverlay extends Component {\r\n    private _minValue: number;\r\n    private _maxValue: number;\r\n    private _startPosition: number;\r\n    private _endPosition: number;\r\n    private _counterClockwise: boolean;\r\n    private _value: number = 0;\r\n    private _position: number = 0;\r\n    private _currentAnimationPosition: number = 0;\r\n    private _startAnimationPosition: number;\r\n    private _startAnimationTimestamp: number;\r\n    private _disableAnimation: boolean;\r\n    private _positionRange: number;\r\n    private _valueRange: number;\r\n    private _overlayImage: HTMLElement;\r\n    private _canvasElement: HTMLCanvasElement;\r\n    private _canvasImage: HTMLImageElement = null;\r\n    private _animationFrameRequested: boolean = false;\r\n    private _animationRequestFrameId: number;\r\n    private _animationState: GaugeSlicedOverlayAnimationState = GaugeSlicedOverlayAnimationState.animationDisabledDueToInvisibility;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n    public get currentValue(): number {\r\n        return this._value;\r\n    }\r\n    public get currentPosition(): number {\r\n        return this._position;\r\n    }\r\n    public get startPosition(): number {\r\n        return this._startPosition;\r\n    }\r\n    public get endPosition(): number {\r\n        return this._endPosition;\r\n    }\r\n\r\n    public get counterClockwise(): boolean {\r\n        return this._counterClockwise;\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.statusUpdate];\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        this._startAnimationTimestamp = null;\r\n        this._startAnimationPosition = this._currentAnimationPosition;\r\n\r\n        if(this._animationFrameRequested) {\r\n            window.cancelAnimationFrame(this._animationRequestFrameId);\r\n        }\r\n        this._animationRequestFrameId = window.requestAnimationFrame((timestamp) => this._drawSlicedOverlay(timestamp));\r\n        this._animationFrameRequested = true;\r\n    }\r\n\r\n    public onVisibilityChanged(visible: boolean): void {\r\n        if (visible) {\r\n            this._canvasElement.height = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n            this._canvasElement.width = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n        }\r\n        else if (!visible) {\r\n            this._animationState = GaugeSlicedOverlayAnimationState.animationDisabledDueToInvisibility;\r\n        }\r\n    }\r\n\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n        this._updateValue(data.value, data.valueTypeIdentifier);\r\n    }\r\n\r\n    public onNmeaDataReceived(data: StatusUpdateDataContent): void {\r\n        this._updateValue(data.value, data.valueTypeIdentifier);\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._parseAttributes();\r\n        this._setDomElements();\r\n        this._addAnimationStyle();\r\n        this._positionRange = this._endPosition - this._startPosition;\r\n        this._valueRange = this._maxValue - this._minValue;\r\n        this._counterClockwise = this._endPosition < this._startPosition;\r\n        this._position = this._startPosition;\r\n\r\n        this._canvasElement.height = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n        this._canvasElement.width = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n\r\n        window.addEventListener('resize', () => {\r\n            this._canvasElement.height = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n            this._canvasElement.width = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    private _setDomElements(): void {\r\n        this._overlayImage = this.element.querySelector('.gauge-overlay');\r\n        if (this._overlayImage != null) {\r\n            HtmlHelpers.hideElement(this._overlayImage);\r\n            this._canvasElement = document.createElement('canvas');\r\n            this._canvasElement.height = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n            this._canvasElement.width = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n            this.element.appendChild(this._canvasElement);\r\n            this._canvasImage = new Image();\r\n            this._canvasImage.src = this._overlayImage.getAttribute('src');\r\n        }\r\n    }\r\n\r\n    private _addAnimationStyle(): void {\r\n        if(!this._disableAnimation){\r\n            this._overlayImage.classList.add('gauge-animation');\r\n        }\r\n    }\r\n\r\n    private _parseAttributes(): void {\r\n        this._minValue = parseInt(this.element.dataset.minValue, 10);\r\n        this._maxValue = parseInt(this.element.dataset.maxValue, 10);\r\n        this._startPosition = parseInt(this.element.dataset.startPosition, 10);\r\n        this._endPosition = parseInt(this.element.dataset.endPosition, 10);\r\n        this._disableAnimation = NumberHelpers.parseBooleanArgument(this.element.dataset.disableAnimation); // disable-animation\r\n    }\r\n\r\n    private _drawSlicedOverlay(timestamp: number): void {\r\n        if(this._disableAnimation) {\r\n            this._currentAnimationPosition = this._position;\r\n        }\r\n        else if(this._animationState !== GaugeSlicedOverlayAnimationState.animating) {\r\n            this._currentAnimationPosition = this._position;\r\n            if(this._animationState === GaugeSlicedOverlayAnimationState.animationDisabledEnableNextFrame) {\r\n                this._animationState = GaugeSlicedOverlayAnimationState.animating;\r\n            }\r\n        }\r\n        else {\r\n            const diff = (this._startAnimationTimestamp == null) ? 0 : timestamp - this._startAnimationTimestamp;\r\n            if (this._startAnimationTimestamp == null) {\r\n                this._startAnimationTimestamp = timestamp;\r\n            }\r\n\r\n            const maxDelay = 500;\r\n            const progressFactor = Math.min(diff / maxDelay, 1.0);\r\n            const smoothFactor = (Math.pow(progressFactor, 2)) / (Math.pow(progressFactor, 2) + Math.pow(1 - progressFactor, 2));\r\n\r\n            this._currentAnimationPosition = ((this._position - this._startAnimationPosition) * smoothFactor) + this._startAnimationPosition;\r\n        }\r\n        const cx = this._canvasElement.width / 2;\r\n        const cy = this._canvasElement.height / 2;\r\n        const radius = this._canvasElement.width / 2;\r\n        const context = this._canvasElement.getContext('2d');\r\n        context.clearRect(0, 0, this._canvasElement.width, this._canvasElement.height);\r\n        context.save();\r\n        const degreeCorrection = -90;\r\n        const startAngle = (Math.PI / 180) * (this._startPosition + degreeCorrection);\r\n        const endAngle = (Math.PI / 180) * (this._currentAnimationPosition + degreeCorrection);\r\n        context.beginPath();\r\n        context.moveTo(cx, cy);\r\n        if (this._counterClockwise) {\r\n            context.arc(cx, cy, radius, endAngle, startAngle);\r\n        } else {\r\n            context.arc(cx, cy, radius, startAngle, endAngle);\r\n        }\r\n        context.lineTo(cx, cy);\r\n        context.clip();\r\n        context.drawImage(this._canvasImage, 0, 0, this._canvasElement.width, this._canvasElement.height);\r\n        context.restore();\r\n\r\n        if (Math.abs(this._currentAnimationPosition - this._position) < 0.001) {\r\n            this._currentAnimationPosition = this._position;\r\n            this._animationFrameRequested = false;\r\n            this._animationRequestFrameId = 0;\r\n        }\r\n        else {\r\n            this._animationFrameRequested = true;\r\n            this._animationRequestFrameId = window.requestAnimationFrame(this._drawSlicedOverlay.bind(this));\r\n        }\r\n    }\r\n\r\n    private _updateValue(value: number, _valueTypeIdentifier: ValueType): void {\r\n        if (this._animationState !== GaugeSlicedOverlayAnimationState.animating) {\r\n            this._animationState = GaugeSlicedOverlayAnimationState.animationDisabledEnableNextFrame;\r\n        }\r\n        this._value = NumberHelpers.clamp(value, this._minValue, this._maxValue);\r\n        const valueRatio = (this._value - this._minValue) / (this._valueRange);\r\n        this._position = this._positionRange * valueRatio + this._startPosition;\r\n        this.refresh();\r\n    }\r\n}\r\n","// eslint-disable-next-line no-shadow\r\nexport enum SignalInfoType {\r\n    mfd = 0,\r\n    nmea = 1,\r\n    virtual = 2\r\n}\r\n","export class HtmlHelpers {\r\n    public static hideElement(element: HTMLElement): void {\r\n        if (element != null) {\r\n            element.classList.add('hidden');\r\n        }\r\n    }\r\n\r\n    public static showElement(element: HTMLElement): void {\r\n        if (element != null) {\r\n            element.classList.remove('hidden');\r\n        }\r\n    }\r\n\r\n    public static setElementVisibility(element: HTMLElement, visible: boolean): void {\r\n        if (element != null) {\r\n            if (visible === true) {\r\n                this.showElement(element);\r\n            } else {\r\n                this.hideElement(element);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static debounce(func: () => void, wait: number, immediate: boolean): () => void {\r\n        let timeout: any;\r\n        return () => {\r\n            // TODO: Get rid of these warnings\r\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n            const context = this;\r\n            // eslint-disable-next-line prefer-rest-params\r\n            const args = arguments;\r\n            const later = () => {\r\n                timeout = null;\r\n                if (!immediate) {\r\n                    func.apply(context, args);\r\n                }\r\n            };\r\n            const callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) {\r\n                func.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport class NumberHelpers {\r\n\r\n    public static round(number: number, precision: number): number {\r\n        const shift = (numberArg: number, precisionArg: number, reverseShiftArg: boolean) => {\r\n            if (reverseShiftArg) {\r\n                precisionArg = -precisionArg;\r\n            }\r\n            const numArray = ('' + numberArg).split('e');\r\n            return +(numArray[0] + 'e' + (numArray[1] ? (+numArray[1] + precisionArg) : precisionArg));\r\n        };\r\n        return shift(Math.round(shift(number, precision, false)), precision, true);\r\n    }\r\n\r\n    public static parseBooleanArgument(arg: any): boolean {\r\n        if (arg === undefined) {\r\n            return false;\r\n        }\r\n        else if (typeof (arg) === 'boolean') {\r\n            return arg;\r\n        }\r\n        else if (typeof (arg) === 'string') {\r\n            return arg.toLowerCase() === 'true';\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static clamp(value: number, min: number, max: number): number {\r\n        if (value > max) {\r\n            return max;\r\n        }\r\n        if (value < min) {\r\n            return min;\r\n        }\r\n        return value;\r\n    }\r\n}\r\n","import { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { Visibility } from './visibility';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\n\r\nexport abstract class Component {\r\n    public isUnavailable: boolean = false;\r\n    public hideOnServiceUnavailable: boolean = false;\r\n    protected element: HTMLElement;\r\n    protected communicationHandler: ICommunicationHandler;\r\n    private _visibility: Visibility = null; // Whether it should be visible or not. Is initially null to force a visibility check on first call.\r\n    private _isVisible: boolean = null; // If the element is currently visible. Is initially null to force a visibility check on first call.\r\n    private _layerId: string;\r\n    private _mfdComponentId: number;\r\n    private _nmeaComponentId: number;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        this.element = element;\r\n        this._layerId = this.element.dataset.layer;\r\n        this.communicationHandler = communicationHandler;\r\n        this._mfdComponentId = parseInt(this.element.dataset.ebpComponentId, 10); // ebp-component-id\r\n        this._nmeaComponentId = parseInt(this.element.dataset.nmeaComponentId, 10); // nmea-component-id\r\n        if (!isNaN(this._mfdComponentId)) {\r\n            this.communicationHandler.addOnMfdValueReceivedDelegate(this._mfdComponentId, (value: MfdStatusUpdateDataContent) => this._onMfdDataReceived(value));\r\n        }\r\n        if (!isNaN(this._nmeaComponentId)) {\r\n            this.communicationHandler.addOnNmeaValueReceivedDelegate(this._nmeaComponentId, (value: StatusUpdateDataContent) => this.onNmeaDataReceived(value));\r\n        }\r\n    }\r\n\r\n    public initialize(): void {\r\n        this.hideOnServiceUnavailable = NumberHelpers.parseBooleanArgument(this.element.dataset.hideOnServiceUnavailable);\r\n        this.onInitialize();\r\n    }\r\n    get layerId(): string {\r\n        return this._layerId;\r\n    }\r\n\r\n    public setVisibility(visibility: Visibility): void {\r\n        if (visibility !== this._visibility) {\r\n            this._visibility = visibility;\r\n            this._evaluateVisbility();\r\n        }\r\n    }\r\n    public refresh(): void {\r\n        if (this._visibility) {\r\n            this.onRedraw();\r\n        }\r\n    }\r\n\r\n    public abstract onRedraw(): void;\r\n\r\n    // End virtual methods\r\n    protected abstract onInitialize(): void;\r\n\r\n    get mfdComponentId(): number {\r\n        return this._mfdComponentId;\r\n    }\r\n    get nmeaComponentId(): number {\r\n        return this._nmeaComponentId;\r\n    }\r\n\r\n\r\n    public abstract allowSignalTypes(): MfdStatusType[];\r\n    // Virtual methods\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onMfdDataReceived(_message: MfdStatusUpdateDataContent): void { }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onNmeaDataReceived(_message: StatusUpdateDataContent): void { }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onVisibilityChanged(_visible: boolean): void { }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onUnavailableChanged(): void { }\r\n\r\n    private _onMfdDataReceived(message: MfdStatusUpdateDataContent): void {\r\n\r\n        if (this.allowSignalTypes().length > 0 && !this.allowSignalTypes().includes(message.type)) {\r\n            return;\r\n        }\r\n\r\n        if (this.isUnavailable !== message.unavailable) {\r\n            this.isUnavailable = message.unavailable;\r\n            this.onUnavailableChanged();\r\n            this._evaluateVisbility();\r\n        }\r\n\r\n        this.onMfdDataReceived(message);\r\n    }\r\n    private _evaluateVisbility(): void {\r\n\r\n        const visible = this._visibility === Visibility.visible ? !(this.isUnavailable && this.hideOnServiceUnavailable) : false;\r\n        if (visible !== this._isVisible) {\r\n            this._isVisible = visible;\r\n            HtmlHelpers.setElementVisibility(this.element, visible);\r\n            this.onVisibilityChanged(visible);\r\n            this.refresh();\r\n        }\r\n    }\r\n}\r\n","import { NumberHelpers } from '../helpers';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { ValueType } from '../../../infrastructure/value-converter/value-types';\r\nimport { Component } from './component';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\n\r\nexport class Gauge extends Component {\r\n    private _minValue: number;\r\n    private _maxValue: number;\r\n    private _startPosition: number;\r\n    private _endPosition: number;\r\n    private _counterClockwise: boolean;\r\n    private _value: number = 0;\r\n    private _position: number = 0;\r\n    private _wrapAround: boolean;\r\n    private _disableAnimation: boolean;\r\n    private _wrapAroundPosition: number = 0;\r\n    private _positionRange: number;\r\n    private _valueRange: number;\r\n    private _overlayImage: HTMLElement;\r\n    private _removeNoTransitionOnNextRedraw: boolean; // Used for disabling animation during visibility change\r\n    private _valueReceived: boolean = false; // Used for disabling animation if not value has been received yet\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n        this.element.classList.add('notransition');\r\n    }\r\n    public get currentValue(): number {\r\n        return this._value;\r\n    }\r\n    public get currentPosition(): number {\r\n        return this._position;\r\n    }\r\n    public get startPosition(): number {\r\n        return this._startPosition;\r\n    }\r\n    public get endPosition(): number {\r\n        return this._endPosition;\r\n    }\r\n\r\n    public get counterClockwise(): boolean {\r\n        return this._counterClockwise;\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.statusUpdate];\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        if (this._overlayImage != null) {\r\n            if (this._wrapAround) {\r\n                this._wrapAroundPosition = this._closestEquivalentAngle(this._wrapAroundPosition, this._position + this._startPosition);\r\n                this._overlayImage.style.transform = `rotate(${this._wrapAroundPosition - this._startPosition}deg) translateZ(0px)`;\r\n            } else {\r\n                this._overlayImage.style.transform = `rotate(${this._position}deg) translateZ(0px)`;\r\n            }\r\n\r\n            // Remove notransition class separately so that the notransition is still active during the current redraw\r\n            if (this._removeNoTransitionOnNextRedraw && this._valueReceived) {\r\n                setTimeout(() => {\r\n                    this.element.classList.remove('notransition');\r\n                }, 0);\r\n                this._removeNoTransitionOnNextRedraw = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    public onVisibilityChanged(visible: boolean): void {\r\n        if (!visible) {\r\n            this.element.classList.add('notransition');\r\n        }\r\n        else {\r\n            this._removeNoTransitionOnNextRedraw = true;\r\n        }\r\n    }\r\n\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n        this._updateValue(data.value, data.valueTypeIdentifier);\r\n    }\r\n\r\n    public onNmeaDataReceived(data: StatusUpdateDataContent): void {\r\n        this._updateValue(data.value, data.valueTypeIdentifier);\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._parseAttributes();\r\n        this._setDomElements();\r\n        this._addAnimationStyle();\r\n        this._positionRange = this._endPosition - this._startPosition;\r\n        this._valueRange = this._maxValue - this._minValue;\r\n        this._counterClockwise = this._endPosition < this._startPosition;\r\n        this._position = this._startPosition;\r\n\r\n        window.addEventListener('resize', () => {\r\n            this.refresh();\r\n        });\r\n    }\r\n\r\n    private _setDomElements(): void {\r\n        this._overlayImage = this.element.querySelector('.gauge-overlay');\r\n    }\r\n\r\n    private _addAnimationStyle(): void {\r\n        if (!this._disableAnimation) {\r\n            this._overlayImage.classList.add('gauge-animation');\r\n        }\r\n    }\r\n\r\n    private _parseAttributes(): void {\r\n        this._minValue = parseInt(this.element.dataset.minValue, 10);\r\n        this._maxValue = parseInt(this.element.dataset.maxValue, 10);\r\n        this._startPosition = parseInt(this.element.dataset.startPosition, 10);\r\n        this._endPosition = parseInt(this.element.dataset.endPosition, 10);\r\n        this._wrapAround = NumberHelpers.parseBooleanArgument(this.element.dataset.wrapAround); // wrap around\r\n        this._disableAnimation = NumberHelpers.parseBooleanArgument(this.element.dataset.disableAnimation); // disable-animation\r\n    }\r\n\r\n    private _updateValue(value: number, _valueTypeIdentifier: ValueType): void {\r\n        this._valueReceived = true;\r\n        this._value = NumberHelpers.clamp(value, this._minValue, this._maxValue);\r\n        const valueRatio = (this._value - this._minValue) / (this._valueRange);\r\n        this._position = this._positionRange * valueRatio + this._startPosition;\r\n        this.refresh();\r\n    }\r\n\r\n    private _closestEquivalentAngle(from: number, to: number): number {\r\n        const delta = ((((to - from) % 360) + 540) % 360) - 180;\r\n        return from + delta;\r\n    }\r\n}\r\n","import { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, Protocol } from '../../../infrastructure/communication/protocol';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { Component } from './component';\r\n\r\nexport class Button extends Component {\r\n    private _isMomentaryButton: boolean;\r\n    private _stackImages: boolean;\r\n    private _error1: boolean = false;\r\n    private _error2: boolean = false;\r\n    private _on: boolean = false;\r\n    private _pressed: boolean = false;\r\n    private _imgOff: HTMLElement;\r\n    private _imgOn: HTMLElement;\r\n    private _imgError1: HTMLElement;\r\n    private _imgError2: HTMLElement;\r\n    private _imgError12: HTMLElement;\r\n    private _imgNotAvailable: HTMLElement;\r\n    private _imgPressed: HTMLElement;\r\n    private _globalMouseUpEvent: (event: MouseEvent) => boolean;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        if (this._stackImages) {\r\n            HtmlHelpers.showElement(this._imgOff);\r\n            HtmlHelpers.setElementVisibility(this._imgOn, this._on);\r\n            HtmlHelpers.setElementVisibility(this._imgError12, this._error1 && this._error2);\r\n            HtmlHelpers.setElementVisibility(this._imgError1, this._error1);\r\n            HtmlHelpers.setElementVisibility(this._imgError2, this._error2);\r\n            HtmlHelpers.setElementVisibility(this._imgNotAvailable, this.isUnavailable);\r\n        }\r\n        else {\r\n            // Do not stack images; show one image at a time instead.\r\n            HtmlHelpers.hideElement(this._imgOff);\r\n            HtmlHelpers.hideElement(this._imgOn);\r\n            HtmlHelpers.hideElement(this._imgError1);\r\n            HtmlHelpers.hideElement(this._imgError2);\r\n            HtmlHelpers.hideElement(this._imgError12);\r\n            HtmlHelpers.hideElement(this._imgNotAvailable);\r\n\r\n            if (this.isUnavailable) {\r\n                HtmlHelpers.showElement(this._imgNotAvailable);\r\n            } else if (this._error1 && this._error2) {\r\n                HtmlHelpers.showElement(this._imgError12);\r\n            } else if (this._error1) {\r\n                HtmlHelpers.showElement(this._imgError1);\r\n            } else if (this._error2) {\r\n                HtmlHelpers.showElement(this._imgError2);\r\n            } else if (this._on) {\r\n                HtmlHelpers.showElement(this._imgOn);\r\n            } else {\r\n                HtmlHelpers.showElement(this._imgOff);\r\n            }\r\n        }\r\n\r\n        if (this._pressed && !this.isUnavailable) {\r\n            HtmlHelpers.showElement(this._imgPressed);\r\n        }\r\n        else {\r\n            HtmlHelpers.hideElement(this._imgPressed);\r\n        }\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.pulse, MfdStatusType.momentary];\r\n    }\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n        this._error1 = data.err1FT;\r\n        this._error2 = data.err2UC;\r\n        this._on = data.onOffStatus;\r\n        this.refresh();\r\n    }\r\n\r\n    public onVisibilityChanged(visible: boolean): void {\r\n        if (this._pressed && !visible) {\r\n            this.buttonUp();\r\n        }\r\n    }\r\n\r\n    public onUnavailableChanged(): void {\r\n        if (this._pressed && this.isUnavailable) {\r\n            this.buttonUp();\r\n        }\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._isMomentaryButton = this.element.dataset.function === 'SendMomentary';\r\n        this._stackImages = NumberHelpers.parseBooleanArgument(this.element.dataset.stackImages);\r\n        this._imgOff = this.element.querySelector('img.button-off');\r\n        this._imgOn = this.element.querySelector('img.button-on');\r\n        this._imgError1 = this.element.querySelector('img.button-error1');\r\n        this._imgError2 = this.element.querySelector('img.button-error2');\r\n        this._imgError12 = this.element.querySelector('img.button-error12');\r\n        this._imgNotAvailable = this.element.querySelector('img.button-notavailable');\r\n        this._imgPressed = this.element.querySelector('img.button-pressed');\r\n\r\n        this._globalMouseUpEvent = (event: MouseEvent) => {\r\n            this.buttonUp();\r\n            event.preventDefault();\r\n            return false;\r\n        };\r\n\r\n        this._registerEvents();\r\n\r\n    }\r\n    private buttonDown(event: Event): void {\r\n        if (this.isUnavailable) {\r\n            return; // Not allowed to press.\r\n        }\r\n\r\n        this._pressed = true;\r\n\r\n        if (event.type === 'mousedown') {\r\n            document.addEventListener('mouseup', this._globalMouseUpEvent);\r\n        }\r\n\r\n        this.refresh();\r\n\r\n        if (this._isMomentaryButton) {\r\n            this.communicationHandler.send(Protocol.momentaryCommand(this.mfdComponentId, true));\r\n        }\r\n        else {\r\n            this.communicationHandler.send(Protocol.toggleCommand(this.mfdComponentId, true, this._on ? false : true, this._on ? true : false));\r\n        }\r\n    }\r\n\r\n    private buttonUp(): void {\r\n        document.removeEventListener('mouseup', this._globalMouseUpEvent);\r\n\r\n        if (this._isMomentaryButton && this._pressed) {\r\n            this.communicationHandler.send(Protocol.momentaryCommand(this.mfdComponentId, false));\r\n        }\r\n\r\n        this._pressed = false;\r\n        this.refresh();\r\n    }\r\n\r\n    private _registerEvents(): void {\r\n        ['mousedown', 'touchstart'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this.buttonDown(event);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return false;\r\n            }));\r\n\r\n        ['mouseup', 'touchend', 'touchcancel'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this.buttonUp();\r\n                event.preventDefault();\r\n                return false;\r\n            }));\r\n    }\r\n}\r\n","import { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { Component } from './component';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\n\r\nexport class LevelGauge extends Component {\r\n    private _currentLevelRatio: number;\r\n    private _currentValue: number = 0;\r\n    private _minValue: number;\r\n    private _maxValue: number;\r\n    private _minHeightRatio: number;\r\n    private _maxHeightRatio: number;\r\n    private _thresholdLowValue: number;\r\n    private _thresholdHighValue: number;\r\n    private _levelDiv: HTMLElement;\r\n    private _levelImage: HTMLElement;\r\n    private _levelImageLowThreshold: HTMLElement;\r\n    private _levelImageHighThreshold: HTMLElement;\r\n    private _levelTrackerImage: HTMLElement;\r\n    private _levelTrackerImageLowThreshold: HTMLElement;\r\n    private _levelTrackerImageHighThreshold: HTMLElement;\r\n    private _elementHeight: number;\r\n    private _elementWidth: number;\r\n    private _trackerHeight: number;\r\n    private _trackerWidth: number;\r\n    private _trackerLowThresholdHeight: number;\r\n    private _trackerLowThresholdWidth: number;\r\n    private _trackerHighThresholdHeight: number;\r\n    private _trackerHighThresholdWidth: number;\r\n    private _disableAnimation: boolean;\r\n    private _removeNoTransitionOnNextRedraw: boolean; // Used for disabling animation during visibility change\r\n    private _valueReceived: boolean = false; // Used for disabling animation if not value has been received yet\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public get currentValue(): number {\r\n        return this._currentValue;\r\n    }\r\n    public get currentLevelRatio(): number {\r\n        return this._currentLevelRatio;\r\n    }\r\n\r\n    public get minHeigtRatio(): number {\r\n        return this._minHeightRatio;\r\n    }\r\n    public get maxHeigtRatio(): number {\r\n        return this._maxHeightRatio;\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.statusUpdate];\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        if (this._thresholdLowValue != null && this._thresholdLowValue >= this._currentValue) {\r\n            HtmlHelpers.hideElement(this._levelImage);\r\n            HtmlHelpers.showElement(this._levelImageLowThreshold);\r\n            HtmlHelpers.hideElement(this._levelImageHighThreshold);\r\n            HtmlHelpers.hideElement(this._levelTrackerImage);\r\n            HtmlHelpers.showElement(this._levelTrackerImageLowThreshold);\r\n            HtmlHelpers.hideElement(this._levelTrackerImageHighThreshold);\r\n        }\r\n        else if (this._thresholdHighValue != null && this._thresholdHighValue <= this._currentValue) {\r\n            HtmlHelpers.hideElement(this._levelImage);\r\n            HtmlHelpers.hideElement(this._levelImageLowThreshold);\r\n            HtmlHelpers.showElement(this._levelImageHighThreshold);\r\n            HtmlHelpers.hideElement(this._levelTrackerImage);\r\n            HtmlHelpers.hideElement(this._levelTrackerImageLowThreshold);\r\n            HtmlHelpers.showElement(this._levelTrackerImageHighThreshold);\r\n        }\r\n        else {\r\n            HtmlHelpers.showElement(this._levelImage);\r\n            HtmlHelpers.hideElement(this._levelImageLowThreshold);\r\n            HtmlHelpers.hideElement(this._levelImageHighThreshold);\r\n            HtmlHelpers.showElement(this._levelTrackerImage);\r\n            HtmlHelpers.hideElement(this._levelTrackerImageLowThreshold);\r\n            HtmlHelpers.hideElement(this._levelTrackerImageHighThreshold);\r\n        }\r\n        this._resolveCurrentHeightsAndWidths();\r\n\r\n        const top = this._elementHeight - (this._currentLevelRatio - this._minHeightRatio) * this._elementHeight;\r\n        if (this._levelDiv != null) {\r\n            this._levelDiv.style.clip = `rect(${top}px, ${this._elementWidth}px, ${this._elementHeight}px, 0px)`;\r\n        }\r\n\r\n        // vertical positioning of handle\r\n        if (this._levelTrackerImage != null) {\r\n            const trackerBottom = this._currentLevelRatio * this._elementHeight - this._trackerHeight / 2;\r\n            const trackerBottomPx = `${trackerBottom}px`;\r\n            const trackerLeftPx = `${this._elementWidth / 2 - this._trackerWidth / 2}px`;\r\n            this._levelTrackerImage.style.bottom = trackerBottomPx;\r\n            this._levelTrackerImage.style.left = trackerLeftPx;\r\n        }\r\n\r\n        // vertical positioning of handle\r\n        if (this._levelTrackerImageLowThreshold != null) {\r\n            const trackerBottom = this._currentLevelRatio * this._elementHeight - this._trackerLowThresholdHeight / 2;\r\n            const trackerBottomPx = `${trackerBottom}px`;\r\n            const trackerLeftPx = `${this._elementWidth / 2 - this._trackerLowThresholdWidth / 2}px`;\r\n            this._levelTrackerImageLowThreshold.style.bottom = trackerBottomPx;\r\n            this._levelTrackerImageLowThreshold.style.left = trackerLeftPx;\r\n        }\r\n\r\n        // vertical positioning of handle\r\n        if (this._levelTrackerImageHighThreshold != null) {\r\n            const trackerBottom = this._currentLevelRatio * this._elementHeight - this._trackerHighThresholdHeight / 2;\r\n            const trackerBottomPx = `${trackerBottom}px`;\r\n            const trackerLeftPx = `${this._elementWidth / 2 - this._trackerHighThresholdWidth / 2}px`;\r\n            this._levelTrackerImageHighThreshold.style.bottom = trackerBottomPx;\r\n            this._levelTrackerImageHighThreshold.style.left = trackerLeftPx;\r\n        }\r\n\r\n        // Remove notransition class separately so that the notransition is still active during the current redraw\r\n        if (this._removeNoTransitionOnNextRedraw && this._valueReceived) {\r\n            setTimeout(() => {\r\n                this.element.classList.remove('notransition');\r\n            }, 0);\r\n            this._removeNoTransitionOnNextRedraw = false;\r\n        }\r\n    }\r\n\r\n    public onVisibilityChanged(visible: boolean): void {\r\n        if (!visible) {\r\n            this.element.classList.add('notransition');\r\n        }\r\n        else {\r\n            this._removeNoTransitionOnNextRedraw = true;\r\n        }\r\n    }\r\n\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n        this._calculateValues(data.value);\r\n        this.refresh();  // Not good?\r\n    }\r\n    public onNmeaDataReceived(data: StatusUpdateDataContent): void {\r\n        this._calculateValues(data.value);\r\n        this.refresh();\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._parseHtmlAttributes();\r\n        this.setDomElements();\r\n        this._addAnimationStyle();\r\n        this._resolveCurrentHeightsAndWidths();\r\n        window.addEventListener('resize', () => this.refresh());\r\n    }\r\n\r\n    private setDomElements(): void {\r\n        this._levelDiv = this.element.querySelector('.levelgauge-level');\r\n        this._levelImage = this.element.querySelector('.levelgauge-levelimage');\r\n        this._levelImageLowThreshold = this.element.querySelector('.levelgauge-levelimage-low-threshold');\r\n        this._levelImageHighThreshold = this.element.querySelector('.levelgauge-levelimage-high-threshold');\r\n        this._levelTrackerImage = this.element.querySelector('.levelgauge-leveltrackerimage');\r\n        this._levelTrackerImageLowThreshold = this.element.querySelector('.levelgauge-leveltrackerimage-low-threshold');\r\n        this._levelTrackerImageHighThreshold = this.element.querySelector('.levelgauge-leveltrackerimage-high-threshold');\r\n    }\r\n\r\n    private _addAnimationStyle(): void {\r\n        if (!this._disableAnimation) {\r\n            this._levelDiv?.classList.add('levelgauge-animation');\r\n            this._levelImage?.classList.add('levelgauge-leveltracker-animation');\r\n            this._levelTrackerImage?.classList.add('levelgauge-leveltracker-animation');\r\n            this._levelTrackerImageHighThreshold?.classList.add('levelgauge-leveltracker-animation');\r\n            this._levelTrackerImageLowThreshold?.classList.add('levelgauge-leveltracker-animation');\r\n            this._levelImageHighThreshold?.classList.add('levelgauge-leveltracker-animation');\r\n            this._levelImageLowThreshold?.classList.add('levelgauge-leveltracker-animation');\r\n        }\r\n    }\r\n\r\n    private _parseHtmlAttributes(): void {\r\n        this._minValue = parseInt(this.element.dataset.minValue, 10); // min-value\r\n        this._maxValue = parseInt(this.element.dataset.maxValue, 10); // max-value\r\n        this._minHeightRatio = parseInt(this.element.dataset.minHeight, 10) * 0.01; // min-height\r\n        this._maxHeightRatio = parseInt(this.element.dataset.maxHeight, 10) * 0.01; // max-height\r\n        if (this._maxHeightRatio < this._minHeightRatio) {\r\n            const mem = this._minHeightRatio;\r\n            this._minHeightRatio = this._maxHeightRatio;\r\n            this._maxHeightRatio = mem;\r\n        }\r\n        this._currentLevelRatio = this._minHeightRatio;\r\n        this._thresholdLowValue = parseInt(this.element.dataset.thresholdLowValue, 10); // threshold-low-value\r\n        this._thresholdHighValue = parseInt(this.element.dataset.thresholdHighValue, 10); // threshold-high-value\r\n        this._disableAnimation = NumberHelpers.parseBooleanArgument(this.element.dataset.disableAnimation); // disable-animation\r\n    }\r\n\r\n    private _resolveCurrentHeightsAndWidths(): void {\r\n\r\n        this._elementHeight = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n        this._elementWidth = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n\r\n        if (this._levelTrackerImage != null) {\r\n            this._trackerHeight = parseFloat(getComputedStyle(this._levelTrackerImage).getPropertyValue('height'));\r\n            this._trackerWidth = parseFloat(getComputedStyle(this._levelTrackerImage).getPropertyValue('width'));\r\n        }\r\n        // vertical positioning of handle\r\n        if (this._levelTrackerImageLowThreshold != null) {\r\n\r\n            this._trackerLowThresholdHeight = parseFloat(getComputedStyle(this._levelTrackerImageLowThreshold).getPropertyValue('height'));\r\n            this._trackerLowThresholdWidth = parseFloat(getComputedStyle(this._levelTrackerImageLowThreshold).getPropertyValue('width'));\r\n        }\r\n        if (this._levelTrackerImageHighThreshold != null) {\r\n            this._trackerHighThresholdHeight = parseFloat(getComputedStyle(this._levelTrackerImageHighThreshold).getPropertyValue('height'));\r\n            this._trackerHighThresholdWidth = parseFloat(getComputedStyle(this._levelTrackerImageHighThreshold).getPropertyValue('width'));\r\n        }\r\n    }\r\n\r\n    private _calculateValues(rawValue: number): void {\r\n        this._valueReceived = true;\r\n\r\n        let maxValue = this._maxValue;\r\n        let minValue = this._minValue;\r\n        if (this._maxValue < this._minValue) {\r\n            maxValue = this._minValue;\r\n            minValue = this._maxValue;\r\n        }\r\n\r\n        let value = NumberHelpers.clamp(rawValue, minValue, maxValue);\r\n\r\n        this._currentValue = value;  // Used by tresholds, do not invert if max < min\r\n        if (this._maxValue < this._minValue) {\r\n            value = maxValue - value;\r\n        }\r\n\r\n        const heightRange = this._maxHeightRatio - this._minHeightRatio;\r\n        const valueCoefficient = (value - minValue) / Math.abs(this._maxValue - this._minValue);\r\n        this._currentLevelRatio = valueCoefficient * heightRange + this._minHeightRatio;\r\n    }\r\n\r\n}\r\n","import { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { MfdStatusType } from '../../../infrastructure/communication/protocol';\r\nimport { Component } from './component';\r\n\r\nexport class ImageComponent extends Component {\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [];\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onRedraw(): void { }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    protected onInitialize(): void { }\r\n\r\n}\r\n","import { Component } from './component';\r\nimport { HtmlHelpers } from '../helpers';\r\nimport { PageNavigator } from '../page-navigator';\r\nimport { Layer } from '../layer';\r\nimport { LayerActionEnum } from '../layer-action-enum';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { MfdStatusType } from '../../../infrastructure/communication/protocol';\r\n\r\nexport class LayerAction {\r\n    public static fromJson(json: any): LayerAction {\r\n        const action = json.s as LayerActionEnum;\r\n        return new LayerAction(json.l, action);\r\n    }\r\n\r\n    public layerId: string;\r\n    public action: LayerActionEnum = LayerActionEnum.doNothing;\r\n    constructor(layerId: string, action: LayerActionEnum) {\r\n        this.layerId = layerId;\r\n        this.action = action;\r\n    }\r\n}\r\n\r\nexport class NavigationButton extends Component {\r\n    private _destinationPageId: string;\r\n    private _destinationSystemPage: string;\r\n    private _usesPageNavigation: boolean;\r\n    private _pressed: boolean;\r\n    private _requireHoldDownButtonSeconds: number;\r\n    private _holdDownTimeout: NodeJS.Timeout = null;\r\n    private _layerActions: LayerAction[] = null;\r\n    private _globalMouseUpEvent: (event: Event) => boolean;\r\n    private _elementImagePressed: HTMLElement;\r\n    private _pageNavigator: PageNavigator;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler, pageNavigator: PageNavigator) {\r\n        super(element, communicationHandler);\r\n\r\n        this._pageNavigator = pageNavigator;\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        HtmlHelpers.setElementVisibility(this._elementImagePressed, this._pressed);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [];\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._elementImagePressed = this.element.querySelector('.navigationbutton-imagepressed');\r\n        this._destinationSystemPage = this.element.dataset.destinationSystemPage; // destination-system-page\r\n        if (this._destinationSystemPage !== undefined) {\r\n            this._usesPageNavigation = false;\r\n        }\r\n        else {\r\n            this._usesPageNavigation = true;\r\n            this._destinationPageId = this.element.dataset.destinationPageId; // destination-page-id\r\n        }\r\n        this._requireHoldDownButtonSeconds = parseInt(this.element.dataset.requireHoldDownButtonSeconds, 10);\r\n        // require-hold-down-button-seconds\r\n\r\n        if (this._requireHoldDownButtonSeconds == null) {\r\n            this._requireHoldDownButtonSeconds = 0;\r\n        }\r\n        if (this.element.dataset.layerActions) {\r\n            const layerActions = JSON.parse(this.element.dataset.layerActions);\r\n            if (Array.isArray(layerActions)) {\r\n\r\n                this._layerActions = layerActions.map((x: any) => LayerAction.fromJson(x));\r\n            }\r\n        }\r\n\r\n        this._globalMouseUpEvent = (event) => {\r\n            this.buttonUp(event);\r\n            event.preventDefault();\r\n            return false;\r\n        };\r\n\r\n        this.registerEvents();\r\n\r\n    }\r\n\r\n    private registerEvents(): void {\r\n        ['mousedown', 'touchstart'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this.buttonDown(event);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return false;\r\n            }));\r\n\r\n        ['mouseup', 'touchend', 'touchcancel'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this.buttonUp(event);\r\n                event.preventDefault();\r\n                return false;\r\n            }));\r\n    }\r\n\r\n    private buttonDown(event: Event): void {\r\n        if (this.isUnavailable) {\r\n            return; // Not allowed to press.\r\n        }\r\n\r\n        this._pressed = true;\r\n\r\n        if (event.type === 'mousedown') {\r\n            document.addEventListener('mouseup', this._globalMouseUpEvent);\r\n        }\r\n\r\n        this.refresh();\r\n\r\n        if (this._requireHoldDownButtonSeconds > 0) {\r\n            // TODO arrow funiction instead of bind?\r\n            // eslint-disable-next-line @typescript-eslint/no-implied-eval\r\n            this._holdDownTimeout = setTimeout(this.triggerClickAfterHoldDown.bind(this), 1000 * this._requireHoldDownButtonSeconds);\r\n        }\r\n\r\n    }\r\n\r\n    private buttonUp(_event: Event): void {\r\n        document.removeEventListener('mouseup', this._globalMouseUpEvent);\r\n\r\n        if (this._holdDownTimeout != null) {\r\n            clearTimeout(this._holdDownTimeout);\r\n            this._holdDownTimeout = null;\r\n\r\n            this._pressed = false;\r\n            this.refresh();\r\n            return;\r\n        }\r\n\r\n        if (this.isUnavailable) {\r\n            return; // Not allowed to press.\r\n        }\r\n        if (!this._pressed) {\r\n            return;\r\n        }\r\n\r\n        this.onClick();\r\n\r\n        this._pressed = false;\r\n        this.refresh();\r\n    }\r\n\r\n    private onClick(): void {\r\n        if (this._usesPageNavigation) {\r\n            this._navigateToPage();\r\n            this._executeLayerActions();\r\n        }\r\n        else {\r\n            // Switch of external page\r\n            this._pageNavigator.setActiveExternalPage(this._destinationSystemPage);\r\n        }\r\n    }\r\n    private _executeLayerActions(): void {\r\n        if (this._layerActions != null) {\r\n            // Layer changes on the target page.\r\n            for (const layerAction of this._layerActions) {\r\n                const destinationPage = this._pageNavigator.getActivePage();\r\n                if (destinationPage != null) {\r\n                    const layer = destinationPage.getLayer(layerAction.layerId);\r\n                    this._updateLayerState(layerAction.action, layer);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private _navigateToPage(): void {\r\n        if (!this._destinationPageId != null && this._destinationPageId.length !== 0) {\r\n            this._pageNavigator.setActivePageById(this._destinationPageId);\r\n        }\r\n\r\n    }\r\n\r\n    private _updateLayerState(action: LayerActionEnum, layer: Layer): void {\r\n        if (action === LayerActionEnum.doNothing) {\r\n            return;\r\n        }\r\n\r\n        if (action === LayerActionEnum.show && layer.visible || action === LayerActionEnum.hide && !layer.visible) {\r\n            return;\r\n        }\r\n\r\n        const newVisiblityState = action === LayerActionEnum.toggle ? (!layer.visible) : (!(action === LayerActionEnum.hide));\r\n\r\n        layer.visible = newVisiblityState;\r\n    }\r\n\r\n    private triggerClickAfterHoldDown(): void {\r\n        if (this._pressed) {\r\n            this.onClick();\r\n            this._pressed = false;\r\n            this.refresh();\r\n        }\r\n    }\r\n}\r\n","import { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { MfdStatusType } from '../../../infrastructure/communication/protocol';\r\nimport { Component } from './component';\r\n\r\nexport class TextBox extends Component {\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [];\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    public onRedraw(): void { }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    protected onInitialize(): void { }\r\n}\r\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset).\n * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @returns {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {\n      arguments_[_key] = arguments[_key];\n    }\n\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, arguments_);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @returns {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { debounce, throttle };\n//# sourceMappingURL=index.js.map\n","import { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, Protocol } from '../../../infrastructure/communication/protocol';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { throttle, debounce } from 'throttle-debounce';\r\nimport { Component } from './component';\r\n\r\nexport class Slider extends Component {\r\n    private _error1: boolean = false;\r\n    private _error2: boolean = false;\r\n    private _on: boolean = false;\r\n    private _minValue: number;\r\n    private _maxValue: number;\r\n    private _rotation: number;\r\n    private _readOnly: boolean;\r\n    private _moving: boolean;\r\n    private _trackFillElement: HTMLElement;\r\n    private _error1Element: HTMLElement;\r\n    private _error2Element: HTMLElement;\r\n    private _error12Element: HTMLElement;\r\n    private _notAvailableElement: HTMLElement;\r\n    private _handleElement: HTMLElement;\r\n    private _handlePressedElement: HTMLElement;\r\n    private _handleOnElement: HTMLElement;\r\n    private _handleError1Element: HTMLElement;\r\n    private _handleError2Element: HTMLElement;\r\n    private _handleError12Element: HTMLElement;\r\n    private _handleNotAvailableElement: HTMLElement;\r\n    // private _hideOnServiceUnavailable: boolean = false;\r\n    private _globalMouseUpEvent: (event: MouseEvent) => boolean;\r\n    private _globalMouseMoveEvent: (event: MouseEvent) => boolean;\r\n    private _throttleSendData: (value: number) => void;\r\n    private _throttleRefresh: () => void;\r\n    private _debounceRefreshByFeedBackValue: () => void;\r\n    private _value: number;\r\n    private _feedBackValue: number;\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.dimmer];\r\n    }\r\n\r\n    public registerEvents(): void {\r\n        ['mousedown', 'touchstart'].forEach((eventType) => this.element.addEventListener(eventType, (event) => {\r\n            this.onButtonDown(event);\r\n            event.stopPropagation();\r\n            ['mousemove', 'touchmove'].forEach(\r\n                (innerEventType) =>\r\n                    document.addEventListener(innerEventType, this._globalMouseMoveEvent)\r\n            );\r\n            ['mouseup', 'touchend', 'touchcancel'].forEach(\r\n                (innerEventType) =>\r\n                    document.addEventListener(innerEventType, this._globalMouseUpEvent)\r\n            );\r\n            event.preventDefault();\r\n            return false;\r\n        }));\r\n        ['mouseup', 'touchend', 'touchcancel'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this.onButtonUp(event);\r\n                event.preventDefault();\r\n                return false;\r\n            }));\r\n\r\n        window.addEventListener('resize', () => { this._throttleRefresh(); });\r\n    }\r\n\r\n    public onUnavailableChanged(): void {\r\n        if (this.isUnavailable) {\r\n            this.onButtonUp(null);\r\n        }\r\n    }\r\n\r\n    public onButtonDown(event: any): void {\r\n        if (this._readOnly || this.isUnavailable) {\r\n            this._moving = false;\r\n            return;\r\n        }\r\n\r\n        this._moving = true;\r\n        const evt = event.originalEvent === undefined ? event : event.originalEvent;\r\n        let x = 0;\r\n        let y = 0;\r\n        if (evt.type === 'touchstart') {\r\n            x = evt.touches[0].pageX;\r\n            y = evt.touches[0].pageY;\r\n        } else {\r\n            x = evt.pageX;\r\n            y = evt.pageY;\r\n        }\r\n\r\n        this.updatePosition(x, y);\r\n    }\r\n\r\n    public onButtonUp(_event: Event): void {\r\n        this._moving = false;\r\n        this._debounceRefreshByFeedBackValue();\r\n        this._throttleRefresh();\r\n        ['mousemove', 'touchmove'].forEach((eventType) => document.removeEventListener(eventType, this._globalMouseMoveEvent));\r\n        ['mouseup', 'touchend', 'touchcancel'].forEach((eventType) => document.removeEventListener(eventType, this._globalMouseUpEvent));\r\n    }\r\n\r\n    public onButtonMove(event: any): void {\r\n        if (this._readOnly || this.isUnavailable) {\r\n            this._moving = false;\r\n            return;\r\n        }\r\n\r\n        const evt = event.originalEvent === undefined ? event : event.originalEvent;\r\n        let x = 0;\r\n        let y = 0;\r\n\r\n        if (evt.type === 'touchmove') {\r\n            x = evt.touches[0].pageX;\r\n            y = evt.touches[0].pageY;\r\n        } else {\r\n            x = evt.pageX;\r\n            y = evt.pageY;\r\n        }\r\n\r\n        this.updatePosition(x, y);\r\n    }\r\n\r\n    public updatePosition(rawX: number, rawY: number): void {\r\n        if (this._handleElement == null) {\r\n            return;\r\n        }\r\n\r\n        const elementBoundingClientRect = this.element.getBoundingClientRect();\r\n        const xCenter = elementBoundingClientRect.left + elementBoundingClientRect.width / 2;\r\n        const yCenter = elementBoundingClientRect.top + elementBoundingClientRect.height / 2;\r\n        const xFromCenter = rawX - xCenter;\r\n        const yFromCenter = rawY - yCenter;\r\n\r\n        const minActualWidth = 0; // To be used in the future if we want to restrict the slider area.\r\n        const handleWidth = parseFloat(getComputedStyle(this._handleElement).getPropertyValue('width'));\r\n        const elementWidth = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n\r\n        let rotatedX = xFromCenter * Math.cos(-this._rotation * Math.PI / 180)\r\n            - yFromCenter * Math.sin(-this._rotation * Math.PI / 180);\r\n        rotatedX += elementWidth / 2;\r\n\r\n        rotatedX -= handleWidth / 2;\r\n        const maxActualWidth = (elementWidth - handleWidth);\r\n        if (rotatedX < minActualWidth) {\r\n            rotatedX = minActualWidth;\r\n        }\r\n        else if (rotatedX > maxActualWidth) {\r\n            rotatedX = maxActualWidth;\r\n        }\r\n\r\n        const value = (((rotatedX - minActualWidth) / (maxActualWidth - minActualWidth)) * (this._maxValue - this._minValue)) + this._minValue;\r\n\r\n        this.setValue(value);\r\n        this._throttleRefresh();\r\n    }\r\n\r\n    public setValue(value: number): void {\r\n        this._value = value;\r\n        this._throttleSendData(value);\r\n    }\r\n    public sendData(value: number): void {\r\n        this.communicationHandler.send(Protocol.dimmerCommand(this.mfdComponentId, value, 0x00));\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        if (this._handleElement == null) {\r\n            return;\r\n        }\r\n\r\n        const minActualWidth = 0; // To be used in the future if we want to restrict the slider area.\r\n        const handleWidth = parseFloat(getComputedStyle(this._handleElement).getPropertyValue('width'));\r\n        const elementWidth = parseFloat(getComputedStyle(this.element).getPropertyValue('width'));\r\n        const maxActualWidth = elementWidth - handleWidth;\r\n\r\n        // Clamping of value\r\n        const clampedValue = this._clampValue();\r\n\r\n        // Horizontal positioning of handle\r\n        const handlePosition = ((clampedValue - this._minValue) / (this._maxValue - this._minValue)) * (maxActualWidth - minActualWidth) + minActualWidth;\r\n        const xPx = `${handlePosition}px`;\r\n\r\n        this._setLeft(xPx, this._handleElement);\r\n        this._setLeft(xPx, this._handleOnElement);\r\n        this._setLeft(xPx, this._handlePressedElement);\r\n        this._setLeft(xPx, this._handleError1Element);\r\n        this._setLeft(xPx, this._handleError2Element);\r\n        this._setLeft(xPx, this._handleError12Element);\r\n        this._setLeft(xPx, this._handleNotAvailableElement);\r\n\r\n        // Vertical centering of handle\r\n        const elementHeight = parseFloat(getComputedStyle(this.element).getPropertyValue('height'));\r\n        const handleHeight = parseFloat(getComputedStyle(this._handleElement).getPropertyValue('height'));\r\n        const y = elementHeight / 2 - handleHeight / 2;\r\n        const yPx = `${y}px`;\r\n        this._setTop(yPx, this._handleElement);\r\n        this._setTop(yPx, this._handleOnElement);\r\n        this._setTop(yPx, this._handlePressedElement);\r\n        this._setTop(yPx, this._handleError1Element);\r\n        this._setTop(yPx, this._handleError2Element);\r\n        this._setTop(yPx, this._handleError12Element);\r\n        this._setTop(yPx, this._handleNotAvailableElement);\r\n\r\n        const trackOnWidth = ((clampedValue - this._minValue) / (this._maxValue - this._minValue)) * elementWidth;\r\n\r\n        if (this._trackFillElement != null) {\r\n            this._trackFillElement.style.clip = `rect(0px, ${trackOnWidth}, ${elementHeight}, 0px)`;\r\n        }\r\n\r\n        HtmlHelpers.setElementVisibility(this._handlePressedElement, this._moving);\r\n        HtmlHelpers.setElementVisibility(this._handleOnElement, this._on);\r\n        HtmlHelpers.setElementVisibility(this._error1Element, this._error1);\r\n        HtmlHelpers.setElementVisibility(this._error2Element, this._error2);\r\n        HtmlHelpers.setElementVisibility(this._error12Element, this._error1 && this._error2);\r\n        HtmlHelpers.setElementVisibility(this._notAvailableElement, this.isUnavailable);\r\n\r\n        HtmlHelpers.setElementVisibility(this._handleError1Element, this._error1);\r\n        HtmlHelpers.setElementVisibility(this._handleError2Element, this._error2);\r\n        HtmlHelpers.setElementVisibility(this._handleError12Element, this._error1 && this._error2);\r\n        HtmlHelpers.setElementVisibility(this._handleNotAvailableElement, this.isUnavailable);\r\n\r\n    }\r\n\r\n    public onMfdDataReceived(dimmerBaseMessage: MfdStatusUpdateDataContent): void {\r\n        this._error1 = dimmerBaseMessage.err1FT;\r\n        this._error2 = dimmerBaseMessage.err2UC;\r\n        this._on = dimmerBaseMessage.onOffStatus;\r\n        this._feedBackValue = dimmerBaseMessage.dimmerValue;\r\n\r\n        if (!this._moving) {\r\n            this._value = this._feedBackValue;\r\n            this._throttleRefresh();\r\n        }\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._rotation = (this.element.dataset.rotation == null) ? 0 : parseFloat(this.element.dataset.rotation);\r\n        this._readOnly = NumberHelpers.parseBooleanArgument(this.element.dataset.readOnly);\r\n        this._minValue = parseInt(this.element.dataset.minValue, 10);\r\n        this._maxValue = parseInt(this.element.dataset.maxValue, 10);\r\n        this.registerEvents();\r\n        this._moving = false;\r\n        this._trackFillElement = this.element.querySelector('.slider-track-fill');\r\n        this._error1Element = this.element.querySelector('.slider-error1');\r\n        this._error2Element = this.element.querySelector('.slider-error2');\r\n        this._error12Element = this.element.querySelector('.slider-error12');\r\n        this._notAvailableElement = this.element.querySelector('.slider-service-unavailable');\r\n\r\n        this._handleElement = this.element.querySelector('.slider-handle-bg');\r\n        this._handlePressedElement = this.element.querySelector('.slider-handle-pressed');\r\n        this._handleOnElement = this.element.querySelector('.slider-handle-on');\r\n        this._handleError1Element = this.element.querySelector('.slider-handle-error1');\r\n        this._handleError2Element = this.element.querySelector('.slider-handle-error2');\r\n        this._handleError12Element = this.element.querySelector('.slider-handle-error12');\r\n        this._handleNotAvailableElement = this.element.querySelector('.slider-handle-service-unavailable');\r\n\r\n        this._globalMouseUpEvent = (event: MouseEvent) => {\r\n            this.onButtonUp(event);\r\n            event.preventDefault();\r\n            return false;\r\n        };\r\n        this._globalMouseMoveEvent = (event: MouseEvent) => {\r\n            if (this._moving) {\r\n                this.onButtonMove(event);\r\n                event.preventDefault();\r\n                return false;\r\n            }\r\n            event.preventDefault();\r\n            return true;\r\n        };\r\n\r\n        this._throttleSendData = throttle(250, (val: number) => { this.sendData(val); });\r\n        this._throttleRefresh = throttle(50, () => { this.refresh(); });\r\n        this._debounceRefreshByFeedBackValue = debounce(2000, () => {\r\n            this._value = this._feedBackValue;\r\n            this._throttleRefresh();\r\n        });\r\n        this._value = this._minValue;\r\n    }\r\n\r\n    private _clampValue(): number {\r\n        let clampedValue = this._value;\r\n        if (clampedValue < this._minValue) {\r\n            clampedValue = this._minValue;\r\n        }\r\n        else if (clampedValue > this._maxValue) {\r\n            clampedValue = this._maxValue;\r\n        }\r\n        return clampedValue;\r\n    }\r\n\r\n    private _setTop(yPx: string, element: HTMLElement): void {\r\n        if (element != null) {\r\n            element.style.top = yPx;\r\n        }\r\n    }\r\n\r\n    private _setLeft(xPx: string, element: HTMLElement): void {\r\n        if (element != null) {\r\n            element.style.left = xPx;\r\n        }\r\n    }\r\n}\r\n","import { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { CommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { Component } from './component';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent, StatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\n\r\nexport class Indicator extends Component {\r\n    private _imgOff: HTMLElement;\r\n    private _imgOn: HTMLElement;\r\n    private _imgError1: HTMLElement;\r\n    private _imgError2: HTMLElement;\r\n    private _imgError12: HTMLElement;\r\n    private _imgNotAvailable: HTMLElement;\r\n    private _stackImages: boolean;\r\n    private _error1: boolean = false;\r\n    private _error2: boolean = false;\r\n    private _on: boolean = false;\r\n    constructor(element: HTMLElement, communicationHandler: CommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [MfdStatusType.pulse, MfdStatusType.momentary, MfdStatusType.dimmer];\r\n    }\r\n    public onRedraw(): void {\r\n        if (this._stackImages) {\r\n            HtmlHelpers.showElement(this._imgOff);\r\n            HtmlHelpers.setElementVisibility(this._imgOn, this._on);\r\n            HtmlHelpers.setElementVisibility(this._imgError12, this._error1 && this._error2);\r\n            HtmlHelpers.setElementVisibility(this._imgError1, this._error1);\r\n            HtmlHelpers.setElementVisibility(this._imgError2, this._error2);\r\n            HtmlHelpers.setElementVisibility(this._imgNotAvailable, this.isUnavailable);\r\n        }\r\n        else {\r\n            // Do not stack images; show one image at a time instead.\r\n            HtmlHelpers.hideElement(this._imgOff);\r\n            HtmlHelpers.hideElement(this._imgOn);\r\n            HtmlHelpers.hideElement(this._imgError1);\r\n            HtmlHelpers.hideElement(this._imgError2);\r\n            HtmlHelpers.hideElement(this._imgError12);\r\n            HtmlHelpers.hideElement(this._imgNotAvailable);\r\n\r\n            if (this.isUnavailable) {\r\n                HtmlHelpers.showElement(this._imgNotAvailable);\r\n            } else if (this._error1 && this._error2) {\r\n                HtmlHelpers.showElement(this._imgError12);\r\n            } else if (this._error1) {\r\n                HtmlHelpers.showElement(this._imgError1);\r\n            } else if (this._error2) {\r\n                HtmlHelpers.showElement(this._imgError2);\r\n            } else if (this._on) {\r\n                HtmlHelpers.showElement(this._imgOn);\r\n            } else {\r\n                HtmlHelpers.showElement(this._imgOff);\r\n            }\r\n        }\r\n    }\r\n\r\n    public onMfdDataReceived(data: MfdStatusUpdateDataContent): void {\r\n\r\n        this._error1 = data.err1FT;\r\n        this._error2 = data.err2UC;\r\n        this._on = data.onOffStatus;\r\n        this.refresh();\r\n    }\r\n\r\n    public onNmeaDataReceived(data: StatusUpdateDataContent): void {\r\n        this._on = data.value > 0;\r\n        this.isUnavailable = data.unavailable;\r\n        this.refresh();\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._imgOff = this.element.querySelector('img.indicator-off');\r\n        this._imgOn = this.element.querySelector('img.indicator-on');\r\n        this._imgError1 = this.element.querySelector('img.indicator-error1');\r\n        this._imgError2 = this.element.querySelector('img.indicator-error2');\r\n        this._imgError12 = this.element.querySelector('img.indicator-error12');\r\n        this._imgNotAvailable = this.element.querySelector('img.indicator-notavailable');\r\n        this._stackImages = NumberHelpers.parseBooleanArgument(this.element.dataset.stackImages); // stack-images\r\n    }\r\n}\r\n","import { Layer } from './layer';\r\nimport { HtmlHelpers } from './helpers';\r\n\r\nexport class Page {\r\n    private _pageId: string;\r\n    private _isStartPage: boolean;\r\n    private _viewPortId: string;\r\n    private _element: HTMLElement;\r\n    private _visible: boolean = false;\r\n    private _layers: Layer[] = null;\r\n\r\n    constructor(pageElement: HTMLElement, pageId: string, viewPortId: string, isStartPage: boolean) {\r\n        this._element = pageElement;\r\n        this._pageId = pageId;\r\n        this._viewPortId = viewPortId;\r\n        this._isStartPage = isStartPage;\r\n    }\r\n\r\n    get isStartPage(): boolean {\r\n        return this._isStartPage;\r\n    }\r\n\r\n    get viewPortId(): string {\r\n        return this._viewPortId;\r\n    }\r\n    get isVisible(): boolean {\r\n        return this._visible;\r\n    }\r\n    get pageId(): string {\r\n        return this._pageId;\r\n    }\r\n\r\n    public initialize(layers: Layer[]): void {\r\n        this._layers = layers;\r\n    }\r\n\r\n    public getLayers(): Layer[] {\r\n        return this._layers;\r\n    }\r\n\r\n    public getLayer(layerId: string): Layer {\r\n        return this._layers.find(l => l.id === layerId);\r\n    }\r\n\r\n    public redraw(): void {\r\n        for (const layer of this._layers) {\r\n            layer.redraw();\r\n        }\r\n    }\r\n\r\n    public setVisibility(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._element, visible);\r\n        if (this._visible !== visible) {   // If we're going from visible to not visible: make sure to release all buttons.\r\n            this._visible = visible;\r\n            for (const layer of this._layers) {\r\n                layer.onParentVisibilityChanged();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable no-bitwise */\r\nimport { CommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { MfdStatusType, MfdStatusUpdateDataContent } from '../../../infrastructure/communication/protocol';\r\nimport { Component } from './component';\r\n\r\nexport class ColorRectangle extends Component {\r\n    private _bgColorEbpComponentId: number;\r\n    private _opacityEbpComponentId: number;\r\n    private _bgColor: string = '0,0,0';\r\n    private _opacityLevel: number = 0.0;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: CommunicationHandler) {\r\n        super(element, communicationHandler);\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [];\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        this.element.style.background = this._rgbaValue;\r\n    }\r\n    public get ebpComponentIds(): number[] { return [this._bgColorEbpComponentId, this._opacityEbpComponentId]; }\r\n\r\n    public onOpacityDataReceived(data: MfdStatusUpdateDataContent): void {\r\n        this._opacityLevel = data.value / 1000;\r\n        this.refresh();\r\n    }\r\n    public onColorDataReceived(data: MfdStatusUpdateDataContent): void {\r\n\r\n        const value = data.value / 100; // signal is multiplied by 100 to fit raymarine so we need to divide by 100.\r\n        const blue = (value >> 0) & 0xFF; // (value & 0xFF)\r\n        const green = (value >> 8) & 0xFF; // (value & 0xFF00) >> 8\r\n        const red = (value >> 16) & 0xFF; // (value & 0xFF0000) >> 16\r\n        this._bgColor = `${red},${green},${blue}`;\r\n        this.refresh();\r\n    }\r\n\r\n    protected onInitialize(): void {\r\n        this._bgColorEbpComponentId = parseInt(this.element.dataset.ebpBgcolorComponentId, 10);\r\n        this._opacityEbpComponentId = parseInt(this.element.dataset.ebpOpacityComponentId, 10);\r\n        if (!isNaN(this._bgColorEbpComponentId)) {\r\n            this.communicationHandler.addOnMfdValueReceivedDelegate(this._bgColorEbpComponentId, (value: MfdStatusUpdateDataContent) => this.onColorDataReceived(value));\r\n        }\r\n        if (!isNaN(this._opacityEbpComponentId)) {\r\n            this.communicationHandler.addOnMfdValueReceivedDelegate(this._opacityEbpComponentId, (value: MfdStatusUpdateDataContent) => this.onOpacityDataReceived(value));\r\n        }\r\n\r\n    }\r\n    private get _rgbaValue(): string {\r\n        return `rgba(${this._bgColor}, ${this._opacityLevel})`;\r\n    }\r\n}\r\n","import { Component } from './components/component';\r\nimport { Visibility } from './components/visibility';\r\nimport { Page } from './page';\r\nexport class Layer {\r\n    private _id: string;\r\n    private _visible: boolean;\r\n    private _components: Component[];\r\n    private _page: Page;\r\n\r\n    constructor(id: string, visibleInitially: boolean, page: Page) {\r\n        this._id = id;\r\n        this._visible = visibleInitially;\r\n        this._page = page;\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n    public set visible(value: boolean) {\r\n        this._visible = value;\r\n        const componentVisibility = this._visible && this._page.isVisible;\r\n        for (const component of this._components) {\r\n            component.setVisibility(componentVisibility ? Visibility.visible : Visibility.hidden);\r\n        }\r\n    }\r\n\r\n    public initialize(components: Component[]): void {\r\n        this._components = components || [];\r\n    }\r\n\r\n    public onParentVisibilityChanged(): void {\r\n        const visible = this._visible && this._page.isVisible;\r\n        for (const component of this._components) {\r\n            component.setVisibility(visible ? Visibility.visible : Visibility.hidden);\r\n        }\r\n    }\r\n\r\n    public redraw(): void {\r\n        if (this._visible) {\r\n            for (const component of this._components) {\r\n                component.refresh();\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { HtmlHelpers } from './helpers';\r\n\r\nexport class ViewPort {\r\n    public id: string;\r\n    public aspectRatio: number;\r\n    public screenSaverPageId: string;\r\n    private _element: HTMLElement;\r\n    private _visible: boolean = false;\r\n    constructor(pageElement: HTMLElement, id: string, aspectRatio: number, screenSaverPageId: string) {\r\n        this._element = pageElement;\r\n        this.id = id;\r\n        this.aspectRatio = aspectRatio;\r\n        this.screenSaverPageId = screenSaverPageId;\r\n    }\r\n\r\n    get isVisible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    public setVisibility(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._element, visible);\r\n        if (this._visible !== visible) {\r\n            this._visible = visible;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Component } from './component';\r\nimport { HtmlHelpers, NumberHelpers } from '../helpers';\r\nimport { ScreenSaver } from '../screen-saver';\r\nimport { ICommunicationHandler } from '../../../infrastructure/communication/communication-handler';\r\nimport { MfdStatusType } from '../../../infrastructure/communication/protocol';\r\n\r\nexport class ScreenSaverButton extends Component {\r\n    private _imageEnabled: HTMLElement;\r\n    private _imagePressed: HTMLElement;\r\n    private _imageDisabled: HTMLElement;\r\n    private _stackImages: boolean;\r\n\r\n    private _isPressed: boolean = false;\r\n    private _globalMouseUpEvent: (event: MouseEvent) => boolean;\r\n\r\n    private _screenSaver: ScreenSaver;\r\n\r\n    constructor(element: HTMLElement, communicationHandler: ICommunicationHandler, screenSaver: ScreenSaver) {\r\n        super(element, communicationHandler);\r\n        this._screenSaver = screenSaver;\r\n    }\r\n\r\n    public allowSignalTypes(): MfdStatusType[] {\r\n        return [];\r\n    }\r\n\r\n    public onRedraw(): void {\r\n        const enabled = this._screenSaver.isEnabled;\r\n        const pressed = enabled && this._isPressed;\r\n\r\n        if (this._stackImages) {\r\n            HtmlHelpers.setElementVisibility(this._imageEnabled, true);\r\n            HtmlHelpers.setElementVisibility(this._imagePressed, pressed);\r\n            HtmlHelpers.setElementVisibility(this._imageDisabled, !enabled);\r\n        } else {\r\n            HtmlHelpers.hideElement(this._imageEnabled);\r\n            HtmlHelpers.hideElement(this._imageDisabled);\r\n            HtmlHelpers.hideElement(this._imagePressed);\r\n            if (enabled && !pressed) {\r\n                HtmlHelpers.showElement(this._imageEnabled);\r\n            } else if (enabled && pressed) {\r\n                HtmlHelpers.showElement(this._imagePressed);\r\n            } else {\r\n                HtmlHelpers.showElement(this._imageDisabled);\r\n            }\r\n        }\r\n    }\r\n    protected onInitialize(): void {\r\n        this._imageEnabled = this.element.querySelector('.screensaver-enabled');\r\n        this._imagePressed = this.element.querySelector('.screensaver-pressed');\r\n        this._imageDisabled = this.element.querySelector('.screensaver-disabled');\r\n        this._stackImages = this._stackImages = NumberHelpers.parseBooleanArgument(this.element.dataset.stackImages);\r\n\r\n        this._registerEvents();\r\n\r\n        this._globalMouseUpEvent = (event) => {\r\n            this._buttonUp();\r\n            event.preventDefault();\r\n            return false;\r\n        };\r\n        this._screenSaver.onScreensaverEnabled(() => this.refresh());\r\n        this.refresh();\r\n    }\r\n\r\n    private _registerEvents(): void {\r\n        ['mousedown', 'touchstart'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this._buttonDown(event);\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return false;\r\n            }));\r\n\r\n        ['mouseup', 'touchend', 'touchcancel'].forEach(\r\n            (eventType) => this.element.addEventListener(eventType, (event: Event) => {\r\n                this._buttonUp();\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return false;\r\n            }));\r\n    }\r\n\r\n    private _buttonDown(event: Event): void {\r\n        if (event.type === 'mousedown') {\r\n            document.addEventListener('click', this._globalMouseUpEvent);\r\n        }\r\n\r\n        this._isPressed = true;\r\n        this.refresh();\r\n    }\r\n    private _buttonUp(): void {\r\n        document.removeEventListener('click', this._globalMouseUpEvent);\r\n        this._isPressed = false;\r\n        this._screenSaver.activate();\r\n        this.refresh();\r\n\r\n    }\r\n}\r\n","import { Gauge } from './components/gauge';\r\nimport { Button } from './components/button';\r\nimport { LevelGauge } from './components/level-gauge';\r\nimport { ImageComponent } from './components/image';\r\nimport { NavigationButton } from './components/navigation-button';\r\nimport { SignalValue } from './components/signal-value';\r\nimport { TextBox } from './components/textbox';\r\nimport { Slider } from './components/slider';\r\nimport { Indicator } from './components/indicator';\r\nimport { Page } from './page';\r\nimport { CommunicationHandler } from '../../infrastructure/communication/communication-handler';\r\nimport { ColorRectangle } from './components/color-rectangle';\r\nimport { ValueConverter } from '../../infrastructure/value-converter/value-converter';\r\nimport { PageNavigator } from './page-navigator';\r\nimport { Layer } from './layer';\r\nimport { Component } from './components/component';\r\nimport { ViewPort } from './viewPort';\r\nimport { ScreenSaverButton } from './components/screen-saver-button';\r\nimport { ScreenSaver } from './screen-saver';\r\nimport { Log } from '../../infrastructure/log';\r\nimport { MagnitudeConverter } from '../../infrastructure/magnitude-converter';\r\nimport { NumberHelpers } from './helpers';\r\nimport { GaugeSlicedOverlay } from './components/gauge-sliced-overlay';\r\n\r\nexport class ComponentFactory {\r\n    private _communicationHandler: CommunicationHandler = null;\r\n    private _valueConverter: ValueConverter = null;\r\n    private _pageNavigator: PageNavigator = null;\r\n    private _screenSaver: ScreenSaver = null;\r\n    private _magnitudeConverter: MagnitudeConverter = null;\r\n\r\n    constructor(valueConverter: ValueConverter, pageNavigator: PageNavigator, communicationHandler: CommunicationHandler, screenSaver: ScreenSaver, magnitudeConverter: MagnitudeConverter) {\r\n        this._valueConverter = valueConverter;\r\n        this._pageNavigator = pageNavigator;\r\n        this._communicationHandler = communicationHandler;\r\n        this._screenSaver = screenSaver;\r\n        this._magnitudeConverter = magnitudeConverter;\r\n    }\r\n\r\n    public create(): [Page[], ViewPort[]] {\r\n        const pages: Page[] = [];\r\n        const viewPorts: ViewPort[] = [];\r\n\r\n        const viewPortElements: HTMLElement[] = Array.from(document.querySelectorAll('.page-collection'));\r\n        for (const viewPortElement of viewPortElements) {\r\n            const viewPortId = viewPortElement.dataset.pageCollectionId;\r\n            const screenSaverPageId = viewPortElement.dataset.screenSaverPageId;\r\n            const aspectRatio = parseFloat(viewPortElement.dataset.aspectRatio);\r\n            const pageElements: HTMLElement[] = Array.from(viewPortElement.querySelectorAll('.page'));\r\n            const viewPort = new ViewPort(viewPortElement, viewPortId, aspectRatio, screenSaverPageId);\r\n            viewPorts.push(viewPort);\r\n            let isStartPage: boolean = true;\r\n            for (const pageElement of pageElements) {\r\n                const pageId = pageElement.id;\r\n                const page = new Page(pageElement, pageId, viewPortId, isStartPage);\r\n                isStartPage = false;\r\n                pages.push(page);\r\n                const components = this._createComponents(pageElement);\r\n                const layers = this._createLayers(pageElement, page, components);\r\n                page.initialize(layers);\r\n            }\r\n        }\r\n        return [pages, viewPorts];\r\n    }\r\n    private _createComponents(element: Element): Component[] {\r\n        const components: Component[] = [];\r\n        element.querySelectorAll('.component').forEach((componentElement: HTMLElement, _index: number) => {\r\n            const component = this.createComponent(componentElement);\r\n            if (component != null) {\r\n                component.initialize();\r\n                components.push(component);\r\n            }\r\n        });\r\n        return components;\r\n    }\r\n\r\n    private _createLayers(el: HTMLElement, page: Page, components: Component[]): Layer[] {\r\n        const layers: Layer[] = [];\r\n\r\n        if (el.dataset.layers) {\r\n            const layersJson = JSON.parse(el.dataset.layers);\r\n            for (const layerJson of layersJson) {\r\n                const layer = new Layer(layerJson.l, layerJson.v === '1', page);\r\n                const layerComponents = components.filter(c => c.layerId === layer.id);\r\n                layer.initialize(layerComponents);\r\n                layers.push(layer);\r\n            }\r\n        }\r\n        return layers;\r\n    }\r\n\r\n    private createComponent(componentElement: HTMLElement): Component {\r\n        if (componentElement.classList.contains('gauge')) {\r\n            if(NumberHelpers.parseBooleanArgument(componentElement.dataset.useSlicedOverlay)) {\r\n                return new GaugeSlicedOverlay(componentElement, this._communicationHandler);\r\n            } else {\r\n                return new Gauge(componentElement, this._communicationHandler);\r\n            }\r\n        } else if (componentElement.classList.contains('button')) {\r\n            return new Button(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('levelgauge')) {\r\n            return new LevelGauge(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('image')) {\r\n            return new ImageComponent(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('navigationbutton')) {\r\n            return new NavigationButton(componentElement, this._communicationHandler,this._pageNavigator);\r\n        } else if (componentElement.classList.contains('signalvalue')) {\r\n            return new SignalValue(componentElement, this._communicationHandler, this._valueConverter, this._magnitudeConverter);\r\n        } else if (componentElement.classList.contains('textbox')) {\r\n            return new TextBox(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('slider')) {\r\n            return new Slider(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('indicator')) {\r\n            return new Indicator(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('colorrectangle')) {\r\n            return new ColorRectangle(componentElement, this._communicationHandler);\r\n        } else if (componentElement.classList.contains('screensaver-button')){\r\n            return new ScreenSaverButton(componentElement,this._communicationHandler, this._screenSaver);\r\n        } else {\r\n            Log.logError('Unknown component found.');\r\n            return null;\r\n        }\r\n    }\r\n}\r\n","export class ExternalPageNavigator {\r\n    private _externalPageBackButton: HTMLElement;\r\n    private _onHideCallback: () => void;\r\n    constructor() {\r\n        document.querySelector('.external-page').classList.add('hidden');\r\n        this._externalPageBackButton = document.querySelector('.external-page-navigation-back');\r\n        ['mousedown', 'click', 'touchstart'].forEach(\r\n            (eventType) =>\r\n                this._externalPageBackButton.addEventListener(eventType, () => {\r\n                    this._onBackButtonClick();\r\n                }));\r\n    }\r\n\r\n    public show(localUrl: string, onHideCallback: () => void): void {\r\n        this._onHideCallback = onHideCallback;\r\n        if (localUrl.charAt(0) === '/') {\r\n            localUrl = localUrl.slice(1);\r\n        }\r\n\r\n        document.querySelector('.external-page-iframe').classList.add('hidden');\r\n        document.querySelector('.external-page-status').classList.remove('hidden');\r\n        document.querySelector('.external-page-status-text').innerHTML = 'Loading...';\r\n\r\n        setTimeout(() => {\r\n            document.querySelector('.external-page-iframe').classList.remove('hidden');\r\n            document.querySelector('.external-page-status').classList.add('hidden');\r\n        }, 2000);\r\n\r\n        document.querySelector('.external-page').classList.remove('hidden');\r\n        if (localUrl.includes('?')) {\r\n            document.querySelector('.external-page-iframe').setAttribute('src', localUrl + '&disableNavigationBar=1');\r\n        } else {\r\n            document.querySelector('.external-page-iframe').setAttribute('src', localUrl + '?disableNavigationBar=1');\r\n        }\r\n    }\r\n\r\n    public hide(): void {\r\n        document.querySelector('.external-page').classList.add('hidden');\r\n        document.querySelector('.external-page-iframe').setAttribute('src', '');\r\n        this._onHideCallback = null;\r\n    }\r\n\r\n    private _onBackButtonClick(): void {\r\n        const onHideCallback = this._onHideCallback;\r\n        this.hide();\r\n        if (onHideCallback != null) {\r\n            onHideCallback();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","export class UrlHelper {\r\n    public static cleanUrl(url: string): string {\r\n        if (!url.includes('?')) {\r\n            return url;\r\n        }\r\n\r\n        const urlParts = url.split('?');\r\n        let retValue = url;\r\n        urlParts.forEach((urlPart, i) => {\r\n            if (i === 0) {\r\n                retValue = urlPart;\r\n                retValue += '?';\r\n            }\r\n            else {\r\n                retValue += urlPart;\r\n                retValue += '&';\r\n            }\r\n        });\r\n        retValue = retValue.substring(0, retValue.length -1)\r\n        return retValue;\r\n    }\r\n\r\n    public static getUrlParamValue(param: string): string {\r\n        const url = new URL(UrlHelper.cleanUrl(window.location.href)).searchParams;\r\n        const paramValue = url.get(param);\r\n        if (paramValue == null) {\r\n            return '';\r\n        }\r\n        return paramValue;\r\n    }\r\n    public static removeUrlParameter(param: string): void {\r\n        const url = this.removeUrlParameterHref(param, window.location.href);\r\n        window.history.pushState('', '', url.toString());\r\n    }\r\n    public static removeUrlParameterHref(param: string, href: string): string {\r\n        const url = new URL(UrlHelper.cleanUrl(href));\r\n        url.searchParams.delete(param);\r\n        return url.toString();\r\n    }\r\n    public static getPathWithReturnUrl(path: string, extraReturnUrlParams: Map<string, string>): string {\r\n        const url = new URL(window.location.href);\r\n        extraReturnUrlParams.forEach((value, key) => {\r\n            url.searchParams.append(key, value);\r\n        });\r\n        return path + '?returnUrl=' + encodeURIComponent(url.toString());\r\n    }\r\n\r\n    public static createUrlWithReturnParameter(navigationUrl: string, pageId: string = null): string {\r\n\r\n        if (navigationUrl === '') {\r\n            return '';\r\n        }\r\n        const hostUrl = 'http://' + window.location.host;\r\n        // const hostUrl = 'http://172.16.16.0'; //Use when debugging locally\r\n        let settingsUrl = `${hostUrl}/${navigationUrl}`;\r\n        const urlHref = UrlHelper.cleanUrl(window.location.href);\r\n        const appUrl = new URL(urlHref);\r\n        const returnUrls = appUrl.searchParams.getAll('returnUrl');\r\n\r\n        // clear all returnUrls and add them in order\r\n        appUrl.searchParams.delete('returnUrl');\r\n\r\n        if (pageId != null) {\r\n            appUrl.searchParams.append('pageId', pageId);\r\n        }\r\n        const encodedAppUrl = encodeURIComponent(appUrl.toString())\r\n\r\n        const urlAppends = [];\r\n\r\n        returnUrls.forEach(url => {\r\n            urlAppends.push('returnUrl=' + encodeURIComponent(url));\r\n        })\r\n        urlAppends.push('returnUrl=' + encodedAppUrl);\r\n\r\n        urlAppends.forEach((append, i) => {\r\n            if (i === 0)\r\n                settingsUrl += '?'\r\n            else\r\n                settingsUrl += '&'\r\n            settingsUrl += append;\r\n        })\r\n        return settingsUrl;\r\n\r\n    }\r\n}","import { Page } from './page';\r\nimport { ExternalPageNavigator } from './external-page-navigator';\r\nimport { ViewPort } from './viewPort';\r\nimport { UrlHelper } from '../../infrastructure/url-helper';\r\n\r\nexport class PageNavigator {\r\n\r\n    public static createUrlWithReturnParameter(navigationUrl: string, pageId: string = null): string {\r\n        return UrlHelper.createUrlWithReturnParameter(navigationUrl,pageId);\r\n    }\r\n\r\n    private _maxHistoryLength: number = 10;\r\n    private _pages: Page[] = [];\r\n    private _currentViewPort: ViewPort = null;\r\n    private _externalPageNavigator: ExternalPageNavigator = new ExternalPageNavigator();\r\n    private _history: NavigationHistoryItem[] = [];\r\n    private _activePageId: string = '';\r\n\r\n    public setPages(pages: Page[]): void {\r\n        this._pages = pages;\r\n        if (this._pages.length > 0) {\r\n            this._setActivePage(this._pages[0], true);\r\n        }\r\n    }\r\n\r\n    public setActivePageByViewPort(viewPort: ViewPort): void {\r\n        this.hideAllPages();\r\n        this._currentViewPort = viewPort;\r\n        this._history.length = 0; // Clear the array\r\n\r\n        const urlPageId = UrlHelper.getUrlParamValue('pageId');\r\n        UrlHelper.removeUrlParameter('pageId')\r\n\r\n        let page = this._pages.find(p => p.viewPortId === this._currentViewPort.id && p.pageId === urlPageId);\r\n        if (page != null) {\r\n            this._setActivePage(page, true);\r\n        }\r\n        else {\r\n            page = this._pages.find(p => p.viewPortId === viewPort.id && p.isStartPage);\r\n            this._setActivePage(page, true);\r\n        }\r\n    }\r\n    public setActivePageById(pageId: string): void {\r\n        let page = this._pages.find(p => p.pageId === pageId && p.viewPortId === this._currentViewPort.id);\r\n        if (page == null) { // if return url not in view port e.g\r\n            page = this._pages.find(p => p.viewPortId === this._currentViewPort.id && p.isStartPage);\r\n        }\r\n        this._setActivePage(page, true);\r\n    }\r\n    public setActiveExternalPage(targetUrl: string): void {\r\n        const navHistory = new NavigationHistoryItem();\r\n        navHistory.externalPageUrl = targetUrl;\r\n        this._history.splice(0, 0, navHistory);\r\n        const url = PageNavigator.createUrlWithReturnParameter(targetUrl, this._activePageId);\r\n        window.location.href = url;\r\n\r\n    }\r\n\r\n    public navigateBack(): void {\r\n        if (this._history.length < 2) {\r\n            return;\r\n        }\r\n        const target = this._history[1];\r\n        this._history.shift(); // remove first element (current page)\r\n\r\n        if (target.isExternalPage) {\r\n            this._setActiveExternalPage(target.externalPageUrl, false);\r\n        } else if (target.page != null) {\r\n            this._setActivePage(target.page, false);\r\n        }\r\n    }\r\n\r\n    public getActivePage(): Page {\r\n        const currentPage = this._history.length > 0 ? this._history[0].page : null;\r\n        return this._pages.find(p => p === currentPage);\r\n    }\r\n    public getActiveViewPort(): ViewPort {\r\n        return this._currentViewPort;\r\n    }\r\n    private hideAllPages(): void {\r\n        for (const page of this._pages) {\r\n            page.setVisibility(false);\r\n        }\r\n    }\r\n\r\n    private _setActivePage(page: Page, addToHistory: boolean): void {\r\n        this._externalPageNavigator.hide();\r\n        if (addToHistory) {\r\n            const navHistoryItem = new NavigationHistoryItem();\r\n            navHistoryItem.page = page;\r\n            this._history.splice(0, 0, navHistoryItem);\r\n            while (this._history.length >= this._maxHistoryLength) {\r\n                this._history.pop();\r\n            }\r\n        }\r\n        for (const p of this._pages) {\r\n            const activePage = page === p;\r\n            p.setVisibility(activePage);\r\n            if (activePage) {\r\n                p.redraw();\r\n                this._activePageId = p.pageId;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setActiveExternalPage(localUrl: string, addToHistory: boolean): void {\r\n        if (addToHistory) {\r\n            const navHistory = new NavigationHistoryItem();\r\n            navHistory.externalPageUrl = localUrl;\r\n            this._history.splice(0, 0, navHistory);\r\n        }\r\n        this.hideAllPages();\r\n        this._externalPageNavigator.show(localUrl, () => this.navigateBack());\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class NavigationHistoryItem {\r\n\r\n    public page: Page = null;\r\n    public externalPageUrl: string = null;\r\n    public get isExternalPage(): boolean {\r\n        return this.externalPageUrl != null;\r\n    }\r\n\r\n}\r\n","import { HtmlHelpers } from './helpers';\r\nimport { CommunicationHandler, Command, WatchdogStates } from '../../infrastructure/communication/communication-handler';\r\nimport { Log } from '../../infrastructure/log';\r\nimport { NetlistChecksumHandler } from '../../infrastructure/netlist-checksum-handler';\r\nexport class PageOverlays {\r\n\r\n    private _overlayWebSocketError: HTMLElement;\r\n    private _overlayBusError: HTMLElement;\r\n    private _overlayStarting: HTMLElement;\r\n    private _overlayReload: HTMLElement;\r\n    private _communicationHandler: CommunicationHandler = null;\r\n    private _netlistChecksumHandler: NetlistChecksumHandler;\r\n    private _overlayWhitePageBlocker: HTMLDivElement;\r\n    private _imagesLoaded: boolean = false;\r\n    private _watchdogState: WatchdogStates;\r\n    private _overlayWarningChecksum: HTMLDivElement;\r\n    private _overlayWarningTest: HTMLDivElement;\r\n    private _showWarnings: boolean = true;\r\n    private _warningHideTimeout: number = 1000 * 60; // ms\r\n    private _hideWarningPressTimeout: number = 1000 * 5; // ms\r\n    private _lastKnownChecksum: number = null;\r\n    private _holdDownTimeout: NodeJS.Timeout = null;\r\n    private _globalMouseUpEvent: (event: Event) => boolean;\r\n\r\n    constructor(communicationHandler: CommunicationHandler, netlistChecksumHandler: NetlistChecksumHandler) {\r\n        this._communicationHandler = communicationHandler;\r\n        this._netlistChecksumHandler = netlistChecksumHandler;\r\n    }\r\n    public initialize(): void {\r\n        this._overlayWebSocketError = document.querySelector('.overlay.overlay-websocket-error');\r\n        this._overlayBusError = document.querySelector('.overlay.overlay-bus-error');\r\n        this._overlayStarting = document.querySelector('.overlay.overlay-start');\r\n        this._overlayReload = document.querySelector('.overlay.overlay-reload');\r\n        this._overlayWhitePageBlocker = document.getElementById('overlay-white-page-blocker') as HTMLDivElement;\r\n        this._overlayWarningChecksum = document.getElementById('checksum-warning-message') as HTMLDivElement;\r\n        this._overlayWarningTest = document.getElementById('test-warning-message') as HTMLDivElement;\r\n\r\n        this._setOverlayStarting(true);\r\n        this._setOverlayWebSocketError(false);\r\n        this._setOverlayBusError(false);\r\n        this._setOverlayReload(false);\r\n\r\n        this._drawOverlayWarnings();\r\n\r\n        this._removeWhitePageBlocker();\r\n        void this._imageLoadedNotifier();\r\n        this._registerWarningTouchEvents();\r\n\r\n        this._communicationHandler.addWatchdogStateChangedDelegate((state: WatchdogStates) => this._onSocketStateChanged(state));\r\n        this._communicationHandler.addOnCommandReceivedDelegate((command: Command) => this._onCommandReceived(command));\r\n\r\n        this._globalMouseUpEvent = (event) => {\r\n            this._buttonUp(event);\r\n            event.preventDefault();\r\n            return false;\r\n        };\r\n    }\r\n    private async _imageLoadedNotifier(): Promise<void> {\r\n        await Promise.all(Array.from(document.images).map(img => {\r\n            if (img.complete)\r\n                return Promise.resolve(img.naturalHeight !== 0);\r\n            return new Promise(resolve => {\r\n                // eslint-disable-next-line no-self-assign\r\n                // TD50: img.src = img.src; // Trigger load when image is loaded from cache.\r\n                img.addEventListener('load', () => resolve(true));\r\n                img.addEventListener('error', () => resolve(false));\r\n            });\r\n        })).then((results) => {\r\n            if (results.every(res => res)) {\r\n                // All images loaded correct\r\n            }\r\n            else {\r\n                // One or more images is done loading got error event.\r\n            }\r\n            this._imagesLoaded = true;\r\n            this._calculateOverlay();\r\n        });\r\n    }\r\n    private _hideWarnings(): void {\r\n        if (!this._showWarnings) {\r\n            return;\r\n        }\r\n        this._showWarnings = false;\r\n        this._drawOverlayWarnings();\r\n        setTimeout(() => {\r\n            this._showWarnings = true;\r\n            this._drawOverlayWarnings();\r\n        }, this._warningHideTimeout);\r\n    }\r\n    private _drawOverlayWarnings(): void {\r\n        this._calculateChecksumWarning();\r\n        this._calculateTestWaring();\r\n    }\r\n\r\n    private _registerWarningTouchEvents(): void {\r\n        ['mousedown', 'touchstart'].forEach(\r\n            (eventType) => {\r\n                this._overlayWarningTest.addEventListener(eventType, (event: Event) => {\r\n                    this._hideWarningsEventListener(event);\r\n                    event.stopPropagation();\r\n                });\r\n\r\n                this._overlayWarningChecksum.addEventListener(eventType, (event: Event) => {\r\n                    this._hideWarningsEventListener(event);\r\n                    event.stopPropagation();\r\n                });\r\n            });\r\n    }\r\n\r\n    private _buttonUp(_event: Event): void {\r\n        document.removeEventListener('mouseup', this._globalMouseUpEvent);\r\n        if (this._holdDownTimeout != null) {\r\n            clearTimeout(this._holdDownTimeout);\r\n            this._holdDownTimeout = null;\r\n            return;\r\n        }\r\n    }\r\n    private _hideWarningsEventListener(event: Event): void {\r\n        if (event.type === 'mousedown') {\r\n            document.addEventListener('mouseup', this._globalMouseUpEvent);\r\n        }\r\n        this._holdDownTimeout = setTimeout(() => this._hideWarnings(), this._hideWarningPressTimeout);\r\n        event.preventDefault();\r\n    }\r\n    private _removeWhitePageBlocker(): void {\r\n        // Inline styled div that blocks white page before css is loaded.\r\n        if (this._overlayWhitePageBlocker != null) {\r\n            this._overlayWhitePageBlocker.remove();\r\n        }\r\n    }\r\n\r\n    private _setOverlayWebSocketError(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._overlayWebSocketError, visible);\r\n    }\r\n\r\n    private _setOverlayBusError(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._overlayBusError, visible);\r\n    }\r\n\r\n    private _setOverlayStarting(visible: boolean): void {\r\n        if (this._overlayStarting == null) {\r\n            return;\r\n        }\r\n\r\n        if (visible) {\r\n            HtmlHelpers.showElement(this._overlayStarting);\r\n        }\r\n        else {\r\n            if (this._netlistChecksumHandler.hasBothChecksums()) {\r\n                if (this._netlistChecksumHandler.isChecksumValid()) {\r\n                    HtmlHelpers.hideElement(this._overlayStarting);\r\n                }\r\n                else {\r\n                    HtmlHelpers.showElement(this._overlayStarting.querySelector('.checksum-warning'));\r\n                    setTimeout(() => {\r\n                        HtmlHelpers.hideElement(this._overlayStarting);\r\n                    }, 5000);\r\n                }\r\n            }\r\n            else {\r\n                setTimeout(() => {\r\n                    this._setOverlayStarting(false);\r\n                }, 500);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setOverlayReload(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._overlayReload, visible);\r\n    }\r\n\r\n    private _calculateTestWaring(): void {\r\n        if (this._overlayWarningTest != null) {\r\n            const text = this._overlayWarningTest.innerText;\r\n            if (text != null && text.trim().length > 0 && this._showWarnings) {\r\n                HtmlHelpers.setElementVisibility(this._overlayWarningTest, true);\r\n            }\r\n            else {\r\n                HtmlHelpers.setElementVisibility(this._overlayWarningTest, false);\r\n            }\r\n        }\r\n    }\r\n    private _calculateChecksumWarning(): void {\r\n        // if new checksum during hidden warning display it anyways.\r\n        if (this._netlistChecksumHandler.hasBothChecksums()) {\r\n            let showWarnings = this._showWarnings;\r\n            Log.logDebug('show warnings: ' + this._showWarnings)\r\n            if (this._lastKnownChecksum != null && this._lastKnownChecksum !== this._netlistChecksumHandler.configurationChecksumFromWDU) {\r\n                showWarnings = true;\r\n                Log.logDebug('Last known checksum has changed!');\r\n            }\r\n\r\n            if (this._netlistChecksumHandler.isChecksumValid()) {\r\n                this._setChecksumBusError(false);\r\n            }\r\n            else if (showWarnings) {\r\n                Log.logDebug('Configuration checksum from projectinfo: ' + this._netlistChecksumHandler.configurationChecksumFromProject);\r\n                Log.logDebug('Configuration checksum from WDU: ' + this._netlistChecksumHandler.configurationChecksumFromWDU);\r\n                Log.logDebug('Last known checksum: ' + this._lastKnownChecksum);\r\n                this._setChecksumBusError(true);\r\n            } else {\r\n                this._setChecksumBusError(false);\r\n            }\r\n\r\n        }\r\n        this._lastKnownChecksum = this._netlistChecksumHandler.configurationChecksumFromWDU;\r\n    }\r\n    private _setChecksumBusError(visible: boolean): void {\r\n        HtmlHelpers.setElementVisibility(this._overlayWarningChecksum, visible);\r\n    }\r\n\r\n    private _onSocketStateChanged(state: WatchdogStates): void {\r\n        this._watchdogState = state;\r\n        this._calculateOverlay();\r\n    }\r\n\r\n    private _calculateOverlay(): void {\r\n        if (!this._imagesLoaded) {\r\n            return;\r\n        }\r\n        switch (this._watchdogState) {\r\n            case WatchdogStates.ok:\r\n                this._setOverlayWebSocketError(false);\r\n                this._setOverlayBusError(false);\r\n                this._setOverlayStarting(false);\r\n                break;\r\n            case WatchdogStates.noConnectionToWdu:\r\n                this._setOverlayWebSocketError(true);\r\n                this._setOverlayBusError(false);\r\n                break;\r\n            case WatchdogStates.noConnectionToDigitalSwitching:\r\n                this._setOverlayWebSocketError(false);\r\n                this._setOverlayBusError(true);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _onCommandReceived(command: Command): void {\r\n        switch (command) {\r\n            case Command.forcePageReload:\r\n                this._setOverlayReload(true);\r\n                break;\r\n            case Command.checksumReceived:\r\n                Log.logDebug('Service Provider checksum received');\r\n                this._calculateChecksumWarning();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n","import { WebSocketManager, SocketState } from '../../infrastructure/communication/web-socket-manager';\r\nimport { Log } from '../../infrastructure/log';\r\n\r\nexport class DataSubscription {\r\n    private _webSocketManager: WebSocketManager;\r\n    constructor(webSocketManager: WebSocketManager) {\r\n        this._webSocketManager = webSocketManager;\r\n    }\r\n\r\n    public start(): void {\r\n        this._webSocketManager.addOnSocketStateChangedDelegate((state: SocketState) => {\r\n            if (state === SocketState.open) {\r\n                Log.logInfo('Web socket state changed to open. About to start a new subscription');\r\n                this._sendSubscriptionRequests();\r\n                this._sendN2kSubscriptionRequestsToWdu();\r\n            }\r\n        });\r\n    }\r\n\r\n    private _sendSubscriptionRequests(): void {\r\n        const element = document.getElementById('mfd-channel-subscription');\r\n        if (element != null) {\r\n            this._webSocketManager.send(element.innerHTML);\r\n        }\r\n    }\r\n\r\n    private _sendN2kSubscriptionRequestsToWdu(): void {\r\n        const element = document.getElementById('n2k-dataItem-subscription');\r\n        if (element != null) {\r\n            this._webSocketManager.send(document.getElementById('n2k-dataItem-subscription').innerHTML);\r\n        }\r\n    }\r\n}\r\n","import { PageNavigator } from './page-navigator';\r\nimport { ViewPort } from './viewPort';\r\nimport { ScreenSaver } from './screen-saver';\r\nimport { Log } from '../../infrastructure/log';\r\nexport class ViewPortManager {\r\n    private _pageNavigator: PageNavigator;\r\n    private _activeViewPortId: string = null;\r\n    private _screenSaver: ScreenSaver;\r\n    private _viewPorts: ViewPort[];\r\n    constructor(pageNavigator: PageNavigator, screenSaver: ScreenSaver) {\r\n        this._pageNavigator = pageNavigator;\r\n        this._screenSaver = screenSaver;\r\n        window.addEventListener('resize', () => this._changeViewPortBasedOnWindowSize());\r\n    }\r\n    public setViewPorts(viewPorts: ViewPort[]): void {\r\n        this._viewPorts = viewPorts;\r\n        this._changeViewPortBasedOnWindowSize();\r\n\r\n    }\r\n    private _changeViewPortBasedOnWindowSize(): void {\r\n\r\n        Log.logInfo(`Windows size change, window.innerwidth: ${window.innerWidth}, windos.innerHeight ${window.innerHeight}`);\r\n        const currentAspectRatio = window.innerWidth / window.innerHeight;\r\n        Log.logInfo(`Current aspectRatio: ${currentAspectRatio}`);\r\n        const sorted = this._viewPorts.sort((a, b) => Math.abs(a.aspectRatio - currentAspectRatio) - Math.abs(b.aspectRatio - currentAspectRatio));\r\n        if (sorted == null || sorted.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const selectedVp = sorted[0];\r\n        if (selectedVp.id !== this._activeViewPortId) {\r\n            for (const vp of this._viewPorts) {\r\n                vp.setVisibility(false);\r\n            }\r\n            Log.logInfo(`Selected viewPort Id: ${selectedVp.id}`);\r\n            selectedVp.setVisibility(true);\r\n            this._activeViewPortId = selectedVp.id;\r\n            this._pageNavigator.setActivePageByViewPort(selectedVp);\r\n            this._screenSaver.reset();\r\n        }\r\n    }\r\n}\r\n","import { SettingsReader, SettingKey } from '../../infrastructure/settings-reader';\r\nimport { Timer } from '../../infrastructure/timer';\r\nimport { PageNavigator } from './page-navigator';\r\nexport type OnStatusChangeDelegates = () => void;\r\nexport class ScreenSaver {\r\n\r\n    private _settingsReader: SettingsReader;\r\n    private _pageNavigator: PageNavigator;\r\n    private _screenSaverIdle: number = 0; // milliseconds\r\n    private _lastInputTime: number;\r\n    private _screensaverIsActive: boolean = false;\r\n    private _intervalTime: number = 10000; // milliseconds\r\n    private _currentInterval: NodeJS.Timeout;\r\n    private _ignoreEvents: string[] = ['mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'onwheel', 'touchstart', 'touchcancel', 'touchmove'];\r\n    private _closeEvents: string[] = ['touchend', 'click'];\r\n    private _isEnabled: boolean = false;\r\n    private _onStatusChangeDelegates: OnStatusChangeDelegates[] = [];\r\n    private _screenSaverPageId: string = '';\r\n    private _screenSaverPageExists: boolean = false;\r\n    private _screenSaverActivatedTime: number = 0;\r\n\r\n    public constructor(settingsReader: SettingsReader, pageNavigator: PageNavigator) {\r\n        this._settingsReader = settingsReader;\r\n        this._pageNavigator = pageNavigator;\r\n        this._lastInputTime = Timer.timestamp();\r\n\r\n    }\r\n\r\n    public initialize(): void {\r\n        this._settingsReader.addOnSettingsReloadedDelegate(() => this._refresh());\r\n        this._refresh();\r\n        this._registerEvents();\r\n    }\r\n\r\n    public reset(): void {\r\n        this._screensaverIsActive = false;\r\n        this._lastInputTime = Timer.timestamp();\r\n        void this._refresh();\r\n    }\r\n\r\n    public onScreensaverEnabled(delegate: OnStatusChangeDelegates): void {\r\n        this._onStatusChangeDelegates.push(delegate);\r\n    }\r\n\r\n    public get isEnabled(): boolean {\r\n        return this._isEnabled;\r\n    }\r\n    public activate(): void {\r\n        if (this.isEnabled) {\r\n            this._lastInputTime = -99999;\r\n            this._screensaverInterval();\r\n        }\r\n    }\r\n    private _registerEvents(): void {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        const self = this;\r\n        this._closeEvents.forEach(theEvent => {\r\n            window.addEventListener(theEvent, (event): void => { self._onValidCloseEvent(event); }, true);\r\n        });\r\n        this._ignoreEvents.forEach(theEvent => {\r\n            document.addEventListener(theEvent, (event): void => { self._onIgnoreEvent(event); }, true);\r\n        });\r\n    }\r\n\r\n    private _refresh(): void {\r\n        this._ensuerScreenSaverPageExists();\r\n        this._ensureEnabled();\r\n\r\n        clearTimeout(this._currentInterval);\r\n\r\n        if (!this.isEnabled && this._screensaverIsActive) {\r\n            this._pageNavigator.navigateBack();\r\n            this._screensaverIsActive = false;\r\n        } else {\r\n            // TODO: Use arrow function instead?\r\n            // eslint-disable-next-line @typescript-eslint/no-implied-eval\r\n            this._currentInterval = setInterval(this._screensaverInterval.bind(this), this._intervalTime);\r\n        }\r\n    }\r\n    private _ensuerScreenSaverPageExists(): void {\r\n        this._screenSaverPageId = this._pageNavigator.getActiveViewPort() != null ? this._pageNavigator.getActiveViewPort().screenSaverPageId : '';\r\n        this._screenSaverPageExists = this._screenSaverPageId !== '' ? true : false;\r\n    }\r\n    private _ensureEnabled(): void {\r\n        const thePrevStatus = this._isEnabled;\r\n\r\n        try {\r\n            this._screenSaverIdle = parseInt(this._settingsReader.getSetting(SettingKey.screensaver), 10) * 60; // seconds\r\n        }\r\n        catch (e) {\r\n            // setting is 0;\r\n            this._isEnabled = false;\r\n        }\r\n        this._isEnabled = this._screenSaverIdle === 0 ? false : true;\r\n\r\n        this._isEnabled = this._isEnabled === true && this._screenSaverPageExists;\r\n        if (thePrevStatus !== this._isEnabled) {\r\n            for (const delegate of this._onStatusChangeDelegates) {\r\n                delegate();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _screensaverInterval(): void {\r\n        const timeSinceLastInput =  Timer.elapsedSeconds(this._lastInputTime);\r\n        if (!this._screensaverIsActive && this._isEnabled && (timeSinceLastInput - this._screenSaverIdle) > 0) {\r\n            this._screensaverIsActive = true;\r\n            this._screenSaverActivatedTime = Timer.timestamp();\r\n            this._pageNavigator.setActivePageById(this._screenSaverPageId);\r\n        }\r\n    }\r\n    private _onIgnoreEvent(event: Event): void {\r\n        if (this._screensaverIsActive) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n    private _onValidCloseEvent(event: Event): void {\r\n        this._lastInputTime = Timer.timestamp();\r\n        if (this._screensaverIsActive && Timer.elapsedSeconds(this._screenSaverActivatedTime) >= 1  ) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            // Navigate back\r\n            this._pageNavigator.navigateBack();\r\n            this._screensaverIsActive = false;\r\n        }\r\n    }\r\n}\r\n","import { FileLoadHelper } from '../file-load-helper';\r\nimport { WebsocketMessage, StatusUpdateDataContent, MfdStatusUpdateDataContent, MfdStatusCommandTypes, NmeaMessageCommandTypes, MfdStatusType, ValueDataType } from './protocol';\r\nimport { SignalInfo } from '../signals/signal-info';\r\nimport { SignalInfoType } from '../signals/signal-info-type';\r\nimport { VirtualSignalInfo } from '../signals/virtual-signal-info';\r\n\r\n\r\nexport class WebSocketContentDecoder {\r\n\r\n    public get useChannelItems(): boolean {\r\n        return this._useChannelItems;\r\n    }\r\n    private _useChannelItems: boolean;\r\n    private _nmeaSignalInfoMap: Map<number, SignalInfo> = new Map<number, SignalInfo>();\r\n    private _virtualSignalInfoMap: Map<number, VirtualSignalInfo[]> = new Map<number, VirtualSignalInfo[]>();\r\n\r\n    public decodeN2KDataItem(wsMessage: WebsocketMessage): StatusUpdateDataContent {\r\n        if (wsMessage.messagecmd === NmeaMessageCommandTypes.statusUpdate) {\r\n            const signalId = (wsMessage.data[0] | (wsMessage.data[1] << 8));\r\n            const nmeaStatusContent: StatusUpdateDataContent = new StatusUpdateDataContent();\r\n            nmeaStatusContent.signalId = signalId;\r\n            nmeaStatusContent.unavailable = (wsMessage.data[2] & 0x80) === 0 ? false : true;\r\n            nmeaStatusContent.valueTypeIdentifier = (wsMessage.data[3] | (wsMessage.data[4] << 8));\r\n            nmeaStatusContent.value = this._getValue(signalId, wsMessage.data, 5);\r\n            return nmeaStatusContent;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public decodeMFDChannelItem(wsMessage: WebsocketMessage): MfdStatusUpdateDataContent {\r\n        const signalId = wsMessage.data[0] | (wsMessage.data[1] << 8);\r\n        const content: MfdStatusUpdateDataContent = new MfdStatusUpdateDataContent();\r\n        content.signalId = signalId;\r\n\r\n        if (wsMessage.messagecmd === MfdStatusCommandTypes.statusUpdate) {\r\n            content.signalId = signalId;\r\n            content.type = MfdStatusType.statusUpdate;\r\n            content.valueTypeIdentifier = wsMessage.data[3];\r\n            content.value = this._getInt32Value(signalId, wsMessage.data, 4);\r\n\r\n            // content.value = (wsMessage.data[7] << 24) | (wsMessage.data[6] << 16) | (wsMessage.data[5] << 8) | (wsMessage.data[4] << 0);\r\n            content.unavailable = (wsMessage.data[2] & 0x80) === 0 ? false : true;\r\n            return content;\r\n        } else if (wsMessage.messagecmd === MfdStatusCommandTypes.toggle) {\r\n            content.type = MfdStatusType.pulse; // This is the base type. Checked by receiver that it matches!\r\n            content.onOffStatus = (wsMessage.data[2] & 0x01) === 0 ? false : true;\r\n            content.err1FT = (wsMessage.data[2] & 0x02) === 0 ? false : true;\r\n            content.err2UC = (wsMessage.data[2] & 0x08) === 0 ? false : true;\r\n            content.unavailable = (wsMessage.data[2] & 0x80) === 0 ? false : true;\r\n            return content;\r\n        } else if (wsMessage.messagecmd === MfdStatusCommandTypes.momentary) {\r\n            content.type = MfdStatusType.momentary; // This is the base type. Checked by receiver that it matches!\r\n            content.onOffStatus = (wsMessage.data[2] & 0x01) === 0 ? false : true;\r\n            content.err1FT = (wsMessage.data[2] & 0x02) === 0 ? false : true;\r\n            content.err2UC = (wsMessage.data[2] & 0x08) === 0 ? false : true;\r\n            content.unavailable = (wsMessage.data[2] & 0x80) === 0 ? false : true;\r\n            return content;\r\n        } else if (wsMessage.messagecmd === MfdStatusCommandTypes.dimmerUpdate) {\r\n            content.type = MfdStatusType.dimmer; // This is the base type. Checked by receiver that it matches!\r\n            content.onOffStatus = (wsMessage.data[2] & 0x01) === 0 ? false : true;\r\n            content.err1FT = (wsMessage.data[2] & 0x02) === 0 ? false : true;\r\n            content.err2UC = (wsMessage.data[2] & 0x08) === 0 ? false : true;\r\n            content.unavailable = (wsMessage.data[2] & 0x80) === 0 ? false : true;\r\n            content.dimmerValue = (wsMessage.data[3] | (wsMessage.data[4] << 8));\r\n            return content;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public getVirtualSignals(sourceSignalId: number): VirtualSignalInfo[] {\r\n        const res = this._virtualSignalInfoMap.get(sourceSignalId);\r\n        return res != null ? res : [];\r\n    }\r\n\r\n    private _getInt32Value(_signalId: number, source: number[], startIndex: number): number {\r\n        const buffer = new Uint8Array(source);\r\n        const dataView2 = new DataView(buffer.buffer);\r\n        return dataView2.getInt32(startIndex, true);\r\n    }\r\n\r\n    private _getValue(signalId: number, source: number[], startIndex: number): number {\r\n        const buffer = new Uint8Array(source);\r\n        const dataView2 = new DataView(buffer.buffer);\r\n        let dataType: ValueDataType = ValueDataType.int32;\r\n\r\n        if (this.useChannelItems) {\r\n            const mapDt = this._nmeaSignalInfoMap.get(signalId);\r\n            dataType = mapDt != null ? mapDt.dataType : ValueDataType.int32;\r\n        }\r\n        switch (dataType) {\r\n            case ValueDataType.int8:\r\n                return dataView2.getInt8(startIndex);\r\n            case ValueDataType.uint8:\r\n                return dataView2.getUint8(startIndex);\r\n            case ValueDataType.int16:\r\n                return dataView2.getInt16(startIndex, true);\r\n            case ValueDataType.uint16:\r\n                return dataView2.getUint16(startIndex, true);\r\n            case ValueDataType.int32:\r\n                return dataView2.getInt32(startIndex, true);\r\n            case ValueDataType.uint32:\r\n                return dataView2.getUint32(startIndex, true);\r\n            case ValueDataType.int64:\r\n                return new Number(dataView2.getBigInt64(startIndex, true)).valueOf(); // The will probably not work for large values\r\n            case ValueDataType.uint64:\r\n                return new Number(dataView2.getBigUint64(startIndex, true)).valueOf(); // The will probably not work for large values\r\n            case ValueDataType.bit:\r\n                return dataView2.getUint8(startIndex) & 0x01;\r\n        }\r\n    }\r\n\r\n    public async initialize(useChannelItemsFile: boolean): Promise<void> {\r\n        this._useChannelItems = useChannelItemsFile;\r\n        if (useChannelItemsFile) {\r\n            const file = await FileLoadHelper.getJsonFile('signal-info.json') as SignalInfo[];\r\n            if (file != null) {\r\n                for (const info of file.filter(i => i.type === SignalInfoType.nmea)) {\r\n                    this._nmeaSignalInfoMap.set(info.signalId, info);\r\n                }\r\n\r\n                for(const info of file.filter(i => i.type === SignalInfoType.virtual)) {\r\n                    const sourceSignalId = (info as VirtualSignalInfo).sourceSignalId;\r\n                    if(this._virtualSignalInfoMap.has(sourceSignalId)){\r\n                        const existingSignals = this._virtualSignalInfoMap.get(sourceSignalId) ;\r\n                        existingSignals.push(info as VirtualSignalInfo);\r\n                    } else {\r\n                        this._virtualSignalInfoMap.set(sourceSignalId, [info as VirtualSignalInfo]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { CommunicationHandler } from './communication/communication-handler';\r\nimport { FileLoadHelper } from './file-load-helper';\r\n\r\nexport class NetlistChecksumHandler {\r\n    private _configurationChecksumFromProject: number = null;\r\n    private _communicationHandler: CommunicationHandler;\r\n\r\n    public get configurationChecksumFromWDU(): number {\r\n        return this._communicationHandler.configurationChecksumFromWDU;\r\n    }\r\n\r\n    public get configurationChecksumFromProject(): number {\r\n        return this._configurationChecksumFromProject;\r\n    }\r\n\r\n    constructor(communicationHandler: CommunicationHandler) {\r\n        this._communicationHandler = communicationHandler;\r\n    }\r\n\r\n    public async initialize(): Promise<void> {\r\n        await this._getProjectInfo();\r\n    }\r\n\r\n    public hasBothChecksums(): boolean {\r\n        return this.configurationChecksumFromWDU != null && this._configurationChecksumFromProject != null;\r\n    }\r\n\r\n    public isChecksumValid(): boolean {\r\n        return this.configurationChecksumFromWDU != null\r\n            && this._configurationChecksumFromProject != null\r\n            && this._configurationChecksumFromProject === this.configurationChecksumFromWDU;\r\n    }\r\n\r\n    private async _getProjectInfo(): Promise<void> {\r\n        try {\r\n            const file = await FileLoadHelper.getJsonFile('projectinfo.json');\r\n            // tslint:disable-next-line:no-string-literal\r\n            const checkSum = file['netlistChecksum'];\r\n            this._configurationChecksumFromProject = checkSum == null ? 0 : parseInt(checkSum, 10);\r\n        } catch {\r\n            // nop\r\n        }\r\n    }\r\n}\r\n","export interface IMagnitudeConverter {\r\n    getConvertedValue(rawValue: number, toMagnitude: number): number;\r\n}\r\n\r\nexport class MagnitudeConverter implements IMagnitudeConverter {\r\n    getConvertedValue(rawValue: number, toMagnitude: number): number {\r\n        return rawValue * (toMagnitude);\r\n    }\r\n}\r\n","import { HtmlHelpers } from '../graphics/helpers';\r\n\r\nexport class AppSelectorLinkTimer {\r\n    private _globalMouseUpEvent: (event: MouseEvent) => boolean;\r\n    private _globalMouseMoveEvent: (event: MouseEvent) => boolean;\r\n    private _globalTouchEndEvent: (event: TouchEvent) => boolean;\r\n    private _globalTouchMoveEvent: (event: TouchEvent) => boolean;\r\n    private _timeout: any;\r\n    private _onExecute: () => void;\r\n    public spinner: HTMLDivElement;\r\n    public progressBarWrapper: HTMLDivElement;\r\n    public progressBar: HTMLDivElement;\r\n    public active: boolean = false;\r\n    public startPosX: number;\r\n    public startPosY: number;\r\n\r\n    constructor(onExecute: () => void) {\r\n        this.spinner = document.querySelector('.app-selector-link-timer');\r\n        HtmlHelpers.hideElement(this.spinner);\r\n        this._onExecute = onExecute;\r\n        document.addEventListener('mousedown', (event) => {\r\n            if (this.active) {\r\n                clearTimeout(this._timeout);\r\n            }\r\n            document.addEventListener('mouseup', this._globalMouseUpEvent);\r\n            document.addEventListener('mousemove', this._globalMouseMoveEvent);\r\n            this.activate(event.clientX, event.clientY);\r\n            return false;\r\n        });\r\n\r\n        document.addEventListener('touchstart', (event) => {\r\n            if (this.active) {\r\n                clearTimeout(this._timeout);\r\n            }\r\n            document.addEventListener('touchend', this._globalTouchEndEvent);\r\n            document.addEventListener('touchcancel', this._globalTouchEndEvent);\r\n            document.addEventListener('touchmove', this._globalTouchMoveEvent, { passive: true });\r\n\r\n            const evt = (event as any).originalEvent === undefined ? event : (event as any).originalEvent;\r\n            this.activate(evt.touches[0].clientX, evt.touches[0].clientY);\r\n            return false;\r\n        }, { passive: true });\r\n\r\n        this._globalMouseUpEvent = (_event) => {\r\n            this.deactivate();\r\n\r\n            document.removeEventListener('mouseup', this._globalMouseUpEvent);\r\n            document.removeEventListener('mousemove', this._globalMouseMoveEvent);\r\n            return false;\r\n        };\r\n\r\n        this._globalMouseMoveEvent = (event) => {\r\n            if (!this.isMoveDistanceTooLong(event.clientX, event.clientY)) {\r\n                return;\r\n            }\r\n\r\n            this.deactivate();\r\n\r\n            document.removeEventListener('mouseup', this._globalMouseUpEvent);\r\n            document.removeEventListener('mousemove', this._globalMouseMoveEvent);\r\n\r\n            return false;\r\n        };\r\n\r\n        this._globalTouchEndEvent = (_event) => {\r\n            this.deactivate();\r\n\r\n            document.removeEventListener('touchend', this._globalTouchEndEvent);\r\n            document.removeEventListener('touchcancel', this._globalTouchEndEvent);\r\n            document.removeEventListener('touchmove', this._globalTouchMoveEvent);\r\n\r\n            return false;\r\n        };\r\n\r\n        this._globalTouchMoveEvent = (event: any) => {\r\n            const evt = event.originalEvent === undefined ? event : event.originalEvent;\r\n            if (!this.isMoveDistanceTooLong(evt.touches[0].clientX, evt.touches[0].clientY)) {\r\n                return false;\r\n            }\r\n            this.deactivate();\r\n\r\n            document.removeEventListener('touchend', this._globalTouchEndEvent);\r\n            document.removeEventListener('touchcancel', this._globalTouchEndEvent);\r\n            document.removeEventListener('touchmove', this._globalTouchMoveEvent);\r\n\r\n            return false;\r\n        };\r\n    }\r\n\r\n    private activate(posX: number, posY: number): void {\r\n        // If used on a zoomed area (i.e., media-query for appselector screen), adjust the position accordingly.\r\n        const zoom = parseInt(window.getComputedStyle(document.body).getPropertyValue('zoom'));\r\n        if(zoom != null && !isNaN(zoom)) {\r\n            posX /= zoom;\r\n            posY /= zoom;\r\n        }\r\n\r\n        this.active = true;\r\n        this.spinner.style.left = posX + 'px';\r\n        this.spinner.style.top = posY + 'px';\r\n        this.startPosX = posX;\r\n        this.startPosY = posY;\r\n        HtmlHelpers.showElement(this.spinner);\r\n\r\n        this._timeout = setTimeout(() => {\r\n            this._onExecute();\r\n            HtmlHelpers.hideElement(this.spinner);\r\n        }, 10000);\r\n    }\r\n\r\n    private deactivate() : void {\r\n        this.active = false;\r\n        clearTimeout(this._timeout);\r\n        HtmlHelpers.hideElement(this.spinner);\r\n    }\r\n\r\n    private isMoveDistanceTooLong(posX: number, posY: number): boolean {\r\n        const distance = Math.sqrt(Math.pow(this.startPosX - posX, 2) + Math.pow(this.startPosY - posY, 2));\r\n        const maxDistance = 100;\r\n        return distance > maxDistance;\r\n    }\r\n}","import { UrlHelper } from '../../infrastructure/url-helper';\r\nimport { AppSelectorLinkTimer } from '../app-selector/app-selector-link-timer';\r\nimport { HtmlHelpers } from './helpers';\r\nimport { PageNavigator } from './page-navigator';\r\n\r\nexport class AppSelectorLinkTimerDialog {\r\n    private _pageNavigator: PageNavigator;\r\n    private _dialogElement: HTMLElement;\r\n    private _navigateButton: HTMLElement;\r\n    private _cancelButton: HTMLElement;\r\n    private _returnToAppSelector: boolean;\r\n\r\n    constructor(pageNavigator: PageNavigator) {\r\n        this._pageNavigator = pageNavigator;\r\n        this._dialogElement = document.querySelector('.app-selector-link-timer-dialog');\r\n        this._navigateButton = document.querySelector('.app-selector-link-timer-dialog-button-navigate');\r\n        ['mousedown', 'click', 'touchstart'].forEach(\r\n            (eventType) =>\r\n                this._navigateButton.addEventListener(eventType, (_event: Event) => {\r\n                    this.navigate();\r\n                }));\r\n        this._cancelButton = document.querySelector('.app-selector-link-timer-dialog-button-cancel');\r\n        ['mousedown', 'click', 'touchstart'].forEach(\r\n            (eventType) =>\r\n                this._cancelButton.addEventListener(eventType, (_event: Event) => {\r\n                    this.hideDialog();\r\n                }));\r\n\r\n        const returnUrlQueryParam = UrlHelper.getUrlParamValue('returnUrl');\r\n        this._returnToAppSelector = (returnUrlQueryParam != null && returnUrlQueryParam !== '');\r\n\r\n        if (this._returnToAppSelector) {\r\n            this._navigateButton.innerHTML = 'Application Selector';\r\n        }\r\n        else {\r\n            this._navigateButton.innerHTML = 'Settings';\r\n        }\r\n    }\r\n\r\n    public initialize(): void {\r\n        this._initializeAppSelectorLinkTimer();\r\n    }\r\n\r\n    public showDialog(): void {\r\n        HtmlHelpers.showElement(this._dialogElement);\r\n    }\r\n\r\n    public hideDialog(): void {\r\n        HtmlHelpers.hideElement(this._dialogElement);\r\n    }\r\n\r\n    public navigate(): void {\r\n\r\n        if (this._returnToAppSelector) {\r\n            document.location = 'index.html?forceShowList=1';\r\n        } else {\r\n            this._pageNavigator.setActiveExternalPage('settings-web/#')\r\n        }\r\n\r\n    }\r\n\r\n    private _initializeAppSelectorLinkTimer(): void {\r\n        new AppSelectorLinkTimer(() => {\r\n\r\n            this.showDialog();\r\n        });\r\n    }\r\n}","import './index.scss';\r\nimport { GraphicsBootstrapper } from './modules/graphics/graphics-bootstrapper';\r\nconst bootstrapper = new GraphicsBootstrapper();\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    void bootstrapper.initialize();\r\n});\r\n","import { LanguageHandler } from './language-handler';\r\nimport { ValueConverter } from '../../infrastructure/value-converter/value-converter';\r\nimport { WebSocketManager } from '../../infrastructure/communication/web-socket-manager';\r\nimport { ComponentFactory } from './component-factory';\r\nimport { PageNavigator } from './page-navigator';\r\nimport { SettingsReader } from '../../infrastructure/settings-reader';\r\nimport { CommunicationHandler } from '../../infrastructure/communication/communication-handler';\r\nimport { PageOverlays } from './page-overlays';\r\nimport { DataSubscription } from './data-subscription';\r\nimport { ViewPortManager } from './view-port-manager';\r\nimport { ScreenSaver } from './screen-saver';\r\nimport { Log } from '../../infrastructure/log';\r\nimport { Timer } from '../../infrastructure/timer';\r\nimport { WebSocketContentDecoder } from '../../infrastructure/communication/web-socket-content-decoder';\r\nimport { ApplicationSettings } from './application-settings';\r\nimport { NetlistChecksumHandler } from '../../infrastructure/netlist-checksum-handler';\r\nimport { MagnitudeConverter } from '../../infrastructure/magnitude-converter';\r\nimport { AppSelectorLinkTimerDialog } from './app-selector-link-timer-dialog';\r\n\r\n\r\n\r\nexport class GraphicsBootstrapper {\r\n\r\n    public async initialize(): Promise<void> {\r\n        const webSocketManager = new WebSocketManager();\r\n        const contentDecoder = new WebSocketContentDecoder();\r\n        await contentDecoder.initialize(true);\r\n        const communicationHandler = new CommunicationHandler(webSocketManager, contentDecoder);\r\n        const settingsReader = new SettingsReader(communicationHandler);\r\n        await settingsReader.load();\r\n        const valueConverter = new ValueConverter(settingsReader);\r\n        const magnitudeConverter = new MagnitudeConverter();\r\n        const applicationSettings = ApplicationSettings.readApplicationSettings();\r\n        const languageHandler = new LanguageHandler(settingsReader, applicationSettings);\r\n        const pageNavigator = new PageNavigator();\r\n        const appSelectorLinkTimerDialog = new AppSelectorLinkTimerDialog(pageNavigator);\r\n        appSelectorLinkTimerDialog.initialize();\r\n        const screenSaver = new ScreenSaver(settingsReader, pageNavigator);\r\n        const componentFactory = new ComponentFactory(valueConverter, pageNavigator, communicationHandler, screenSaver, magnitudeConverter);\r\n        const [pages, viewPorts] = componentFactory.create();\r\n        pageNavigator.setPages(pages);\r\n        screenSaver.initialize();\r\n        const viewPortManager = new ViewPortManager(pageNavigator, screenSaver);\r\n        viewPortManager.setViewPorts(viewPorts);\r\n        const netlistChecksumHandler = new NetlistChecksumHandler(communicationHandler);\r\n        await netlistChecksumHandler.initialize();\r\n        const pageOverlays = new PageOverlays(communicationHandler, netlistChecksumHandler);\r\n        pageOverlays.initialize();\r\n        Timer.start();\r\n        // Start websocket\r\n        webSocketManager.connect();\r\n        // Start data subscription\r\n        const dataSubscription = new DataSubscription(webSocketManager);\r\n        dataSubscription.start();\r\n\r\n        await languageHandler.initialize();\r\n        // Log.logLevel = LogLevel.info;\r\n        // Log.autoRefresh = true;\r\n        Log.initialize();\r\n\r\n\r\n        // Hide startup logger button\r\n        onSystemHasStarted();\r\n        // Log.showLogView();\r\n    }\r\n\r\n}\r\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","p","b","baseURI","self","location","href","nc","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","done","then","create","ApplicationType","LogLevel","MfdStatusType","MessageTypeCode","SystemCommandTypes","MfdStatusCommandTypes","NmeaMessageCommandTypes","ClientControlCommands","AcknowlegementCommands","ValueDataType","ExpressionType","Command","WatchdogStates","SettingKey","ValueType","ValueSubType","ApplicationSettings","static","jsonString","getElementById","innerHTML","parse","Log","message","optionalParams","logLevel","error","console","_checkAutoRefresh","autoRefresh","_populateLog","warning","log","info","verbose","debug","_isInitialized","addEventListener","_event","_handleStartLogView","event","_debugModeActive","ctrlKey","altKey","showLogView","loggerDiv","_setupLogView","display","_state","_shortPressCount","globalLogMessages","button","innerText","_lastClick","Date","_durationGreaterThan","_activateDuration","_clickStart","_requiredShortPressCount","limit","timeToCompare","getTime","body","classList","add","off","onchange","selector","parseInt","onclick","_closeLog","_clearLog","_mimimizeLog","_maximizeLog","_setAutoRefreshLog","loggerContent","node","textNode","FileLoadHelper","xhr","method","open","onload","status","response","logError","statusText","onerror","ev","send","fileName","XMLHttpRequest","overrideMimeType","responseType","retryPromise","fn","retries","interval","r","setTimeout","Protocol","messagetype","acknowledgement","messagecmd","acknowledgementAck","size","data","clientId","extradata","type","applicationIds","systemWrite","ebpComponentId","pressed","toggleOn","set","reset","cmdToSend","setResetCmd","StatusUpdateDataContent","equals","other","signalId","unavailable","valueTypeIdentifier","MfdStatusUpdateDataContent","onOffStatus","err1FT","err2UC","dimmerValue","Timer","_isStarted","setInterval","_incrementTicks","_ticks","ticks","CommunicationHandler","constructor","webSocketManager","contentDecoder","configurationChecksumFromWDU","watchdogState","notSet","_webSocketManager","_nmeaValueReceivedDelegatesMap","Map","_mdfValueReceivedDelegatesMap","_onWatchdogStateChangesDelegates","_commandReceivedDelegates","_digitalSwitchingHeartbeatTimestamp","_lastReceivedMessageTimestamp","_oldHeartbeatDurationDivider","_watchdogDuration","_protocolVersion","_wduInfoReceived","_receivedNmeaDataMap","_receivedMfdDataMap","_contentDecoder","addOnDataReceivedDelegate","_onMessageReceived","timestamp","_watchdogLoop","getProtocolVersion","addOnNmeaValueReceivedDelegate","delegate","delegates","has","addOnMfdValueReceivedDelegate","addOnCommandReceivedDelegate","addWatchdogStateChangedDelegate","removeOnWathdogStateChangedDelegate","command","sendJson","_notifyMdfValueSubscribers","_isNewMfdData","_notifyNmeaValueSubscribers","_isNewNmeaData","mfdStatus","_propagateMfdMessage","decodeMFDChannelItem","nmeaMsg","_propagateNmeaMessage","decodeN2KDataItem","systemCmd","wduInfo","_wduSendsHeartbeat","logVerbose","wduInfoReceived","serviceProviderHeartbeat","_checkWatchdog","checksumReceived","wduHeartbeat","logDebug","receivedWduHeartbetAckCommand","wduSettingsUpdated","settingsUpdated","applicationSelection","applicationSelectionListReceived","clientControlCommand","forceReload","forcePageReload","reload","virtualSignals","getVirtualSignals","virtualSignal","vData","_evaluate","unAvailableExpression","statusExpression","momentary","signalValue","expression","expressionType","disabled","equal","valueA","notEqual","greaterThan","lessThan","greaterThanOrEqual","lessThanOrEqual","between","valueB","notBetween","_onWatchdogStateChanged","state","logInfo","_requestWduInfo","requestWduInfoCommand","nextDelay","elapsedSeconds","noConnectionToWdu","connect","noConnectionToDigitalSwitching","ok","SettingsReader","communicationHandler","_settings","_communicationHandler","_onSettingsChangedDelegate","_onCommandReceived","load","getJsonFile","setting","Settings","isExternalSetting","isOverridden","settings","isLoaded","getSetting","find","s","title","currentSetting","symbol","addOnSettingsReloadedDelegate","LanguageHandler","wduSettingHandler","applicationSettings","_activeLanguage","_applicationSettings","_settingsReader","initialize","_parseLanguageData","_propagateSettings","_setActiveLanguage","language","_languageResources","resource","elementId","tagName","toLocaleLowerCase","src","_getValue","resources","_getResourceFileName","normal","languageKey","l","ValueSubTypeDefinition","valueTypeDefinitions","valueType","DATAITEM_GENERIC_DEC3","unitLabel","defaultValueSubType","GENERIC_DEC0","valueSubTypes","valueSubType","wduSettingsId","conversion","DATAITEM_ABS_ANGLE_M_OR_T_DEC3","ABS_ANGLE_M_OR_T_DEC0","DATAITEM_BEARING_P_OR_S","DATAITEM_BEAUFORT","DATAITEM_CARDINAL_WIND","DATAITEM_AMPERE_DEC3","AMPERE_DEC0","DATAITEM_DATE","DAYS_1970","DATAITEM_DEPTH","DEPTH_METER","DEPTH_FEET","DATAITEM_DIMENSIONLESS_DEC3","DIMENSIONLESS_DEC0","DATAITEM_DISTANCE_DEC3","DISTANCE_KILOMETERS","DISTANCE_METERS","DISTANCE_MILES","DISTANCE_NAUTICAL_FEET","res","DISTANCE_NAUTICAL_METERS","DATAITEM_FREQUENCY_DEC3","FREQUENCY_DEC0","DATAITEM_FUELECONOMY_DEC3","FUELECONOMY_KILOMETERS_PER_LITRE","FUELECONOMY_MILES_PER_GALLON_US","FUELECONOMY_MILES_PER_GALLON_UK","FUELECONOMY_NAUTICAL_PER_GALLON_US","FUELECONOMY_NAUTICAL_PER_GALLON_UK","FUELECONOMY_METERS_PER_CUBICMETER","FUELECONOMY_NAUTICAL_PER_LITRE","FUELECONOMY_LITRES_PER_KILOMETER","FUELECONOMY_LITRES_PER_NAUTICAL","FUELECONOMY_LITRES_PER_MILE","DATAITEM_HEIGHT_DEC3","HEIGHT_METER","HEIGHT_FEET","DATAITEM_PERCENT_DEC3","PERCENT_DEC0","DATAITEM_POSITION_DEC3","POSITION_DEC0","DATAITEM_PRESSURE_DEC3","PRESSURE_KPA","PRESSURE_PSI","PRESSURE_BAR","DATAITEM_ATMOSPHERIC_PRESSURE_DEC3","DATAITEM_RANGEBEARING_DEC3","RANGEBEARING_DEC0","DATAITEM_RATEOFTURN_RAD_P_SEC_DEC3","RATEOFTURN_RAD_P_SEC_DEC0","DATAITEM_RPM_DEC3","RPM_DEC0","DATAITEM_SIGNEDANGLE_RAD_DEC3","SIGNEDANGLE_RAD_DEC0","DATAITEM_SPEED_MET_PER_SEC_DEC3","SPEED_MET_PER_SEC_DEC0","SPEED_KM_PER_HOUR","SPEED_KNOTS","SPEED_MILES_PER_HOUR","DATAITEM_TEMPERATURE_KELVIN_DEC3","TEMPERATURE_KELVIN","TEMPERATURE_CELCIUS","TEMPERATURE_FAHRENHEIT","DATAITEM_TIME_SEC_DEC3","TIME_SEC_SECOND","DATAITEM_TIME_DURATION","TIME_DURATION_STRING","days","Math","floor","hours","minutes","str","DATAITEM_TRANSMISSION_GEAR_DEC3","TRANSMISSION_GEAR_DEC0","DATAITEM_UNSIGNEDANGLE_RAD_DEC3","UNSIGNEDANGLE_RAD_DEC0","DATAITEM_VOLT_DEC3","VOLT_DEC0","DATAITEM_CUMETRES_DEC3","CUMETRES_DEC0","GALLONS","IMPERIAL_GALLON","DATAITEM_VOLUMERATE_CUMS_DEC3","VOLUMERATE_CUMS_DEC0","VOLUMERATE_GALS","VOLUMERATE_IMPGALS","DATAITEM_WINDSPEED_M_PER_S_DEC3","WINDSPEED_M_PER_S_DEC0","DF02_ANGLE","DEGREE_DEC4","PI","DF04_ANGLE_SIGNED","DF07_CURRENT_ELECTRIC_HIGH","CURRENT_DEC0","DF09_DISTANCE","DF105_TEMPERATURE_EXTENDED_RANGE_AND_PRECISION","DF106_VOLTAGE","DF109_DISTANCE_ROUGH","DF120_PERCENT_RESTRICTED_RANGE","PERCENT_DEC1","DF123_BATTERY_CAPACITY_EXTENDED_RANGE","WATT_DEC1","DF129_TORQUE","NewtonMetersDec1","DF131_POWER_HIGH_RANGE","WATT_DEC0","DF30_PERCENT_RELATICE_MEASURE","DF38_TEMPERATURE_HIGH","DF39_TEMPERATURE_LOW","DF42_VOLTAGE_HIGH","VOLT_DEC2","DF44_VOLUME","DF47_PRESSURE_MEDIUM","DF65_TIME_INTERVAL_STANDARD","valueSeconds","padStart","DF67_TIME_INTERVAL_LARGE","DF71_TIME_INTERVAL_MEDIUM","negative","abs","DF72_ROTATIONAL_RATE_UNSIGNED","DF93_PERCENT_ABSOLUTE","DF95_CURRENT_ELECTRIC_HIGH","DF98_TIME_INTERVAL_MEDIUM","DF18_FLOW_RATE_LOW","DF35_SPEED_OVER_GROUND","DF46_DISTANCE_SIGNED_MEDIUM","DF102_AC_VRMS","DF100_BATTERY_CAPACITY","DF29_PRESSURE","ValueConverter","settingsReader","_selectedConversions","getUnit","subDefinition","_setDefaultConversion","getConvertedValue","rawValue","valueTypeId","x","DEFAULT","subTypeDefinition","_createNoConversionSubTypeDefinition","subValueType","_setConversionFromSettingsData","depth","distanceUnit","fuelEconomyUnit","height","pressure","atmosphericPressure","speed","temperature","volume","volumeRate","settingId","subType","SocketState","Visibility","LayerActionEnum","SignalValueFormatMode","GaugeSlicedOverlayAnimationState","SignalInfoType","WebSocketManager","currentState","autoReconnectOnError","_webSocket","_onMessageDelegates","_onSocketStateChangesDelegates","_createNewWebSocket","removeOnDataReceivedDelegate","addOnSocketStateChangedDelegate","removeOnSocketStateChangedDelegate","readyState","OPEN","logWarning","CONNECTING","close","_onSocketClosed","WebSocket","host","onopen","_onOpen","onmessage","_onSocketError","onclose","_onSocketStateChanged","connecting","socketError","closed","_notifySocketStateSubscribers","HtmlHelpers","visible","showElement","hideElement","func","wait","immediate","timeout","context","args","arguments","callNow","clearTimeout","NumberHelpers","number","precision","shift","numberArg","precisionArg","reverseShiftArg","numArray","split","round","arg","toLowerCase","min","max","Component","isUnavailable","hideOnServiceUnavailable","_visibility","_isVisible","_layerId","dataset","_mfdComponentId","_nmeaComponentId","nmeaComponentId","isNaN","_onMfdDataReceived","onNmeaDataReceived","parseBooleanArgument","onInitialize","layerId","setVisibility","visibility","_evaluateVisbility","refresh","onRedraw","mfdComponentId","onMfdDataReceived","_message","onVisibilityChanged","_visible","onUnavailableChanged","allowSignalTypes","includes","setElementVisibility","Gauge","super","_value","_position","_wrapAroundPosition","_valueReceived","currentValue","currentPosition","startPosition","_startPosition","endPosition","_endPosition","counterClockwise","_counterClockwise","statusUpdate","_overlayImage","_wrapAround","_closestEquivalentAngle","transform","_removeNoTransitionOnNextRedraw","_updateValue","_parseAttributes","_setDomElements","_addAnimationStyle","_positionRange","_valueRange","_maxValue","_minValue","_disableAnimation","minValue","maxValue","wrapAround","disableAnimation","_valueTypeIdentifier","clamp","valueRatio","from","to","Button","_error1","_error2","_on","_pressed","_stackImages","_imgOff","_imgOn","_imgError12","_imgError1","_imgError2","_imgNotAvailable","_imgPressed","pulse","buttonUp","_isMomentaryButton","function","stackImages","_globalMouseUpEvent","preventDefault","_registerEvents","buttonDown","momentaryCommand","toggleCommand","removeEventListener","forEach","eventType","stopPropagation","LevelGauge","_currentValue","currentLevelRatio","_currentLevelRatio","minHeigtRatio","_minHeightRatio","maxHeigtRatio","_maxHeightRatio","_thresholdLowValue","_levelImage","_levelImageLowThreshold","_levelImageHighThreshold","_levelTrackerImage","_levelTrackerImageLowThreshold","_levelTrackerImageHighThreshold","_thresholdHighValue","_resolveCurrentHeightsAndWidths","top","_elementHeight","_levelDiv","clip","_elementWidth","trackerBottomPx","_trackerHeight","trackerLeftPx","_trackerWidth","bottom","left","_trackerLowThresholdHeight","_trackerLowThresholdWidth","_trackerHighThresholdHeight","_trackerHighThresholdWidth","_calculateValues","_parseHtmlAttributes","setDomElements","minHeight","maxHeight","mem","thresholdLowValue","thresholdHighValue","parseFloat","getComputedStyle","getPropertyValue","heightRange","valueCoefficient","ImageComponent","LayerAction","json","action","doNothing","NavigationButton","pageNavigator","_holdDownTimeout","_layerActions","_pageNavigator","_elementImagePressed","_destinationSystemPage","destinationSystemPage","_usesPageNavigation","_destinationPageId","destinationPageId","_requireHoldDownButtonSeconds","requireHoldDownButtonSeconds","layerActions","Array","isArray","fromJson","registerEvents","triggerClickAfterHoldDown","bind","onClick","_navigateToPage","_executeLayerActions","setActiveExternalPage","layerAction","destinationPage","getActivePage","getLayer","_updateLayerState","setActivePageById","show","hide","newVisiblityState","toggle","SignalValue","valueConverter","magnitudeConverter","_signalType","_valueConverter","_valueElement","_unitElement","_magnitudeConverter","dimmer","_valueType","drawIsUnavailable","convertedValue","numberConvertedValue","_offValue","_decimalPlaces","textContent","_magnitudeConversion","roundedValue","formatter","format","_drawOffValue","_showUnit","unitText","_formatMode","formatMode","_formatSetting","formatSetting","decimalPlaces","showUnit","_notAvailableValue","notAvailableValue","offValue","signalType","magnitudeConversion","_createTextFormatter","decimals","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","useGrouping","fixed","total","minimumIntegerDigits","TextBox","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","wrapper","_len","arguments_","_key","elapsed","now","exec","clear","cancel","Slider","onButtonDown","innerEventType","_globalMouseMoveEvent","onButtonUp","_throttleRefresh","_readOnly","_moving","evt","originalEvent","y","touches","pageX","pageY","updatePosition","_debounceRefreshByFeedBackValue","onButtonMove","rawX","rawY","_handleElement","elementBoundingClientRect","getBoundingClientRect","xFromCenter","width","yFromCenter","handleWidth","elementWidth","rotatedX","cos","_rotation","sin","maxActualWidth","setValue","_throttleSendData","sendData","dimmerCommand","clampedValue","_clampValue","xPx","_setLeft","_handleOnElement","_handlePressedElement","_handleError1Element","_handleError2Element","_handleError12Element","_handleNotAvailableElement","elementHeight","yPx","_setTop","trackOnWidth","_trackFillElement","_error1Element","_error2Element","_error12Element","_notAvailableElement","dimmerBaseMessage","_feedBackValue","atBegin","rotation","readOnly","val","Indicator","Page","pageElement","pageId","viewPortId","isStartPage","_layers","_element","_pageId","_viewPortId","_isStartPage","isVisible","layers","getLayers","redraw","onParentVisibilityChanged","ColorRectangle","_bgColor","_opacityLevel","background","_rgbaValue","ebpComponentIds","_bgColorEbpComponentId","_opacityEbpComponentId","onOpacityDataReceived","onColorDataReceived","blue","green","red","ebpBgcolorComponentId","ebpOpacityComponentId","Layer","visibleInitially","page","_id","_page","componentVisibility","component","_components","hidden","components","ViewPort","aspectRatio","screenSaverPageId","ScreenSaverButton","screenSaver","_isPressed","_screenSaver","enabled","isEnabled","_imageEnabled","_imagePressed","_imageDisabled","_buttonUp","onScreensaverEnabled","_buttonDown","activate","GaugeSlicedOverlay","_currentAnimationPosition","_canvasImage","_animationFrameRequested","_animationState","animationDisabledDueToInvisibility","_startAnimationTimestamp","_startAnimationPosition","cancelAnimationFrame","_animationRequestFrameId","requestAnimationFrame","_drawSlicedOverlay","_canvasElement","Image","getAttribute","animating","animationDisabledEnableNextFrame","diff","maxDelay","progressFactor","smoothFactor","pow","cx","cy","radius","getContext","clearRect","save","startAngle","endAngle","beginPath","moveTo","arc","lineTo","drawImage","restore","ComponentFactory","pages","viewPorts","viewPortElements","querySelectorAll","viewPortElement","pageCollectionId","pageElements","viewPort","_createComponents","_createLayers","componentElement","createComponent","el","layersJson","layerJson","v","layerComponents","filter","c","contains","useSlicedOverlay","ExternalPageNavigator","_externalPageBackButton","_onBackButtonClick","localUrl","onHideCallback","_onHideCallback","charAt","UrlHelper","urlParts","retValue","urlPart","substring","param","paramValue","cleanUrl","searchParams","removeUrlParameterHref","history","pushState","delete","path","extraReturnUrlParams","append","navigationUrl","settingsUrl","urlHref","appUrl","returnUrls","getAll","encodedAppUrl","urlAppends","PageNavigator","_maxHistoryLength","_pages","_currentViewPort","_externalPageNavigator","_history","_activePageId","createUrlWithReturnParameter","setPages","_setActivePage","setActivePageByViewPort","hideAllPages","urlPageId","getUrlParamValue","removeUrlParameter","targetUrl","navHistory","NavigationHistoryItem","externalPageUrl","navigateBack","isExternalPage","_setActiveExternalPage","currentPage","getActiveViewPort","addToHistory","navHistoryItem","pop","activePage","PageOverlays","netlistChecksumHandler","_imagesLoaded","_showWarnings","_warningHideTimeout","_hideWarningPressTimeout","_lastKnownChecksum","_netlistChecksumHandler","_overlayWebSocketError","_overlayBusError","_overlayStarting","_overlayReload","_overlayWhitePageBlocker","_overlayWarningChecksum","_overlayWarningTest","_setOverlayStarting","_setOverlayWebSocketError","_setOverlayBusError","_setOverlayReload","_drawOverlayWarnings","_removeWhitePageBlocker","_imageLoadedNotifier","_registerWarningTouchEvents","all","images","img","complete","naturalHeight","results","every","_calculateOverlay","_hideWarnings","_calculateChecksumWarning","_calculateTestWaring","_hideWarningsEventListener","hasBothChecksums","isChecksumValid","text","trim","showWarnings","_setChecksumBusError","configurationChecksumFromProject","_watchdogState","DataSubscription","start","_sendSubscriptionRequests","_sendN2kSubscriptionRequestsToWdu","ViewPortManager","_activeViewPortId","_changeViewPortBasedOnWindowSize","setViewPorts","_viewPorts","innerWidth","innerHeight","currentAspectRatio","sorted","sort","selectedVp","vp","ScreenSaver","_screenSaverIdle","_screensaverIsActive","_intervalTime","_ignoreEvents","_closeEvents","_isEnabled","_onStatusChangeDelegates","_screenSaverPageId","_screenSaverPageExists","_screenSaverActivatedTime","_lastInputTime","_refresh","_screensaverInterval","theEvent","_onValidCloseEvent","_onIgnoreEvent","_ensuerScreenSaverPageExists","_ensureEnabled","_currentInterval","thePrevStatus","screensaver","timeSinceLastInput","WebSocketContentDecoder","_nmeaSignalInfoMap","_virtualSignalInfoMap","useChannelItems","_useChannelItems","wsMessage","nmeaStatusContent","_getInt32Value","dimmerUpdate","sourceSignalId","_signalId","source","startIndex","buffer","Uint8Array","DataView","getInt32","dataView2","dataType","int32","mapDt","int8","getInt8","uint8","getUint8","int16","getInt16","uint16","getUint16","uint32","getUint32","int64","Number","getBigInt64","valueOf","uint64","getBigUint64","bit","useChannelItemsFile","file","nmea","virtual","NetlistChecksumHandler","_configurationChecksumFromProject","_getProjectInfo","checkSum","MagnitudeConverter","toMagnitude","AppSelectorLinkTimer","onExecute","active","spinner","_onExecute","_timeout","clientX","clientY","_globalTouchEndEvent","_globalTouchMoveEvent","passive","deactivate","isMoveDistanceTooLong","posX","posY","zoom","startPosX","startPosY","sqrt","AppSelectorLinkTimerDialog","_dialogElement","_navigateButton","navigate","_cancelButton","hideDialog","returnUrlQueryParam","_returnToAppSelector","_initializeAppSelectorLinkTimer","showDialog","bootstrapper","readApplicationSettings","languageHandler","componentFactory","onSystemHasStarted"],"sourceRoot":""}